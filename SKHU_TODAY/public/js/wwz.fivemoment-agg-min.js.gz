if(typeof window.console=="undefined"){window.console={log:function(){}}}(function(a){a.Class=function(b){return{body:function(c){var e=b;var f=function(h,g){return function(){return h.apply(g,arguments)}};var d=function(k,g){var i=null;if(g[k]!=undefined){i=g[k]}var j=null;if(g.extend!=undefined){j=g.extend}var h=function(){if(j!=null){var n=j.apply(this,arguments);if(this!=window){for(var m in this["super"]){this["super"][m]=f(this["super"][m],this)}}}if(i!=null){i.apply(this,arguments)}return this};h.prototype={constructor:h,className:k,extend:j,"super":{}};var l=function(m){var s={constructor:null,extend:null,staticVal:null};s[k]=null;if(m.prototype.extend!=null){s[m.prototype.extend.className]=null}if(m.prototype.extend!=null){a.extend(m.prototype,m.prototype.extend.prototype);for(var p in m.prototype.extend.prototype){var o=m.prototype.extend.prototype[p];if(typeof o=="function"){m.prototype["super"][p]=o}}}jQuery.extend(m.prototype,g);if(g.staticVal){for(var r in g.staticVal){var q=g.staticVal[r];if(typeof q=="function"){m[r]=f(q,m)}else{m[r]=q}}}for(var n in s){delete m.prototype[n]}return m};return l(h)};window[e]=d(e,c)}}}})($);if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("BrowserDetectionHelper").body({staticVal:{_singleton:null,getInstance:function(){if(BrowserDetectionHelper._singleton==null){BrowserDetectionHelper._singleton=new BrowserDetectionHelper()}return BrowserDetectionHelper._singleton}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer"},{string:navigator.userAgent,subString:"Trident",identity:"explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"Safari",identity:"safari"},{string:navigator.userAgent,subString:"Opera",identity:"opera"}],BrowserDetectionHelper:function(){this.browser=this.searchString(this.dataBrowser)||"Other";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(c){for(var a=0;a<c.length;a++){var b=c[a].string;this.versionSearchString=c[a].subString;if(b.indexOf(c[a].subString)!==-1){return c[a].identity}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a===-1){return}var c=b.indexOf("rv:");if(this.versionSearchString==="Trident"&&c!==-1){return parseFloat(b.substring(c+3))}else{return parseFloat(b.substring(a+this.versionSearchString.length+1))}}});$.Class("EventControlHelper").body({staticVal:{_singleton:null,getInstance:function(){if(EventControlHelper._singleton==null){EventControlHelper._singleton=new EventControlHelper()}return EventControlHelper._singleton}},EventControlHelper:function(){},preventEventBubbling:function(a){if(typeof a.preventDefault==="function"){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}}});$.Class("AlertLayerSupporter").body({staticVal:{_singleton:null,getInstance:function(){if(AlertLayerSupporter._singleton==null){AlertLayerSupporter._singleton=new AlertLayerSupporter()}return AlertLayerSupporter._singleton}},$confirm:null,$message:null,$error:null,confirmTemplate:null,messageTemplate:null,errorTemplate:null,AlertLayerSupporter:function(){this.confirmTemplate=$.trim($("#ConfirmLayerTemplate").html());this.messageTemplate=$.trim($("#MessageLayerTemplate").html());this.errorTemplate=$.trim($("#ErrorLayerTemplate").html())},onConfirmLayer:function(g,j){var i=this,b=g||{},c=b.desc||"진행하시겠습니까?",a=b.confirmBtn||"확인",e=b.cancelBtn||"취소",d=b.clazz||null,f;this._callback=j;f=_.template(this.confirmTemplate,{desc:c,clazz:d,confirmBtn:a,cancelBtn:e});$("body").append(f);this.$confirm=$(".wwz-layer-alert--confirm");this.$confirm.find(".wwz-alert-btn--cancel").on("click",function(){i.offLayer(i.$confirm);i._callback(false)});this.$confirm.find(".wwz-alert-btn--confirm").on("click",function(){i.offLayer(i.$confirm);i._callback(true)})},onErrorLayer:function(i,b){var c=this,e=i||{},g=e.desc||"오류가 발생했습니다<br/>고객센터로 문의하세요",f=e.message||"",a=e.confirmBtn||"닫기",d;this._callback=b;d=_.template(this.errorTemplate,{desc:g,confirmBtn:a,message:f});$("body").append(d);this.$error=$(".wwz-layer-alert--error");this.$error.find(".wwz-alert-btn--close").on("click",function(){c.offLayer(c.$error);c._callback(true)})},offLayer:function(a){a.find(".d-layer-alert-btn").off("click");a.remove()}});$.Class("Dimmed").body({staticVal:{_singleton:null,getInstance:function(){if(Dimmed._singleton==null){Dimmed._singleton=new Dimmed()}return Dimmed._singleton}},Dimmed:function(){},obj:null,on:function(d,a){var b=d||"#000000",c=a||0.75;this.obj=$('<div class="dimmed" id="DimLayer"></div>');this.obj.css({background:b,opacity:c});this.obj.appendTo("body")},off:function(){if(this.obj!=null){this.obj.remove()}}});$.Class("Link").body({staticVal:{_singleton:null,getInstance:function(){if(Link._singleton==null){Link._singleton=new Link()}return Link._singleton}},Link:function(){},move:function(b){var a=$(b).attr("data-url");location.href=a},open:function(d){var b=$(d).attr("data-url");var e=$(d).attr("data-id");var a=$(d).attr("data-attr");var c=window.open(b,e,a);if(c==null){alert(" ※ 윈도우 XP SP2 또는 인터넷 익스플로러 7 사용자일 경우에는 \n    화면 상단에 있는 팝업 차단 알림줄을 클릭하여 팝업을 허용해 주시기 바랍니다. \n\n※ MSN,야후,구글 팝업 차단 툴바가 설치된 경우 팝업허용을 해주시기 바랍니다.")}}});$.Class("ArrayUtils").body({find:function(d,b,c){for(var a=0;a<d.length;a++){if(d[a][b]==c){return d[a]}}return null},cssStyleToObject:function(c){var a={};if(c){var b=c.split(";");$.each(b,function(e,f){var d=f.split(":");if(d.length==2){a[$.trim(d[0])]=$.trim(d[1])}})}return a}});$.Class("ConcurrentUtils").body({staticVal:{sleep:function(a){var b=new Date().getTime();for(;;){if(((new Date().getTime())-b)>a){break}}}}});$.Class("DateUtils").body({DateUtils:function(){},format:function(c,d){if(!c.valueOf()){return" "}var b=this;var a=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];return d.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi,function(e){switch(e){case"yyyy":return c.getFullYear();case"yy":return b.numberSetter((c.getFullYear()%1000),2);case"MM":return b.numberSetter((c.getMonth()+1),2);case"dd":return b.numberSetter(c.getDate(),2);case"E":return a[c.getDay()];case"HH":return b.numberSetter(c.getHours(),2);case"hh":return b.numberSetter(((h=c.getHours()%12)?h:12),2);case"mm":return b.numberSetter(c.getMinutes(),2);case"ss":return b.numberSetter(c.getSeconds(),2);case"a/p":return c.getHours()<12?"오전":"오후";default:return e}})},numberSetter:function(d,c){var f=d.toString();var e=c-f.length;var b="",a=0;while(a++<e){b+=0}return b+d}});$.Class("TextUtils").body({TextUtils:function(){},replace:function(a,b){return $(a).text(b)},append:function(c,e,b){var d=b||false;var a=$.trim($(c).text());if(d){return $(c).text(a+" "+e)}else{return $(c).text(a+e)}},prepend:function(c,d,b){var a=$.trim($(c).text());if(space){return $(c).text(d+" "+a)}else{return $(c).text(d+a)}}});$.Class("Spinner").body({Spinner:function(b,a){$spinner=$(b);this._interval=a.interval||10;this._diameter=a.diameter||$spinner.width();this._count=0;this._el=b;return this},_loop:null,_interval:null,_diameter:null,_count:0,_el:null,start:function(){var a=this;this._count=0;this._loop=setInterval(function(){if(a._count==19){a._count=0}var b=(-a._diameter*a._count)+"px";$spinner.css("background-position","center "+b);a._count++},a._interval)},stop:function(){clearInterval(this._loop)}});$.Class("ProgressPopup").body({staticVal:{_singleton:null,getInstance:function(){if(ProgressPopup._singleton===null){ProgressPopup._singleton=new ProgressPopup()}return ProgressPopup._singleton}},obj:null,spinner:null,popupText:null,isDimmed:null,on:function(b,c){var a=$(".fragment_progress");this.isDimmed=c!==false;this.popupText=b||"콘텐츠를 업로드하는 중입니다.";if(a.length!=0){this.obj=a}else{this.obj=$($("#CommonProgressPopupTemplate").html());this.obj.appendTo("body")}this.obj.find("#ProgressText").text(this.popupText);this.spinner=new Spinner("#spinner",{interval:50});this.spinner.start()},off:function(){if(this.spinner){this.spinner.stop()}if(this.obj){this.obj.remove()}}});$.Class("ColorUtils").body({hashToR:function(a){return parseInt((a).substring(0,2),16)},hashToG:function(a){return parseInt((a).substring(2,4),16)},hashToB:function(a){return parseInt((a).substring(4,6),16)},RGBToHash:function(j,f,c){var k=[j,f,c],d;for(var e=0,a=k.length;e<a;e++){d=k[e];d=parseInt(d,10).toString(16);if(d.length<2){d="0"+d}k[e]=d}return k.join("")},hex:function(a){return("0"+parseInt(a).toString(16)).slice(-2)},initColor:function(a){var b="FFFFFF",c;if(typeof a==="undefined"||a===null){return b}if(a.charAt(0)==="#"){b=a.substring(1,7)}else{if(a.indexOf("rgba")===0){c=a.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+)\)$/);if(c[4]!=="0"){b=this.hex(c[1])+this.hex(c[2])+this.hex(c[3])}else{b="FFFFFF"}}else{if(a.indexOf("rgb")===0){c=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);b=this.hex(c[1])+this.hex(c[2])+this.hex(c[3])}}}return b}});$.Class("ContentUploadCounter").body({ContentUploadCounter:function(){},obj:null,on:function(b,a){var c;this.currentLength=0;this.totalLength=b;this.callback=a;c=_.template($.trim($("#ContentUploadCounterTemplate").html()),{total:b});$("body").append(c);this.obj=$(".t-upload_counter")},notify:function(){var a=this,b;this.currentLength+=1;if(this.currentLength===this.totalLength){b=100}else{b=parseFloat(this.currentLength/this.totalLength).toFixed(2)*100}$(".wwz-set-upload_count").text(this.currentLength);$(".wwz-set-upload_progress").css("width",b+"%");setTimeout(function(){if(a.currentLength===a.totalLength){a.off();a.callback()}},500)},off:function(){if(this.obj){this.obj.remove()}}});$.Class("ImageUploadRunner").body({staticVal:{_formId:null,_progressBarId:null,_uploadUrl:null,_callBackFunction:null,_isMultiple:false},ImageUploadRunner:function(){},upload:function(k,g,j,f,l,b,d){var a,m,c,e;ImageUploadRunner._formId=k;ImageUploadRunner._progressBarId=g;ImageUploadRunner._uploadUrl=j;ImageUploadRunner._callBackFunction=b;ImageUploadRunner._isCopyFromCms=d||false;if(!ImageUploadRunner._isCopyFromCms){if(f===null||f===""||typeof f==="undefined"||$(f).size()<1){return}if($(f).size()>1){ImageUploadRunner._isMultiple=true}a=new FormData(document.getElementById(ImageUploadRunner._formId));for(c=0,e=f.length;c<e;c++){a.append("fileUploadFiles["+c+"]",f[c])}a.append("fileUploadFilesMeta",JSON.stringify(l))}else{a=null}m=new XMLHttpRequest();m.upload.addEventListener("loadstart",this.uploadStart,false);m.upload.addEventListener("progress",this.uploadProgress,false);m.upload.addEventListener("load",this.uploadComplete,false);m.upload.addEventListener("error",this.uploadFailed,false);m.upload.addEventListener("abort",this.uploadCanceled,false);m.open("POST",ImageUploadRunner._uploadUrl);m.onreadystatechange=function(){if(m.readyState==4){var i=JSON.parse(m.responseText),n={};n.width=i.width||0;n.height=i.height||0;n.contentReferenceId=i.contentReferenceId;if(ImageUploadRunner._isMultiple){ImageUploadRunner._callBackFunction(i.imgUrls)}else{ImageUploadRunner._callBackFunction(i.imgUrl,n)}}};m.send(a)},upload_v2:function(n,l,m,k,o,c,g){var q=this,e=new ContentUploadCounter(),b,f,p,d,j;ImageUploadRunner._formId=n;ImageUploadRunner._progressBarId=l;ImageUploadRunner._uploadUrl=m;ImageUploadRunner._callBackFunction=c;ImageUploadRunner._isCopyFromCms=g||false;ImageUploadRunner._contentArray=[];ImageUploadRunner._urlArray=[];ImageUploadRunner._errorArray=[];if(!ImageUploadRunner._isCopyFromCms){if(k===null||k===""||typeof k==="undefined"||$(k).size()<1){return}if($(k).size()>1){if($(k).size()>20){alert("최대 20개의 콘텐츠만 업로드할 수 있습니다");Dimmed.getInstance().off();return}ImageUploadRunner._isMultiple=true}f=[];for(d=0,j=k.length;d<j;d++){var a=[],b;a.push(o[d]);b=new FormData(document.getElementById(ImageUploadRunner._formId));b.append("fileUploadFiles[0]",k[d]);b.append("fileUploadFilesMeta",JSON.stringify(a));f.push(b)}}else{ImageUploadRunner._isMultiple=false;f=[null]}e.on(f.length,this.completeUpload);for(d=0,j=f.length;d<j;d++){(function(i){var r=q.createXHR();r.open("POST",ImageUploadRunner._uploadUrl);r.onreadystatechange=function(){if(r.readyState===4){if(r.status===200){var s=JSON.parse(r.responseText),t={};t.width=s.width||0;t.height=s.height||0;t.contentReferenceId=s.contentReferenceId;ImageUploadRunner._contentArray.push(t);ImageUploadRunner._urlArray.push(s.imgUrl);e.notify()}else{if(ImageUploadRunner._isCopyFromCms){ImageUploadRunner._errorArray.push(ImageUploadRunner._uploadUrl)}else{ImageUploadRunner._errorArray.push(k[i])}e.notify()}}};r.send(f[i])})(d)}},uploadByIframe:function(f,e,i){var d=document.createElement("iframe"),c=new ContentUploadCounter(),a,g;ImageUploadRunner._callBackFunction=i;d.setAttribute("id","upload_iframe");d.setAttribute("name","upload_iframe");d.setAttribute("width","0");d.setAttribute("height","0");d.setAttribute("border","0");d.setAttribute("style","width: 0; height: 0; border: none;");document.body.appendChild(d);window.frames.upload_iframe.name="upload_iframe";g=document.getElementById("upload_iframe");var b=function(){var k,j;if(g.detachEvent){g.detachEvent("onload",b)}else{g.removeEventListener("load",b,false)}if(g.contentDocument){k=g.contentDocument.body.innerHTML}else{if(g.contentWindow){k=g.contentWindow.document.body.innerHTML}else{if(g.document){k=g.document.body.innerHTML}}}setTimeout(function(){$("body").find("#upload_iframe").remove()},250);ImageUploadRunner._callBackFunction($(k).text())};if(g.addEventListener){g.addEventListener("load",b,true)}if(g.attachEvent){g.attachEvent("onload",b)}$("#"+f).attr("target","upload_iframe");$("#"+f).attr("action",e);$("#"+f).submit()},updateImage:function(d,c,b,e){var a=this;ImageUploadRunner._callBackFunction=e;$.ajax({type:"PUT",url:d,contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:JSON.stringify(b),datatype:"json"}).done(function(g,i,f){ImageUploadRunner._callBackFunction(c,b)})},createXHR:function(){try{return new XMLHttpRequest()}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){return new ActiveXObject("Msxml2.XMLHTTP")}}},completeUpload:function(){if(ImageUploadRunner._isMultiple){if(ImageUploadRunner._errorArray.length>0){alert("오류가 발생하여 "+ImageUploadRunner._errorArray.length+"개의 콘텐츠 업로드에 실패했습니다")}ImageUploadRunner._callBackFunction(ImageUploadRunner._urlArray)}else{if(ImageUploadRunner._errorArray.length>0){alert("오류가 발생하여 콘텐츠 업로드에 실패했습니다");ImageUploadRunner._callBackFunction(null,null)}else{ImageUploadRunner._callBackFunction(ImageUploadRunner._urlArray[0],ImageUploadRunner._contentArray[0])}}}});$.Class("TextRangeHelper").body({staticVal:{_savedSel:null,_savedSelActiveElement:null,saveSelection:function(){if(TextRangeHelper._savedSel){rangy.removeMarkers(TextRangeHelper._savedSel)}try{TextRangeHelper._savedSel=rangy.saveSelection();TextRangeHelper._savedSelActiveElement=document.activeElement}catch(a){}},restoreSelections:function(){if(TextRangeHelper._savedSel){rangy.restoreSelection(TextRangeHelper._savedSel,true);try{TextRangeHelper._savedSel=rangy.saveSelection()}catch(a){}}},restoreAndDestorySelections:function(){if(TextRangeHelper._savedSel){rangy.restoreSelection(TextRangeHelper._savedSel,true);TextRangeHelper._savedSel=null}},destorySelection:function(){TextRangeHelper._savedSel=null},selectAllChildren:function(c){var b=rangy.createRange(),a=c.contents(),d;b.setStart(a[0],0);d=a[a.length-1];b.setEnd(d,d.nodeType==3?d.length:d.childNodes.length);rangy.getSelection().setSingleRange(b)},getText:function(){var b,a,c,d;this.restoreSelections();b=$(rangy.getSelection().focusNode).text();c=$.trim(b);a=rangy.getSelection().getAllRanges();if(a&&a[0]){d=$(a[0].cloneContents()).text()}return(d&&d=="")?c:d}}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("UserLoginTransmitter").body({staticVal:{_singleton:null,_targetClient:null,getInstance:function(){if(UserLoginTransmitter._singleton==null){UserLoginTransmitter._singleton=new UserLoginTransmitter()}return UserLoginTransmitter._singleton}},UserLoginTransmitter:function(){},initLoginUser:function(a){var e=$.cookie("token"),d,c=a._loginUser,b=a._targetClient;if(c&&c.isLogin){return}if(e&&e.length>0&&b){d="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=e;callBack=function(f){if(f.result=="SUCCESS"){a._loginUser=f.userInfo;$.cookie("token",f.token,{expires:1,path:"/",secure:false})}return};this.run(d,"POST",params,callBack)}},login:function(h,l,j,d){var c=400,o=100,g=0,m=0,k=false,b=false,n=false,p=navigator.userAgent||navigator.vendor||window.opera,f,i=0,e="";DataBoardReplyTransmitter._targetClient=h;g=(screen.width-c)/2;m=(screen.height-o)/2;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(p)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(p.substr(0,4))){k=true}if(p.match(/iPad/i)||p.match(/iPhone/i)||p.match(/iPod/i)){b=true;if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(p)||/(iPhone|iPod|iPad).*(Line|KAKAO|Naver|Daum)/i.test(p)){n=true}}if(l=="NAVER"){var a="http://api.5moments.co.kr/socialOauthNV.wwz?id="+h.id+"&uuid="+h.uuid+"&type="+j;if(k){if(b){a="/oauth?q=nv&id="+h.id+"&type="+j;if(n){$.cookie("redirectUrl",window.location.href);location.href=a}else{f=window.open(a,"_blank");i=setInterval(function(){if(f&&f.closed){clearInterval(i);e=$.cookie("loginStr");$.cookie("loginStr","");window.postMessage(e,"*")}},500)}}else{window.open(a,"_blank")}}else{window.open(a,"naverlogin","scrollbars=no,toolbar=no,resizable=no,width="+c+",height="+o+",top="+m+",left="+g)}}else{if(l=="FACEBOOK"){if(k){var a="http://api.5moments.co.kr/socialOauthFBV2.wwz?id="+h.id+"&uuid="+h.uuid+"&type="+j;if(b){a="/oauth?q=fb&id="+h.id+"&type="+j;if(n){$.cookie("redirectUrl",window.location.href);location.href=a}else{f=window.open(a,"_blank");i=setInterval(function(){if(f&&f.closed){clearInterval(i);e=$.cookie("loginStr");$.cookie("loginStr","");window.postMessage(e,"*")}},500)}}else{window.open(a,"_blank")}}else{$("#socialIframeFB"+d)[0].contentWindow.postMessage("facebookLogin","http://api.5moments.co.kr")}}else{if(l=="GOOGLE"){if(k){var a="http://api.5moments.co.kr/socialOauthGGV2.wwz?id="+h.id+"&uuid="+h.uuid+"&type="+j;if(b){a="/oauth?q=gg&id="+h.id+"&type="+j;if(n){$.cookie("redirectUrl",window.location.href);location.href=a}else{f=window.open(a,"_blank");i=setInterval(function(){if(f&&f.closed){clearInterval(i);e=$.cookie("loginStr");$.cookie("loginStr","");window.postMessage(e,"*")}},500)}}else{window.open(a,"_blank")}}else{$("#socialIframeGG"+d)[0].contentWindow.postMessage("googleLogin","http://api.5moments.co.kr")}}else{if(l=="TWITTER"){var a="http://api.5moments.co.kr/socialOauthTT.wwz?id="+h.id+"&uuid="+h.uuid+"&type="+j;if(k){if(b){a="/oauth?q=tt&id="+h.id+"&type="+j;if(n){$.cookie("redirectUrl",window.location.href);location.href=a}else{f=window.open(a,"_blank");i=setInterval(function(){if(f&&f.closed){clearInterval(i);e=$.cookie("loginStr");$.cookie("loginStr","");window.postMessage(e,"*")}},500)}}else{window.open(a,"_blank")}}else{window.open(a,"twitterlogin","scrollbars=no,toolbar=no,resizable=no,width="+c+",height="+o+",top="+m+",left="+g)}}else{if(l=="KAKAO"){if(k){var a="http://api.5moments.co.kr/socialOauthKKV2.wwz?id="+h.id+"&uuid="+h.uuid+"&type="+j;if(b){a="/oauth?q=kk&id="+h.id+"&type="+j;if(n){$.cookie("redirectUrl",window.location.href);location.href=a}else{f=window.open(a,"_blank");i=setInterval(function(){if(f&&f.closed){clearInterval(i);e=$.cookie("loginStr");$.cookie("loginStr","");window.postMessage(e,"*")}},500)}}else{window.open(a,"_blank")}}else{$("#socialIframeKK"+d)[0].contentWindow.postMessage("kakaoLogin","http://api.5moments.co.kr")}}else{alert("지원하지 않는 로그인 방식입니다")}}}}}},logout:function(){$.cookie("token",null,{expires:1,path:"/",secure:false})}});$.Class("DataInputFormTransmitter").body({staticVal:{_singleton:null,_targetClient:null,getInstance:function(){if(DataInputFormTransmitter._singleton==null){DataInputFormTransmitter._singleton=new DataInputFormTransmitter()}return DataInputFormTransmitter._singleton}},DataInputFormTransmitter:function(){},setTargetClient:function(a){DataInputFormTransmitter._targetClient=a},isRun:false,validation:function(d){var c=this,f=[],a=DataInputFormTransmitter._targetClient,b=a.elementId,e=true;$.each(d,function(l,r){var i={},n=r.type,g=[],h=r.id,o=r.title,p=r.need,m=r.error,k=r.errorClass,q="",j;if(n==="NAME"){q=$("#"+h).val();if(!c.checkIsNeed(p,q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(c.checkSpecialPattern(q)){j="특수문자는 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{if(q.length>=100){j="100자 이상 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}}else{if(n==="EMAIL"){g=h.split(",");q=$("#"+g[0]).val()+"@"+$("#"+g[1]).val();if(!c.checkIsNeed(p,$("#"+g[0]).val())||!c.checkIsNeed(p,$("#"+g[1]).val())){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkEmail(q)){j="이메일 형식이 아닙니다.";a.errorHandler(m,k,j);e=false}else{if(q.length>=200){j="200글자 이상 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}}else{if(n==="PHONE"){g=h.split(",");q=$("#"+g[0]).val()+"-"+$("#"+g[1]).val()+"-"+$("#"+g[2]).val();if(!c.checkIsNeed(p,$("#"+g[0]).val())||!c.checkIsNeed(p,$("#"+g[1]).val())||!c.checkIsNeed(p,$("#"+g[2]).val())){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkPhone(q)){j="전화번호 형식이 아닙니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="CURRENCY"){q=$("#"+h).val();if(!c.checkIsNeed(p,q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(!$.isNumeric(q)){j="숫자만 입력 가능합니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="RADIO"){q=$("."+h+":checked").val();if(!c.checkIsNeed(p,q)){j="항목 중 반드시 하나를 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkSelectable($("."+h+":checked"))){j="항목 중 반드시 하나를 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="CHECKBOX"){$("."+h+":checked").each(function(){q=q+$(this).val()+","});if(!c.checkIsNeed(p,q)){j="항목 중 반드시 1개 이상 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkSelectable($("."+h+":checked"))){j="최소 1개 이상 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="CALENDAR"){g=h.split(",");q=$("#"+g[0]).val()+"."+$("#"+g[1]).find("option:selected").val()+"."+$("#"+g[2]).find("option:selected").val()+" "+$("#"+g[3]).find("option:selected").val()+":"+$("#"+g[4]).find("option:selected").val();if(!c.checkIsNeed(p,$("#"+g[0]).val())||!c.checkIsNeed(p,$("#"+g[1]).val())||!c.checkIsNeed(p,$("#"+g[2]).val())){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}else{if(n==="TEXT"||n==="PARAGRAPH"){q=$("#"+h).val();if(!c.checkIsNeed(p,q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(q.length>=1000){j="1000 글자 이상 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="HORIZONTAL"){q=$("#"+h).val();if(!c.checkIsNeed("Y",q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}}}}}}}}i.title=o;i.type=n;i.value=q;f.push(i)});if(!e){f=null}return f},run:function(b,c,a,f,e){var d;if(!b||!$.isArray(b)||b.length<1){return}d=this.validation(b);if(!d||!$.isArray(d)||d.length<1){alert("입력한 내용을 다시 한 번 확인해주세요");return}this.submit(d,c,a,f,e)},submit:function(e,d,c,g,f){var b="http://api.5moments.co.kr/api/data/inputform/"+c+"/"+g+".json",a=this;if(a.isRun){return}a.isRun=true;$.support.cors=true;$.ajax({type:"POST",url:b,data:{q:JSON.stringify(e)},async:false,success:function(i){var h=i.result;a.isRun=false;if(!h){i=JSON.parse(i);h=i.result}if(h=="SUCCESS"){alert(d);f()}else{alert(i.message)}},error:function(j,h,i){a.isRun=false;if(window.console==undefined){console={log:function(){}}}console.log("Network error : "+i)}})},checkIsNeed:function(a,b){if(a==="Y"&&(!b||b.length<1||$.trim(b)=="")){return false}else{return true}},checkSelectable:function(a){if(!a||a.length<1){return false}else{return true}},checkSpecialPattern:function(a){var b=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;return b.test(a)},checkEmail:function(b){var a=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/gi;return a.test(b)},checkPhone:function(a){var b=/^[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}$/gi;return b.test(a)}});$.Class("DataBoardReplyTransmitter").body({staticVal:{_singleton:null,_loginUser:{},_targetClient:null,getInstance:function(){if(DataBoardReplyTransmitter._singleton==null){DataBoardReplyTransmitter._singleton=new DataBoardReplyTransmitter()}return DataBoardReplyTransmitter._singleton}},DataBoardReplyTransmitter:function(){var a=function(b){var d;if(b.data){try{d=JSON.parse(b.data)}catch(c){}if(d){if(d.userInfo){DataBoardReplyTransmitter._loginUser=d.userInfo;$.cookie("token",d.token,{expires:1,path:"/",secure:false});if(DataBoardReplyTransmitter._targetClient){DataBoardReplyTransmitter._targetClient.render()}}else{}}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},setTargetClient:function(a){DataBoardReplyTransmitter._targetClient=a},run:function(a,b,e,d){var c={};if(b=="DELETE"||b=="PUT"){c={_method:b.toLowerCase(),q:JSON.stringify(e)};b="POST"}else{c={q:JSON.stringify(e)}}$.support.cors=true;$.ajax({type:b,url:a,data:c,async:false,success:function(g){var f=g.result;if(!f){g=JSON.parse(g)}d(g)},error:function(h,f,g){if(window.console==undefined){console={log:function(){}}}console.log("Network error : "+g)}})},initLoginAndFetch:function(e,c,a,h,d,i){var f=$.cookie("token"),k=this,g=false,j=DataBoardReplyTransmitter._loginUser,b;if(!j||!j.isLogin){if(f&&f.length>0&&f!="null"){g=true}}if(g){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=f;callBack=function(l){if(l.result=="SUCCESS"){DataBoardReplyTransmitter._loginUser=l.userInfo;$.cookie("token",l.token,{expires:1,path:"/",secure:false})}k.fetch(e,c,a,h,d,i)};this.run(b,"POST",params,callBack)}else{k.fetch(e,c,a,h,d,i)}},fetch:function(f,c,a,h,d,i){var b,g,e;if(i){b="http://api.5moments.co.kr/api/data/boardreply/mobileall/"+a+"/"+c+".json"}else{b="http://api.5moments.co.kr/api/data/boardreply/all/"+a+"/"+c+".json"}g={};g.pageNum=h;g.pageRow=(d>50)?50:d;if(DataBoardReplyTransmitter._loginUser&&DataBoardReplyTransmitter._loginUser.isLogin){g.regId=DataBoardReplyTransmitter._loginUser.loginId;g.regEmail=DataBoardReplyTransmitter._loginUser.loginEmail;g.token=$.cookie("token")}e=function(j){if(j.result=="SUCCESS"){f.board=j.results;f.pageNum=j.pageNum}return};this.run(b,"POST",g,e)},initLoginUser:function(){var a=UserLoginTransmitter.getInstance();a.initLoginUser(this)},login:function(a,c){DataBoardReplyTransmitter._targetClient=a;var b=UserLoginTransmitter.getInstance();b.login(a,c,"BOARD_REPLY","BR")},logout:function(){DataBoardReplyTransmitter._loginUser={};var a=UserLoginTransmitter.getInstance();a.logout()},loginUser:function(){return DataBoardReplyTransmitter._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}k.hasPre=l>1;k.hasNext=c>l;k.currentPageNum=l;k.totalBlockCount=c;return k},save:function(c,h,e,d,g,a){var b="http://api.5moments.co.kr/api/data/boardreply/"+c+"/"+h+".json",f;if(!DataBoardReplyTransmitter._loginUser||!DataBoardReplyTransmitter._targetClient){return}f=e;f.pageNum=d;f.isMobile=a;f.pageRowCount=g;f.regName=DataBoardReplyTransmitter._loginUser.loginName;f.regId=DataBoardReplyTransmitter._loginUser.loginId;f.regEmail=DataBoardReplyTransmitter._loginUser.loginEmail;f.regProfileImgUrl=DataBoardReplyTransmitter._loginUser.loginProfileImg;f.regRefer=DataBoardReplyTransmitter._loginUser.loginRegRefer;f.token=$.cookie("token");callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardReplyTransmitter._targetClient.pageNum=parseInt(i.pageNum)}DataBoardReplyTransmitter._targetClient.render()}else{if(i.message&&i.message.length>0){alert(i.message);return}}};this.run(b,"POST",f,callBack)},remove:function(c,h,g,e,d,a){var b="http://api.5moments.co.kr/api/data/boardreply/"+c+"/"+h+"/"+g+".json",f;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardReplyTransmitter._targetClient.pageNum=i.pageNum}DataBoardReplyTransmitter._targetClient.render()}};f={};f.isLast=e||false;f.pageNum=d;f.isMobile=a;f.regId=DataBoardReplyTransmitter._loginUser.loginId;f.regEmail=DataBoardReplyTransmitter._loginUser.loginEmail;f.token=$.cookie("token");this.run(b,"DELETE",f,callBack)},modify:function(b,f,e,c){var a="http://api.5moments.co.kr/api/data/boardreply/"+b+"/"+f+"/"+e+".json",d;if(!DataBoardReplyTransmitter._loginUser||!DataBoardReplyTransmitter._targetClient){return}d=c;d.regName=DataBoardReplyTransmitter._loginUser.loginName;d.regId=DataBoardReplyTransmitter._loginUser.loginId;d.regEmail=DataBoardReplyTransmitter._loginUser.loginEmail;d.regProfileImgUrl=DataBoardReplyTransmitter._loginUser.loginProfileImg;d.regRefer=DataBoardReplyTransmitter._loginUser.loginRegRefer;d.token=$.cookie("token");callBack=function(g){if(g.result=="SUCCESS"){DataBoardReplyTransmitter._targetClient.render()}};this.run(a,"PUT",d,callBack)}});$.Class("DataBoardBasicTransmitter").body({staticVal:{_loginUser:{},_targetClient:null,getInstance:function(){if(DataBoardBasicTransmitter._singleton==null){DataBoardBasicTransmitter._singleton=new DataBoardBasicTransmitter()}return DataBoardBasicTransmitter._singleton}},DataBoardBasicTransmitter:function(){var a=function(b){var f,d;if(b.data){if(b.data==="BB_SUCC_SAVE"){d="list"}else{if(b.data==="BB_SUCC_MODIFY"){d="view"}else{try{f=JSON.parse(b.data)}catch(c){}if(f){if(f.userInfo){if(f.userInfo.isLogin){DataBoardBasicTransmitter._loginUser=f.userInfo;$.cookie("token",f.token,{expires:1,path:"/",secure:false});d=DataBoardBasicTransmitter._targetClient._currnetViewName}else{}}}}}if(DataBoardBasicTransmitter._targetClient&&d){DataBoardBasicTransmitter._targetClient.render(d)}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},uuid:null,setTargetClient:function(a){DataBoardBasicTransmitter._targetClient=a},run:function(a,b,e,d){var c={};if(b=="DELETE"||b=="PUT"){c={_method:b.toLowerCase(),q:JSON.stringify(e)};b="POST"}else{c={q:JSON.stringify(e)}}$.support.cors=true;$.ajax({type:b,url:a,data:c,async:false,success:function(g){var f=g.result;if(!f){g=JSON.parse(g)}d(g)},error:function(h,f,g){if(window.console==undefined){console={log:function(){}}}console.log("Network error : "+g)}})},initLoginAndFetch:function(e,c,a,i,d,h,j){var f=$.cookie("token"),b,l=this,g=false,k=DataBoardBasicTransmitter._loginUser;if(!k||!k.isLogin){if(f&&f.length>0&&f!="null"){g=true}}if(g){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=f;callBack=function(m){if(m.result=="SUCCESS"){DataBoardBasicTransmitter._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetch(e,c,a,i,d,h,j)};this.run(b,"POST",params,callBack)}else{l.fetch(e,c,a,i,d,h,j)}},fetch:function(f,c,a,i,d,h,j){var b,g,e;b="http://api.5moments.co.kr/api/data/boardbasic/all/"+a+"/"+c+".json";g={};g.searchVal=h;g.pageNum=i;g.pageRow=(d>50)?50:d;if(DataBoardBasicTransmitter._loginUser&&DataBoardBasicTransmitter._loginUser.isLogin){g.regId=DataBoardBasicTransmitter._loginUser.loginId;g.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;g.token=$.cookie("token")}e=function(k){if(k.result=="SUCCESS"){f.board=k.results;f.pageNum=k.pageNum}return};this.run(b,"POST",g,e)},initLoginAndFetchContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardBasicTransmitter._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=g;callBack=function(m){if(m.result=="SUCCESS"){DataBoardBasicTransmitter._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack)}else{l.fetchContent(f,d,c,a,i,e,j)}},fetchContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardbasic/content/"+a+"/"+d+"/"+b+".json";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardBasicTransmitter._loginUser&&DataBoardBasicTransmitter._loginUser.isLogin){h.regId=DataBoardBasicTransmitter._loginUser.loginId;h.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){g.selectedContent=k.content;g.selectedComments=k.comments;g.selectedIsEditable=k.isEditable;g.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){g.selectedCommentsCount=parseInt(k.content.totalCommentCount)}}else{if(k.message&&k.message.length>0){alert(k.message)}}return};this.run(c,"POST",h,f)},initLoginAndFetchBoardAndContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardBasicTransmitter._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=g;callBack=function(m){if(m.result=="SUCCESS"){DataBoardBasicTransmitter._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchBoardAndContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack)}else{l.fetchBoardAndContent(f,d,c,a,i,e,j)}},fetchBoardAndContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardbasic/boardandcontent/"+a+"/"+d+"/"+b+".json";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardBasicTransmitter._loginUser&&DataBoardBasicTransmitter._loginUser.isLogin){h.regId=DataBoardBasicTransmitter._loginUser.loginId;h.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){g.board=k.board;g.selectedContent=k.content;g.selectedComments=k.comments;g.selectedIsEditable=k.isEditable;g.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){g.selectedCommentsCount=parseInt(k.content.totalCommentCount)}}else{if(k.message&&k.message.length>0){alert(k.message)}}return};this.run(c,"POST",h,f)},fetchComment:function(g,d,c,a,k,i,e,j){var b,h,f;if(j){b="http://api.5moments.co.kr/api/data/boardbasic/comment/mobileall/"+a+"/"+d+"/"+c+".json"}else{b="http://api.5moments.co.kr/api/data/boardbasic/comment/all/"+a+"/"+d+"/"+c+".json"}h={};h.pageNum=i;h.pageRow=(e>50)?50:e;if(DataBoardBasicTransmitter._loginUser&&DataBoardBasicTransmitter._loginUser.isLogin){h.regId=DataBoardBasicTransmitter._loginUser.loginId;h.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;h.token=$.cookie("token")}f=function(l){if(l.result=="SUCCESS"){g.selectedComments=l.comments;g.pageNumComment=l.pageNum}else{if(l.message&&l.message.length>0){alert(l.message)}}return};this.run(b,"POST",h,f)},initLoginUser:function(){var a=UserLoginTransmitter.getInstance();a.initLoginUser(this)},login:function(a,c){DataBoardBasicTransmitter._targetClient=a;var b=UserLoginTransmitter.getInstance();b.login(a,c,"BOARD_BASIC","BB")},logout:function(){DataBoardBasicTransmitter._loginUser={};var a=UserLoginTransmitter.getInstance();a.logout()},loginUser:function(){return DataBoardBasicTransmitter._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(g,c,d){var f=g<1?1:g,b=c<1?15:c,a={},e;e=parseInt(d/b);if((d%b)>0){e=e+1}a.hasPre=f>1;a.hasNext=e>f;a.currentPageNum=f;a.totalBlockCount=e;return a},save:function(c,e,d,b){var a="#boardBasic_"+e+"_saveForm";if(!DataBoardBasicTransmitter._loginUser||!DataBoardBasicTransmitter._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+e+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardBasicTransmitter._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardBasicTransmitter._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardBasicTransmitter._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardBasicTransmitter._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardBasicTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardBasicTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'));if(d&&d.length>0){$(a).append($('<input type="hidden" name="parentId" value="'+d+'">'))}}$(a).attr("action","http://api.5moments.co.kr/api/data/boardbasic/add.wwz");$(a).submit()},saveComment:function(a,d,b,f,h,i,g){var c="http://api.5moments.co.kr/api/data/boardbasic/comment/"+a+"/"+d+"/"+b+".json",e;if(!DataBoardBasicTransmitter._loginUser||!DataBoardBasicTransmitter._targetClient){return}e=f;e.regName=DataBoardBasicTransmitter._loginUser.loginName;e.regId=DataBoardBasicTransmitter._loginUser.loginId;e.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;e.regProfileImgUrl=DataBoardBasicTransmitter._loginUser.loginProfileImg;e.regRefer=DataBoardBasicTransmitter._loginUser.loginRegRefer;e.token=$.cookie("token");e.pageNum=h;e.pageRowCount=i;e.isMobile=g;callBack=function(j){if(j.result=="SUCCESS"){if(j.pageNum){DataBoardBasicTransmitter._targetClient.pageNumComment=parseInt(j.pageNum)}DataBoardBasicTransmitter._targetClient.render("view")}};this.run(c,"POST",e,callBack)},remove:function(b,e,d){var a="http://api.5moments.co.kr/api/data/boardbasic/"+b+"/"+e+"/"+d+".json",c;callBack=function(f){if(f.result=="SUCCESS"){DataBoardBasicTransmitter._targetClient.render()}};c={};c.regId=DataBoardBasicTransmitter._loginUser.loginId;c.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;c.token=$.cookie("token");this.run(a,"DELETE",c,callBack)},removeComment:function(a,d,b,g,f,i,h){var c="http://api.5moments.co.kr/api/data/boardbasic/comment/"+a+"/"+d+"/"+b+"/"+g+".json",e;callBack=function(j){if(j.result=="SUCCESS"){if(j.pageNum){DataBoardBasicTransmitter._targetClient.pageNumComment=parseInt(j.pageNum)}DataBoardBasicTransmitter._targetClient.render("view")}};e={};e.regId=DataBoardBasicTransmitter._loginUser.loginId;e.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;e.token=$.cookie("token");e.isLast=f;e.pageNum=i;e.isMobile=h;this.run(c,"DELETE",e,callBack)},modify:function(c,e,d,b){var a="#boardBasic_"+e+"_saveForm";if(!DataBoardBasicTransmitter._loginUser||!DataBoardBasicTransmitter._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+e+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="id" value="'+d+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardBasicTransmitter._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardBasicTransmitter._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardBasicTransmitter._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardBasicTransmitter._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardBasicTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardBasicTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'))}$(a).attr("action","http://api.5moments.co.kr/api/data/boardbasic/modify.wwz");$(a).submit()},modifyComment:function(c,g,f,b,d){var a="http://api.5moments.co.kr/api/data/boardbasic/comment/"+c+"/"+g+"/"+f+"/"+b+".json",e;if(!DataBoardBasicTransmitter._loginUser||!DataBoardBasicTransmitter._targetClient){return}e=d;e.regName=DataBoardBasicTransmitter._loginUser.loginName;e.regId=DataBoardBasicTransmitter._loginUser.loginId;e.regEmail=DataBoardBasicTransmitter._loginUser.loginEmail;e.regProfileImgUrl=DataBoardBasicTransmitter._loginUser.loginProfileImg;e.regRefer=DataBoardBasicTransmitter._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){DataBoardBasicTransmitter._targetClient.pageMoveComment(DataBoardBasicTransmitter._targetClient.pageNumComment)}};this.run(a,"PUT",e,callBack)}});$.Class("DataBoardPremiumTransmitter").body({staticVal:{_loginUser:{},_targetClient:null,getInstance:function(){if(DataBoardPremiumTransmitter._singleton==null){DataBoardPremiumTransmitter._singleton=new DataBoardPremiumTransmitter()}return DataBoardPremiumTransmitter._singleton}},DataBoardPremiumTransmitter:function(){var a=function(b){var f,d="";if(b.data){if(b.data==="BP_SUCC_SAVE"){d="list"}else{if(b.data==="BP_SUCC_MODIFY"){d="view"}else{try{f=JSON.parse(b.data)}catch(c){}if(f){if(f.userInfo){if(f.userInfo.isLogin){DataBoardPremiumTransmitter._loginUser=f.userInfo;$.cookie("token",f.token,{expires:1,path:"/",secure:false});d=DataBoardPremiumTransmitter._targetClient._currnetViewName}else{}}}}}if(DataBoardPremiumTransmitter._targetClient&&d){DataBoardPremiumTransmitter._targetClient.render(d)}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},uuid:null,setTargetClient:function(a){DataBoardPremiumTransmitter._targetClient=a},run:function(a,b,e,d){var c={};if(b=="DELETE"||b=="PUT"){c={_method:b.toLowerCase(),q:JSON.stringify(e)};b="POST"}else{c={q:JSON.stringify(e)}}$.support.cors=true;$.ajax({type:b,url:a,data:c,async:false,success:function(g){var f=g.result;if(!f){g=JSON.parse(g)}d(g)},error:function(h,f,g){if(window.console==undefined){console={log:function(){}}}console.log("Network error : "+g)}})},initLoginAndFetch:function(e,c,a,i,d,h,j){var f=$.cookie("token"),b,l=this,g=false,k=DataBoardPremiumTransmitter._loginUser;if(!k||!k.isLogin){if(f&&f.length>0&&f!="null"){g=true}}if(g){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=f;callBack=function(m){if(m.result=="SUCCESS"){DataBoardPremiumTransmitter._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetch(e,c,a,i,d,h,j)};this.run(b,"POST",params,callBack)}else{l.fetch(e,c,a,i,d,h,j)}},fetch:function(f,c,a,i,d,h,j){var b,g,e;b="http://api.5moments.co.kr/api/data/boardpremium/all/"+a+"/"+c+".json";g={};g.searchVal=h;g.pageNum=i;g.pageRow=(d>50)?50:d;if(DataBoardPremiumTransmitter._loginUser&&DataBoardPremiumTransmitter._loginUser.isLogin){g.regId=DataBoardPremiumTransmitter._loginUser.loginId;g.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;g.token=$.cookie("token")}e=function(k){if(k.result=="SUCCESS"){f.board=k.results;f.pageNum=k.pageNum}return};this.run(b,"POST",g,e)},initLoginAndFetchContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardPremiumTransmitter._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=g;callBack=function(m){if(m.result=="SUCCESS"){DataBoardPremiumTransmitter._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack)}else{l.fetchContent(f,d,c,a,i,e,j)}},fetchContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardpremium/content/"+a+"/"+d+"/"+b+".json";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardPremiumTransmitter._loginUser&&DataBoardPremiumTransmitter._loginUser.isLogin){h.regId=DataBoardPremiumTransmitter._loginUser.loginId;h.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){g.selectedContent=k.content;g.selectedComments=k.comments;g.selectedAttachFiles=k.attachFiles;g.selectedAttachFilesSize=k.attachFilesSize;g.selectedAttachFilesFormatSize=k.attachFilesFormatSize;g.selectedAttachFilesCount=k.attachFilesCount;g.selectedIsEditable=k.isEditable;g.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){g.selectedCommentsCount=parseInt(k.content.totalCommentCount)}}else{if(k.message&&k.message.length>0){alert(k.message)}}return};this.run(c,"POST",h,f)},initLoginAndFetchBoardAndContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardPremiumTransmitter._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){b="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=g;callBack=function(m){if(m.result=="SUCCESS"){DataBoardPremiumTransmitter._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchBoardAndContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack)}else{l.fetchBoardAndContent(f,d,c,a,i,e,j)}},fetchBoardAndContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardpremium/boardandcontent/"+a+"/"+d+"/"+b+".json";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardPremiumTransmitter._loginUser&&DataBoardPremiumTransmitter._loginUser.isLogin){h.regId=DataBoardPremiumTransmitter._loginUser.loginId;h.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){g.board=k.board;g.selectedContent=k.content;g.selectedComments=k.comments;g.selectedAttachFiles=k.attachFiles;g.selectedAttachFilesSize=k.attachFilesSize;g.selectedAttachFilesFormatSize=k.attachFilesFormatSize;g.selectedAttachFilesCount=k.attachFilesCount;g.selectedIsEditable=k.isEditable;g.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){g.selectedCommentsCount=parseInt(k.content.totalCommentCount)}}else{if(k.message&&k.message.length>0){alert(k.message)}}return};this.run(c,"POST",h,f)},fetchComment:function(g,d,c,a,k,i,e,j){var b,h,f;if(j){b="http://api.5moments.co.kr/api/data/boardpremium/comment/mobileall/"+a+"/"+d+"/"+c+".json"}else{b="http://api.5moments.co.kr/api/data/boardpremium/comment/all/"+a+"/"+d+"/"+c+".json"}h={};h.pageNum=i;h.pageRow=(e>50)?50:e;if(DataBoardPremiumTransmitter._loginUser&&DataBoardPremiumTransmitter._loginUser.isLogin){h.regId=DataBoardPremiumTransmitter._loginUser.loginId;h.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;h.token=$.cookie("token")}f=function(l){if(l.result=="SUCCESS"){g.selectedComments=l.comments;g.pageNumComment=l.pageNum}else{if(l.message&&l.message.length>0){alert(l.message)}}return};this.run(b,"POST",h,f)},fetchKey:function(a,f,c){var b,e,d;if(!DataBoardPremiumTransmitter._loginUser||!DataBoardPremiumTransmitter._loginUser.isLogin){return}b="http://api.5moments.co.kr/api/data/boardpremium/contentkey/"+c+"/"+f+".json";e={};e.regId=DataBoardPremiumTransmitter._loginUser.loginId;e.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;e.token=$.cookie("token");d=function(g){if(g.result=="SUCCESS"){a.contentKey=g.key}else{if(g.message&&g.message.length>0){alert(g.message)}}return};this.run(b,"POST",e,d)},initLoginUser:function(){var a=UserLoginTransmitter.getInstance();a.initLoginUser(this)},login:function(a,c){DataBoardPremiumTransmitter._targetClient=a;var b=UserLoginTransmitter.getInstance();b.login(a,c,"BOARD_PREMIUM","BP")},logout:function(){DataBoardPremiumTransmitter._loginUser={};var a=UserLoginTransmitter.getInstance();a.logout()},loginUser:function(){return DataBoardPremiumTransmitter._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(g,c,d){var f=g<1?1:g,b=c<1?15:c,a={},e;e=parseInt(d/b);if((d%b)>0){e=e+1}a.hasPre=f>1;a.hasNext=e>f;a.currentPageNum=f;a.totalBlockCount=e;return a},save:function(c,f,e,d,b){var a="#boardPremium_"+f+"_saveForm";if(!DataBoardPremiumTransmitter._loginUser||!DataBoardPremiumTransmitter._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+f+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="contentKey" value="'+e+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardPremiumTransmitter._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardPremiumTransmitter._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardPremiumTransmitter._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardPremiumTransmitter._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardPremiumTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardPremiumTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'));if(d&&d.length>0){$(a).append($('<input type="hidden" name="parentId" value="'+d+'">'))}}if(b){$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/mobile/add.wwz")}else{$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/add.wwz")}$(a).submit()},saveComment:function(a,d,b,f,h,i,g){var c="http://api.5moments.co.kr/api/data/boardpremium/comment/"+a+"/"+d+"/"+b+".json",e;if(!DataBoardPremiumTransmitter._loginUser||!DataBoardPremiumTransmitter._targetClient){return}e=f;e.regName=DataBoardPremiumTransmitter._loginUser.loginName;e.regId=DataBoardPremiumTransmitter._loginUser.loginId;e.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;e.regProfileImgUrl=DataBoardPremiumTransmitter._loginUser.loginProfileImg;e.regRefer=DataBoardPremiumTransmitter._loginUser.loginRegRefer;e.token=$.cookie("token");e.pageNum=h;e.pageRowCount=i;e.isMobile=g;callBack=function(j){if(j.result=="SUCCESS"){if(j.pageNum){DataBoardPremiumTransmitter._targetClient.pageNumComment=parseInt(j.pageNum)}DataBoardPremiumTransmitter._targetClient.render("view")}};this.run(c,"POST",e,callBack)},remove:function(b,e,d){var a="http://api.5moments.co.kr/api/data/boardpremium/"+b+"/"+e+"/"+d+".json",c;callBack=function(f){if(f.result=="SUCCESS"){DataBoardPremiumTransmitter._targetClient.render()}};c={};c.regId=DataBoardPremiumTransmitter._loginUser.loginId;c.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;c.token=$.cookie("token");this.run(a,"DELETE",c,callBack)},removeComment:function(a,d,b,g,f,i,h){var c="http://api.5moments.co.kr/api/data/boardpremium/comment/"+a+"/"+d+"/"+b+"/"+g+".json",e;callBack=function(j){if(j.result=="SUCCESS"){if(j.pageNum){DataBoardPremiumTransmitter._targetClient.pageNumComment=parseInt(j.pageNum)}DataBoardPremiumTransmitter._targetClient.render("view")}};e={};e.regId=DataBoardPremiumTransmitter._loginUser.loginId;e.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;e.token=$.cookie("token");e.isLast=f;e.pageNum=i;e.isMobile=h;this.run(c,"DELETE",e,callBack)},modify:function(c,f,e,d,b){var a="#boardPremium_"+f+"_saveForm";if(!DataBoardPremiumTransmitter._loginUser||!DataBoardPremiumTransmitter._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+f+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="contentKey" value="'+d+'">'));$(a).append($('<input type="hidden" name="id" value="'+e+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardPremiumTransmitter._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardPremiumTransmitter._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardPremiumTransmitter._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardPremiumTransmitter._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardPremiumTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardPremiumTransmitter._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'))}if(b){$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/mobile/modify.wwz")}else{$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/modify.wwz")}$(a).submit()},modifyComment:function(c,g,f,b,d){var a="http://api.5moments.co.kr/api/data/boardpremium/comment/"+c+"/"+g+"/"+f+"/"+b+".json",e;if(!DataBoardPremiumTransmitter._loginUser||!DataBoardPremiumTransmitter._targetClient){return}e=d;e.regName=DataBoardPremiumTransmitter._loginUser.loginName;e.regId=DataBoardPremiumTransmitter._loginUser.loginId;e.regEmail=DataBoardPremiumTransmitter._loginUser.loginEmail;e.regProfileImgUrl=DataBoardPremiumTransmitter._loginUser.loginProfileImg;e.regRefer=DataBoardPremiumTransmitter._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){DataBoardPremiumTransmitter._targetClient.pageMoveComment(DataBoardPremiumTransmitter._targetClient.pageNumComment)}};this.run(a,"PUT",e,callBack)}});$.Class("DataBoardBlogTransmitter").body({staticVal:{_loginUser:{},_targetClient:null,getInstance:function(){if(DataBoardBlogTransmitter._singleton==null){DataBoardBlogTransmitter._singleton=new DataBoardBlogTransmitter()}return DataBoardBlogTransmitter._singleton}},DataBoardBlogTransmitter:function(){var a=function(b){var f,d="";if(b.data){try{f=JSON.parse(b.data)}catch(c){}if(f){if(f.userInfo){if(f.userInfo.isLogin){DataBoardBlogTransmitter._loginUser=f.userInfo;$.cookie("token",f.token,{expires:1,path:"/",secure:false});d=DataBoardBlogTransmitter._targetClient._currnetViewName}else{}}}if(DataBoardBlogTransmitter._targetClient&&d){DataBoardBlogTransmitter._targetClient.render(d)}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},uuid:null,setTargetClient:function(a){DataBoardBlogTransmitter._targetClient=a},run:function(a,b,e,d){var c={};if(b=="DELETE"||b=="PUT"){c={_method:b.toLowerCase(),q:JSON.stringify(e)};b="POST"}else{c={q:JSON.stringify(e)}}$.support.cors=true;$.ajax({type:b,url:a,data:c,async:false,success:function(g){var f=g.result;if(!f){g=JSON.parse(g)}d(g)},error:function(h,f,g){if(window.console==undefined){console={log:function(){}}}console.log("Network error : "+g)}})},initLoginAndFetchContent:function(d,b){var g=$.cookie("token"),f,e=this,a=false,c=DataBoardBlogTransmitter._loginUser;if(!c||!c.isLogin){if(g&&g.length>0&&g!="null"){a=true}}if(a){f="http://api.5moments.co.kr/api/data/socialoauth/keep.json";params={};params.token=g;callBack=function(h){if(h.result=="SUCCESS"){DataBoardBlogTransmitter._loginUser=h.userInfo;$.cookie("token",h.token,{expires:1,path:"/",secure:false})}e.fetchContent(d,b)};this.run(f,"POST",params,callBack)}else{e.fetchContent(d,b)}},fetchContent:function(f,i){var c,g,e,a,d,h,b;a=f.uuid;d=f.boardId;h=f.selectedCategoryId||"main";b=f.selectedContentId;c="http://api.5moments.co.kr/api/data/boardblog/content/"+a+"/"+d+"/"+h+".json";g={};g.pageNum=f.pageNum;g.pageNumList=f.pageNumList;g.isMobile=i||false;g.contentId=b;if(DataBoardBlogTransmitter._loginUser&&DataBoardBlogTransmitter._loginUser.isLogin){g.regId=DataBoardBlogTransmitter._loginUser.loginId;g.regEmail=DataBoardBlogTransmitter._loginUser.loginEmail;g.token=$.cookie("token")}e=function(j){if(j.result=="SUCCESS"){f.board=j.board;f.selectedContent=j.content;f.selectedCategory=j.selectedCategory;f.selectedLists=j.lists;f.selectedComments=j.comments;f.selectedCategoryId=j.selectedCategory.id;if(j.content){f.selectedContentId=j.content.id}f.categorys=j.categorys;f.selectedAttachFiles=j.attachFiles;f.selectedAttachFilesSize=j.attachFilesSize;f.selectedAttachFilesFormatSize=j.attachFilesFormatSize;f.selectedAttachFilesCount=j.attachFilesCount;f.pageNum=j.pageNum;f.pageNumList=j.pageNumList;f.pageNumComment=j.pageNumComment;f.selectedCount=parseInt(j.selectedCategoryCount);f.selectedListCount=parseInt(j.selectedCategoryCount);f.selectedCommentsCount=parseInt(j.commentsCount);if(j.content&&j.content.totalCommentCount){f.selectedCommentsCount=parseInt(j.content.totalCommentCount)}}else{if(j.message&&j.message.length>0){alert(j.message)}}return};this.run(c,"POST",g,e)},fetchList:function(b,a){var c,g,f,d,h,e;d=b.uuid;h=b.boardId;e=b.selectedCategoryId||"main";c="http://api.5moments.co.kr/api/data/boardblog/list/all/"+d+"/"+h+"/"+e+".json";g={};g.pageNumList=pageNumList;if(DataBoardBlogTransmitter._loginUser&&DataBoardBlogTransmitter._loginUser.isLogin){g.regId=DataBoardBlogTransmitter._loginUser.loginId;g.regEmail=DataBoardBlogTransmitter._loginUser.loginEmail;g.token=$.cookie("token")}f=function(i){if(i.result=="SUCCESS"){b.selectedLists=i.lists;b.pageNumList=i.pageNumList}else{if(i.message&&i.message.length>0){alert(i.message)}}return};this.run(c,"POST",g,f)},fetchComment:function(b,a){var c,f,e,d,h,g;d=b.uuid;h=b.boardId;g=b.selectedContentId;if(a){c="http://api.5moments.co.kr/api/data/boardblog/comment/mobileall/"+d+"/"+h+"/"+g+".json"}else{c="http://api.5moments.co.kr/api/data/boardblog/comment/all/"+d+"/"+h+"/"+g+".json"}f={};f.pageNum=b.pageNum;f.pageNumComment=b.pageNumComment;f.pageRow=(b.pageRowComment>50)?50:b.pageRowComment;if(DataBoardBlogTransmitter._loginUser&&DataBoardBlogTransmitter._loginUser.isLogin){f.regId=DataBoardBlogTransmitter._loginUser.loginId;f.regEmail=DataBoardBlogTransmitter._loginUser.loginEmail;f.token=$.cookie("token")}e=function(i){if(i.result=="SUCCESS"){b.selectedComments=i.comments;b.pageNumComment=i.pageNumComment}else{if(i.message&&i.message.length>0){alert(i.message)}}return};this.run(c,"POST",f,e)},initLoginUser:function(){var a=UserLoginTransmitter.getInstance();a.initLoginUser(this)},login:function(a,c){DataBoardBlogTransmitter._targetClient=a;var b=UserLoginTransmitter.getInstance();b.login(a,c,"BOARD_BLOG","BL")},logout:function(){DataBoardBlogTransmitter._loginUser={};var a=UserLoginTransmitter.getInstance();a.logout()},loginUser:function(){return DataBoardBlogTransmitter._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(g,c,d){var f=g<1?1:g,b=c<1?15:c,a={},e;e=parseInt(d/b);if((d%b)>0){e=e+1}a.hasPre=f>1;a.hasNext=e>f;a.currentPageNum=f;a.totalBlockCount=e;return a},saveComment:function(a,d,b,f,h,i,g){var c="http://api.5moments.co.kr/api/data/boardblog/comment/"+a+"/"+d+"/"+b+".json",e;if(!DataBoardBlogTransmitter._loginUser||!DataBoardBlogTransmitter._targetClient){return}e=f;e.regName=DataBoardBlogTransmitter._loginUser.loginName;e.regId=DataBoardBlogTransmitter._loginUser.loginId;e.regEmail=DataBoardBlogTransmitter._loginUser.loginEmail;e.regProfileImgUrl=DataBoardBlogTransmitter._loginUser.loginProfileImg;e.regRefer=DataBoardBlogTransmitter._loginUser.loginRegRefer;e.token=$.cookie("token");e.pageNum=h;e.pageRowCount=i;e.isMobile=g;callBack=function(j){if(j.result=="SUCCESS"){if(j.pageNum){DataBoardBlogTransmitter._targetClient.pageNumComment=parseInt(j.pageNum)}DataBoardBlogTransmitter._targetClient.render("view")}};this.run(c,"POST",e,callBack)},removeComment:function(a,d,b,g,f,i,h){var c="http://api.5moments.co.kr/api/data/boardblog/comment/"+a+"/"+d+"/"+b+"/"+g+".json",e;callBack=function(j){if(j.result=="SUCCESS"){if(j.pageNum){DataBoardBlogTransmitter._targetClient.pageNumComment=parseInt(j.pageNum)}DataBoardBlogTransmitter._targetClient.render("view")}};e={};e.regId=DataBoardBlogTransmitter._loginUser.loginId;e.regEmail=DataBoardBlogTransmitter._loginUser.loginEmail;e.token=$.cookie("token");e.isLast=f;e.pageNum=i;e.isMobile=h;this.run(c,"DELETE",e,callBack)},modifyComment:function(c,g,f,b,d){var a="http://api.5moments.co.kr/api/data/boardblog/comment/"+c+"/"+g+"/"+f+"/"+b+".json",e;if(!DataBoardBlogTransmitter._loginUser||!DataBoardBlogTransmitter._targetClient){return}e=d;e.regName=DataBoardBlogTransmitter._loginUser.loginName;e.regId=DataBoardBlogTransmitter._loginUser.loginId;e.regEmail=DataBoardBlogTransmitter._loginUser.loginEmail;e.regProfileImgUrl=DataBoardBlogTransmitter._loginUser.loginProfileImg;e.regRefer=DataBoardBlogTransmitter._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){DataBoardBlogTransmitter._targetClient.pageMoveComment(DataBoardBlogTransmitter._targetClient.pageNumComment)}};this.run(a,"PUT",e,callBack)}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("UserLoginTransmitterForIe").body({staticVal:{_singleton:null,_targetClient:null,getInstance:function(){if(UserLoginTransmitterForIe._singleton==null){UserLoginTransmitterForIe._singleton=new UserLoginTransmitterForIe()}return UserLoginTransmitterForIe._singleton}},UserLoginTransmitterForIe:function(){},initLoginUser:function(a){var e=$.cookie("token"),d,c=a._loginUser,b=a._targetClient;if(c&&c.isLogin){return}if(e&&e.length>0&&b){d="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=e;params.item="BR";callBack=function(f){if(f.result=="SUCCESS"){a._loginUser=f.userInfo;$.cookie("token",f.token,{expires:1,path:"/",secure:false});if(b){b.render()}}return};this.run(d,"POST",params,callBack,b.uuid,b.id)}},login:function(b,d,h,g){var c=400,a=100,f=0,e=0;if(d=="NAVER"){$("#socialIframeNV"+g)[0].contentWindow.postMessage("naverLoginForIe","http://api.5moments.co.kr")}else{if(d=="FACEBOOK"){$("#socialIframeFB"+g)[0].contentWindow.postMessage("facebookLoginForIe","http://api.5moments.co.kr")}else{if(d=="GOOGLE"){$("#socialIframeGG"+g)[0].contentWindow.postMessage("googleLoginForIe","http://api.5moments.co.kr")}else{if(d=="TWITTER"){$("#socialIframeTT"+g)[0].contentWindow.postMessage("twitterLoginForIe","http://api.5moments.co.kr")}else{if(d=="KAKAO"){$("#socialIframeKK"+g)[0].contentWindow.postMessage("kakaoLoginForIe","http://api.5moments.co.kr")}else{}}}}}},logout:function(){$.cookie("token",null,{expires:1,path:"/",secure:false})}});$.Class("DataInputFormTransmitterForIe").body({staticVal:{_singleton:null,_targetClient:null,getInstance:function(){if(DataInputFormTransmitterForIe._singleton==null){DataInputFormTransmitterForIe._singleton=new DataInputFormTransmitterForIe()}return DataInputFormTransmitterForIe._singleton}},DataInputFormTransmitterForIe:function(){var a=function(b){if(b.data==="CT_SUCC_SAVE"){DataInputFormTransmitterForIe._callBack()}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},setTargetClient:function(a){DataInputFormTransmitterForIe._targetClient=a},isRun:false,validation:function(d){var c=this,f=[],a=DataInputFormTransmitterForIe._targetClient,b=a.elementId,e=true;$.each(d,function(l,r){var i={},n=r.type,g=[],h=r.id,o=r.title,p=r.need,m=r.error,k=r.errorClass,q="",j;if(n==="NAME"){q=$("#"+h).val();if(!c.checkIsNeed(p,q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(c.checkSpecialPattern(q)){j="특수문자는 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{if(q.length>=100){j="100자 이상 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}}else{if(n==="EMAIL"){g=h.split(",");q=$("#"+g[0]).val()+"@"+$("#"+g[1]).val();if(!c.checkIsNeed(p,$("#"+g[0]).val())||!c.checkIsNeed(p,$("#"+g[1]).val())){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkEmail(q)){j="이메일 형식이 아닙니다.";a.errorHandler(m,k,j);e=false}else{if(q.length>=200){j="200글자 이상 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}}else{if(n==="PHONE"){g=h.split(",");q=$("#"+g[0]).val()+"-"+$("#"+g[1]).val()+"-"+$("#"+g[2]).val();if(!c.checkIsNeed(p,$("#"+g[0]).val())||!c.checkIsNeed(p,$("#"+g[1]).val())||!c.checkIsNeed(p,$("#"+g[2]).val())){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkPhone(q)){j="전화번호 형식이 아닙니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="CURRENCY"){q=$("#"+h).val();if(!c.checkIsNeed(p,q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(!$.isNumeric(q)){j="숫자만 입력 가능합니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="RADIO"){q=$("."+h+":checked").val();if(!c.checkIsNeed(p,q)){j="항목 중 반드시 하나를 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkSelectable($("."+h+":checked"))){j="항목 중 반드시 하나를 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="CHECKBOX"){$("."+h+":checked").each(function(){q=q+$(this).val()+","});if(!c.checkIsNeed(p,q)){j="항목 중 반드시 1개 이상 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{if(!c.checkSelectable($("."+h+":checked"))){j="최소 1개 이상 선택해야 합니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="CALENDAR"){g=h.split(",");q=$("#"+g[0]).val()+"."+$("#"+g[1]).find("option:selected").val()+"."+$("#"+g[2]).find("option:selected").val()+" "+$("#"+g[3]).find("option:selected").val()+":"+$("#"+g[4]).find("option:selected").val();if(!c.checkIsNeed(p,$("#"+g[0]).val())||!c.checkIsNeed(p,$("#"+g[1]).val())||!c.checkIsNeed(p,$("#"+g[2]).val())){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}else{if(n==="TEXT"||n==="PARAGRAPH"){q=$("#"+h).val();if(!c.checkIsNeed(p,q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{if(q.length>=1000){j="1000 글자 이상 입력할 수 없습니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}else{if(n==="HORIZONTAL"){q=$("#"+h).val();if(!c.checkIsNeed("Y",q)){j=o+"은(는) 필수 항목입니다.";a.errorHandler(m,k,j);e=false}else{a.clearErrorHandler(m,k)}}}}}}}}}}i.title=o;i.type=n;i.value=q;f.push(i)});if(!e){f=null}return f},checkIsNeed:function(a,b){if(a==="Y"&&(!b||b.length<1||$.trim(b)=="")){return false}else{return true}},checkSelectable:function(a){if(!a||a.length<1){return false}else{return true}},checkSpecialPattern:function(a){var b=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;return b.test(a)},checkEmail:function(b){var a=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/gi;return a.test(b)},checkPhone:function(a){var b=/^[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}$/gi;return b.test(a)},run:function(b,c,a,f,e){var d;if(!b||!$.isArray(b)||b.length<1){return}d=this.validation(b);if(!d||!$.isArray(d)||d.length<1){alert("입력한 내용을 다시 한 번 확인해주세요");return}this.submit(d,c,a,f,e)},submit:function(e,d,b,g,f){var a,c;DataInputFormTransmitterForIe._callBack=f;if($("#asyncForInputFormIeIframe")&&$("#asyncForInputFormIeIframe").length>0){c=$("#asyncForInputFormIeIframe")}else{c=$("<iframe></iframe>");c.attr("id","asyncForInputFormIeIframe");c.attr("name","asyncForInputFormIeIframe");c.hide();c.appendTo("body")}if($("#transmitterInputFormFormForIe")&&$("#transmitterInputFormFormForIe").length>0){a=$("#transmitterInputFormFormForIe")}else{a=$("<form></form>");a.attr("method","POST");a.attr("id","transmitterInputFormFormForIe");a.attr("target","asyncForInputFormIeIframe");a.appendTo("body")}a.attr("action","http://api.5moments.co.kr/api/data/inputform/add.wwz");a.empty();a.append("<input type='hidden' value='"+JSON.stringify(e)+"' name='q'>");a.append("<input type='hidden' value='"+b+"' name='uuid'>");a.append("<input type='hidden' value='"+g+"' name='id'>");a.submit()}});$.Class("DataBoardReplyTransmitterForIe").body({staticVal:{_singleton:null,_loginUser:{},_targetClient:null,_callBack:null,getInstance:function(){if(DataBoardReplyTransmitterForIe._singleton==null){DataBoardReplyTransmitterForIe._singleton=new DataBoardReplyTransmitterForIe()}return DataBoardReplyTransmitterForIe._singleton}},DataBoardReplyTransmitterForIe:function(){var a=function(b){var d;if(b.data){try{d=JSON.parse(b.data)}catch(c){}if(d){if(d.userInfo){DataBoardReplyTransmitterForIe._loginUser=d.userInfo;$.cookie("token",d.token,{expires:1,path:"/",secure:false});if(DataBoardReplyTransmitterForIe._targetClient){DataBoardReplyTransmitterForIe._targetClient.render()}}else{if(d.data){if(d.data.item=="BR"){DataBoardReplyTransmitterForIe._callBack(d.data)}}}}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},setTargetClient:function(a){DataBoardReplyTransmitterForIe._targetClient=a},run:function(c,g,f,e,a,d,b){var i,h;DataBoardReplyTransmitterForIe._callBack=e;if($("#asyncForBoardReplyIeIframe")&&$("#asyncForBoardReplyIeIframe").length>0){h=$("#asyncForBoardReplyIeIframe")}else{h=$("<iframe></iframe>");h.attr("id","asyncForBoardReplyIeIframe");h.attr("name","asyncForBoardReplyIeIframe");h.hide();h.appendTo("body")}if($("#transmitterBoardReplyFormForIe")&&$("#transmitterBoardReplyFormForIe").length>0){i=$("#transmitterBoardReplyFormForIe")}else{i=$("<form></form>");i.attr("method","POST");i.attr("id","transmitterBoardReplyFormForIe");i.attr("target","asyncForBoardReplyIeIframe");i.appendTo("body")}i.attr("action",c);i.empty();i.append("<input type='hidden' value='"+JSON.stringify(f)+"' name='q'>");i.append("<input type='hidden' value='"+a+"' name='uuid'>");i.append("<input type='hidden' value='"+d+"' name='boardId'>");i.append("<input type='hidden' value='"+b+"' name='contentId'>");i.submit()},fetch:function(f,c,a,h,d,i){var b,g,e;DataBoardReplyTransmitterForIe._targetClient=f;if(i){b="http://api.5moments.co.kr/api/data/boardreply/mobileall/fetch.wwz"}else{b="http://api.5moments.co.kr/api/data/boardreply/all/fetch.wwz"}g={};g.pageNum=h;g.pageRow=(d>50)?50:d;if(DataBoardReplyTransmitterForIe._loginUser&&DataBoardReplyTransmitterForIe._loginUser.isLogin){g.regId=DataBoardReplyTransmitterForIe._loginUser.loginId;g.regEmail=DataBoardReplyTransmitterForIe._loginUser.loginEmail;g.token=$.cookie("token")}e=function(j){if(j.result=="SUCCESS"){DataBoardReplyTransmitterForIe._targetClient.board=j.results;DataBoardReplyTransmitterForIe._targetClient.pageNum=j.pageNum;DataBoardReplyTransmitterForIe._targetClient.renderAfterFetch()}return};this.run(b,"POST",g,e,a,c)},initLoginAndFetch:function(e,c,a,h,d,i){var f=$.cookie("token"),b,k=this,g=false,j=DataBoardReplyTransmitterForIe._loginUser;if(!j||!j.isLogin){if(f&&f.length>0&&f!="null"){g=true}}if(g){DataBoardReplyTransmitterForIe._targetClient=e;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=f;params.item="BR";callBack=function(l){if(l.result=="SUCCESS"){DataBoardReplyTransmitterForIe._loginUser=l.userInfo;$.cookie("token",l.token,{expires:1,path:"/",secure:false})}k.fetch(e,c,a,h,d,i)};this.run(b,"POST",params,callBack,a,c)}else{k.fetch(e,c,a,h,d,i)}},initLoginUser:function(){var a=UserLoginTransmitterForIe.getInstance();a.initLoginUser(this)},login:function(a,b){DataBoardReplyTransmitterForIe._targetClient=a;var c=UserLoginTransmitterForIe.getInstance();c.login(a,b,"BOARD_REPLY","BR")},logout:function(){DataBoardReplyTransmitterForIe._loginUser={};var a=UserLoginTransmitterForIe.getInstance();a.logout()},loginUser:function(){return DataBoardReplyTransmitterForIe._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}k.hasPre=l>1;k.hasNext=c>l;k.currentPageNum=l;k.totalBlockCount=c;return k},save:function(b,g,d,c,f){var a="http://api.5moments.co.kr/api/data/boardreply/save.wwz",e;if(!DataBoardReplyTransmitterForIe._loginUser||!DataBoardReplyTransmitterForIe._targetClient){return}e=d;e.pageNum=c;e.pageRowCount=f;e.regName=DataBoardReplyTransmitterForIe._loginUser.loginName;e.regId=DataBoardReplyTransmitterForIe._loginUser.loginId;e.regEmail=DataBoardReplyTransmitterForIe._loginUser.loginEmail;e.regProfileImgUrl=DataBoardReplyTransmitterForIe._loginUser.loginProfileImg;e.regRefer=DataBoardReplyTransmitterForIe._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){if(h.pageNum){DataBoardReplyTransmitterForIe._targetClient.pageNum=parseInt(h.pageNum)}DataBoardReplyTransmitterForIe._targetClient.render()}else{if(h.message&&h.message.length>0){alert(h.message);return}}};this.run(a,"POST",e,callBack,b,g)},remove:function(b,g,f,d,c){var a="http://api.5moments.co.kr/api/data/boardreply/remove.wwz",e;callBack=function(h){if(h.result=="SUCCESS"){if(h.pageNum){DataBoardReplyTransmitterForIe._targetClient.pageNum=h.pageNum}DataBoardReplyTransmitterForIe._targetClient.render()}};e={};e.isLast=d||false;e.pageNum=c;e.regId=DataBoardReplyTransmitterForIe._loginUser.loginId;e.regEmail=DataBoardReplyTransmitterForIe._loginUser.loginEmail;e.token=$.cookie("token");this.run(a,"DELETE",e,callBack,b,g,f)},modify:function(b,f,e,c){var a="http://api.5moments.co.kr/api/data/boardreply/modify.wwz",d;if(!DataBoardReplyTransmitterForIe._loginUser||!DataBoardReplyTransmitterForIe._targetClient){return}d=c;d.regName=DataBoardReplyTransmitterForIe._loginUser.loginName;d.regId=DataBoardReplyTransmitterForIe._loginUser.loginId;d.regEmail=DataBoardReplyTransmitterForIe._loginUser.loginEmail;d.regProfileImgUrl=DataBoardReplyTransmitterForIe._loginUser.loginProfileImg;d.regRefer=DataBoardReplyTransmitterForIe._loginUser.loginRegRefer;d.token=$.cookie("token");callBack=function(g){if(g.result=="SUCCESS"){DataBoardReplyTransmitterForIe._targetClient.render()}};this.run(a,"PUT",d,callBack,b,f,e)}});$.Class("DataBoardBasicTransmitterForIe").body({staticVal:{_loginUser:{},_targetClient:null,_callBack:null,getInstance:function(){if(DataBoardBasicTransmitterForIe._singleton==null){DataBoardBasicTransmitterForIe._singleton=new DataBoardBasicTransmitterForIe()}return DataBoardBasicTransmitterForIe._singleton}},DataBoardBasicTransmitterForIe:function(){var a=function(b){var d;if(b.data){if(b.data==="BB_SUCC_SAVE"){DataBoardBasicTransmitterForIe._targetClient.render("list")}else{if(b.data==="BB_SUCC_MODIFY"){DataBoardBasicTransmitterForIe._targetClient.render("view")}else{if(b.data==="BB_SUCC_IE_SAVE_COMMENT"){DataBoardBasicTransmitterForIe._targetClient.render("view")}else{if(b.data==="BB_SUCC_IE_MODIFY_COMMENT"){DataBoardBasicTransmitterForIe._targetClient.render("view")}else{if(b.data==="BB_SUCC_IE_REMOVE_COMMENT"){DataBoardBasicTransmitterForIe._targetClient.render("view")}else{try{d=JSON.parse(b.data)}catch(c){}if(d){if(d.userInfo){DataBoardBasicTransmitterForIe._loginUser=d.userInfo;$.cookie("token",d.token,{expires:1,path:"/",secure:false});if(DataBoardBasicTransmitterForIe._targetClient){DataBoardBasicTransmitterForIe._targetClient.render(DataBoardBasicTransmitterForIe._targetClient._currnetViewName)}}else{if(d.data){if(d.data.item=="BB"){DataBoardBasicTransmitterForIe._callBack(d.data)}}}}}}}}}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},uuid:null,setTargetClient:function(a){DataBoardBasicTransmitterForIe._targetClient=a},run:function(c,h,f,e,a,d,b,g){var j,i;DataBoardBasicTransmitterForIe._callBack=e;if($("#asyncBoardBasicForIeIframe")&&$("#asyncBoardBasicForIeIframe").length>0){i=$("#asyncBoardBasicForIeIframe")}else{i=$("<iframe></iframe>");i.attr("id","asyncBoardBasicForIeIframe");i.attr("name","asyncBoardBasicForIeIframe");i.hide();i.appendTo("body")}if($("#transmitterBoardBasicFormForIe")&&$("#transmitterBoardBasicFormForIe").length>0){j=$("#transmitterBoardBasicFormForIe")}else{j=$("<form></form>");j.attr("method","POST");j.attr("id","transmitterBoardBasicFormForIe");j.attr("target","asyncBoardBasicForIeIframe");j.appendTo("body")}j.attr("action",c);j.empty();j.append("<input type='hidden' value='"+JSON.stringify(f)+"' name='q'>");j.append("<input type='hidden' value='"+a+"' name='uuid'>");j.append("<input type='hidden' value='"+d+"' name='boardId'>");j.append("<input type='hidden' value='"+b+"' name='contentId'>");j.append("<input type='hidden' value='"+g+"' name='commentId'>");j.submit()},initLoginAndFetch:function(e,c,a,i,d,h,j){var f=$.cookie("token"),b,l=this,g=false,k=DataBoardBasicTransmitterForIe._loginUser;if(!k||!k.isLogin){if(f&&f.length>0&&f!="null"){g=true}}if(g){DataBoardBasicTransmitterForIe._targetClient=e;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=f;params.item="BB";callBack=function(m){if(m.result=="SUCCESS"){DataBoardBasicTransmitterForIe._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetch(e,c,a,i,d,h,j)};this.run(b,"POST",params,callBack,a,c)}else{l.fetch(e,c,a,i,d,h,j)}},fetch:function(f,c,a,i,d,h,j){var b,g,e;b="http://api.5moments.co.kr/api/data/boardbasic/all/fetch.wwz";g={};g.searchVal=h;g.pageNum=i;g.pageRow=(d>50)?50:d;if(DataBoardBasicTransmitterForIe._loginUser&&DataBoardBasicTransmitterForIe._loginUser.isLogin){g.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;g.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;g.token=$.cookie("token")}e=function(k){if(k.result=="SUCCESS"){DataBoardBasicTransmitterForIe._targetClient.board=k.results;DataBoardBasicTransmitterForIe._targetClient.pageNum=k.pageNum;DataBoardBasicTransmitterForIe._targetClient.renderAfterFetch("list")}return};this.run(b,"POST",g,e,a,c)},initLoginAndFetchContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardBasicTransmitterForIe._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){DataBoardBasicTransmitterForIe._targetClient=f;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=g;params.item="BB";callBack=function(m){if(m.result=="SUCCESS"){DataBoardBasicTransmitterForIe._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack,a,d)}else{l.fetchContent(f,d,c,a,i,e,j)}},fetchContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardbasic/content/fetch.wwz";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardBasicTransmitterForIe._loginUser&&DataBoardBasicTransmitterForIe._loginUser.isLogin){h.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;h.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){DataBoardBasicTransmitterForIe._targetClient.selectedContent=k.content;DataBoardBasicTransmitterForIe._targetClient.selectedComments=k.comments;DataBoardBasicTransmitterForIe._targetClient.selectedIsEditable=k.isEditable;DataBoardBasicTransmitterForIe._targetClient.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){DataBoardBasicTransmitterForIe._targetClient.selectedCommentsCount=parseInt(k.content.totalCommentCount)}DataBoardBasicTransmitterForIe._targetClient.renderAfterFetch("view")}return};this.run(c,"POST",h,f,a,d,b)},initLoginAndFetchBoardAndContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardBasicTransmitterForIe._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){DataBoardBasicTransmitterForIe._targetClient=f;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=g;params.item="BB";callBack=function(m){if(m.result=="SUCCESS"){DataBoardBasicTransmitterForIe._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchBoardAndContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack,a,d)}else{l.fetchBoardAndContent(f,d,c,a,i,e,j)}},fetchBoardAndContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardbasic/boardandcontent/fetch.wwz";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardBasicTransmitterForIe._loginUser&&DataBoardBasicTransmitterForIe._loginUser.isLogin){h.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;h.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){DataBoardBasicTransmitterForIe._targetClient.board=k.board;DataBoardBasicTransmitterForIe._targetClient.selectedContent=k.content;DataBoardBasicTransmitterForIe._targetClient.selectedComments=k.comments;DataBoardBasicTransmitterForIe._targetClient.selectedIsEditable=k.isEditable;DataBoardBasicTransmitterForIe._targetClient.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){DataBoardBasicTransmitterForIe._targetClient.selectedCommentsCount=parseInt(k.content.totalCommentCount)}DataBoardBasicTransmitterForIe._targetClient.renderAfterFetch("view")}return};this.run(c,"POST",h,f,a,d,b)},fetchComment:function(g,d,c,a,k,i,e,j){var b,h,f;b="http://api.5moments.co.kr/api/data/boardbasic/comment/all/fetch.wwz";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;if(DataBoardBasicTransmitterForIe._loginUser&&DataBoardBasicTransmitterForIe._loginUser.isLogin){h.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;h.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;h.token=$.cookie("token")}f=function(l){if(l.result=="SUCCESS"){DataBoardBasicTransmitterForIe._targetClient.selectedComments=l.comments;DataBoardBasicTransmitterForIe._targetClient.pageNumComment=l.pageNum;DataBoardBasicTransmitterForIe._targetClient.renderAfterFetch(DataBoardBasicTransmitterForIe._targetClient._currnetViewName)}};this.run(b,"POST",h,f,a,d,c)},initLoginUser:function(){var a=UserLoginTransmitterForIe.getInstance();a.initLoginUser(this)},login:function(a,b){DataBoardBasicTransmitterForIe._targetClient=a;var c=UserLoginTransmitterForIe.getInstance();c.login(a,b,"BOARD_BASIC","BB")},logout:function(){DataBoardBasicTransmitterForIe._loginUser={};var a=UserLoginTransmitterForIe.getInstance();a.logout()},loginUser:function(){return DataBoardBasicTransmitterForIe._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(g,c,d){var f=g<1?1:g,b=c<1?15:c,a={},e;e=parseInt(d/b);if((d%b)>0){e=e+1}a.hasPre=f>1;a.hasNext=e>f;a.currentPageNum=f;a.totalBlockCount=e;return a},save:function(c,e,d,b){var a="#boardBasic_"+e+"_saveForm";if(!DataBoardBasicTransmitterForIe._loginUser||!DataBoardBasicTransmitterForIe._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+e+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardBasicTransmitterForIe._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardBasicTransmitterForIe._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardBasicTransmitterForIe._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardBasicTransmitterForIe._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardBasicTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardBasicTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'));if(d&&d.length>0){$(a).append($('<input type="hidden" name="parentId" value="'+d+'">'))}}$(a).attr("action","http://api.5moments.co.kr/api/data/boardbasic/add.wwz");$(a).submit()},saveComment:function(d,h,g,e,b,a){var c="http://api.5moments.co.kr/api/data/boardbasic/comment/save.wwz",f;if(!DataBoardBasicTransmitterForIe._loginUser||!DataBoardBasicTransmitterForIe._targetClient){return}f=e;f.regName=DataBoardBasicTransmitterForIe._loginUser.loginName;f.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;f.regProfileImgUrl=DataBoardBasicTransmitterForIe._loginUser.loginProfileImg;f.regRefer=DataBoardBasicTransmitterForIe._loginUser.loginRegRefer;f.token=$.cookie("token");f.pageNum=b;f.pageRowCount=a;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardBasicTransmitterForIe._targetClient.pageNumComment=parseInt(i.pageNum)}DataBoardBasicTransmitterForIe._targetClient.render(DataBoardBasicTransmitterForIe._targetClient._currnetViewName)}else{alert("저장 중에 오류가 발생했습니다")}};this.run(c,"POST",f,callBack,d,h,g)},remove:function(b,e,d){var a="http://api.5moments.co.kr/api/data/boardbasic/remove.wwz",c;callBack=function(f){if(f.result=="SUCCESS"){DataBoardBasicTransmitterForIe._targetClient.render()}};c={};c.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;c.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;c.token=$.cookie("token");this.run(a,"DELETE",c,callBack,b,e,d)},removeComment:function(d,h,g,c,e,a){var b="http://api.5moments.co.kr/api/data/boardbasic/comment/remove.wwz",f;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardBasicTransmitterForIe._targetClient.pageNumComment=parseInt(i.pageNum)}DataBoardBasicTransmitterForIe._targetClient.render("view")}};f={};f.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;f.token=$.cookie("token");f.isLast=e;f.pageNum=a;this.run(b,"DELETE",f,callBack,d,h,g,c)},modify:function(c,e,d,b){var a="#boardBasic_"+e+"_saveForm";if(!DataBoardBasicTransmitterForIe._loginUser||!DataBoardBasicTransmitterForIe._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+e+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="id" value="'+d+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardBasicTransmitterForIe._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardBasicTransmitterForIe._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardBasicTransmitterForIe._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardBasicTransmitterForIe._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardBasicTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardBasicTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'))}$(a).attr("action","http://api.5moments.co.kr/api/data/boardbasic/modify.wwz");$(a).submit()},modifyComment:function(c,g,f,b,d){var a="http://api.5moments.co.kr/api/data/boardbasic/comment/modify.wwz",e;if(!DataBoardBasicTransmitterForIe._loginUser||!DataBoardBasicTransmitterForIe._targetClient){return}e=d;e.regName=DataBoardBasicTransmitterForIe._loginUser.loginName;e.regId=DataBoardBasicTransmitterForIe._loginUser.loginId;e.regEmail=DataBoardBasicTransmitterForIe._loginUser.loginEmail;e.regProfileImgUrl=DataBoardBasicTransmitterForIe._loginUser.loginProfileImg;e.regRefer=DataBoardBasicTransmitterForIe._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){DataBoardBasicTransmitterForIe._targetClient.pageMoveComment(DataBoardBasicTransmitterForIe._targetClient.pageNumComment)}};this.run(a,"PUT",e,callBack,c,g,f,b)}});$.Class("DataBoardPremiumTransmitterForIe").body({staticVal:{_loginUser:{},_targetClient:null,getInstance:function(){if(DataBoardPremiumTransmitterForIe._singleton==null){DataBoardPremiumTransmitterForIe._singleton=new DataBoardPremiumTransmitterForIe()}return DataBoardPremiumTransmitterForIe._singleton}},DataBoardPremiumTransmitterForIe:function(){var a=function(b){var d;if(b.data){if(b.data==="BP_SUCC_SAVE"){DataBoardPremiumTransmitterForIe._targetClient.render("list")}else{if(b.data==="BP_SUCC_MODIFY"){DataBoardPremiumTransmitterForIe._targetClient.render("view")}else{if(b.data==="BP_SUCC_IE_SAVE_COMMENT"){DataBoardPremiumTransmitterForIe._targetClient.render("view")}else{if(b.data==="BP_SUCC_IE_MODIFY_COMMENT"){DataBoardPremiumTransmitterForIe._targetClient.render("view")}else{if(b.data==="BP_SUCC_IE_REMOVE_COMMENT"){DataBoardPremiumTransmitterForIe._targetClient.render("view")}else{try{d=JSON.parse(b.data)}catch(c){}if(d){if(d.userInfo){DataBoardPremiumTransmitterForIe._loginUser=d.userInfo;$.cookie("token",d.token,{expires:1,path:"/",secure:false});if(DataBoardPremiumTransmitterForIe._targetClient){DataBoardPremiumTransmitterForIe._targetClient.render(DataBoardPremiumTransmitterForIe._targetClient._currnetViewName)}}else{if(d.data){if(d.data.item=="BP"){DataBoardPremiumTransmitterForIe._callBack(d.data)}}}}}}}}}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},uuid:null,setTargetClient:function(a){DataBoardPremiumTransmitterForIe._targetClient=a},run:function(c,h,f,e,a,d,b,g){var j,i;DataBoardPremiumTransmitterForIe._callBack=e;if($("#asyncBoardPremiumForIeIframe")&&$("#asyncBoardPremiumForIeIframe").length>0){i=$("#asyncBoardPremiumForIeIframe")}else{i=$("<iframe></iframe>");i.attr("id","asyncBoardPremiumForIeIframe");i.attr("name","asyncBoardPremiumForIeIframe");i.hide();i.appendTo("body")}if($("#transmitterBoardPremiumFormForIe")&&$("#transmitterBoardPremiumFormForIe").length>0){j=$("#transmitterBoardPremiumFormForIe")}else{j=$("<form></form>"),j.attr("method","POST");j.attr("id","transmitterBoardPremiumFormForIe");j.attr("target","asyncBoardPremiumForIeIframe");j.appendTo("body")}j.attr("action",c);j.empty();j.append("<input type='hidden' value='"+JSON.stringify(f)+"' name='q'>");j.append("<input type='hidden' value='"+a+"' name='uuid'>");j.append("<input type='hidden' value='"+d+"' name='boardId'>");j.append("<input type='hidden' value='"+b+"' name='contentId'>");j.append("<input type='hidden' value='"+g+"' name='commentId'>");j.submit()},initLoginAndFetch:function(e,c,a,i,d,h,j){var f=$.cookie("token"),b,l=this,g=false,k=DataBoardPremiumTransmitterForIe._loginUser;if(!k||!k.isLogin){if(f&&f.length>0&&f!="null"){g=true}}if(g){DataBoardPremiumTransmitterForIe._targetClient=e;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=f;params.item="BP";callBack=function(m){if(m.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetch(e,c,a,i,d,h,j)};this.run(b,"POST",params,callBack,a,c)}else{l.fetch(e,c,a,i,d,h,j)}},fetch:function(f,c,a,i,d,h,j){var b,g,e;b="http://api.5moments.co.kr/api/data/boardpremium/all/fetch.wwz";g={};g.searchVal=h;g.pageNum=i;g.pageRow=(d>50)?50:d;if(DataBoardPremiumTransmitterForIe._loginUser&&DataBoardPremiumTransmitterForIe._loginUser.isLogin){g.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;g.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;g.token=$.cookie("token")}e=function(k){if(k.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.board=k.results;DataBoardPremiumTransmitterForIe._targetClient.pageNum=k.pageNum;DataBoardPremiumTransmitterForIe._targetClient.renderAfterFetch("list")}return};this.run(b,"POST",g,e,a,c)},initLoginAndFetchContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardPremiumTransmitterForIe._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){DataBoardPremiumTransmitterForIe._targetClient=f;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=g;params.item="BP";callBack=function(m){if(m.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack,a,d)}else{l.fetchContent(f,d,c,a,i,e,j)}},fetchContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardpremium/content/fetch.wwz";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardPremiumTransmitterForIe._loginUser&&DataBoardPremiumTransmitterForIe._loginUser.isLogin){h.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;h.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.selectedContent=k.content;DataBoardPremiumTransmitterForIe._targetClient.selectedComments=k.comments;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFiles=k.attachFiles;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFilesSize=k.attachFilesSize;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFilesFormatSize=k.attachFilesFormatSize;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFilesCount=k.attachFilesCount;DataBoardPremiumTransmitterForIe._targetClient.selectedIsEditable=k.isEditable;DataBoardPremiumTransmitterForIe._targetClient.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){DataBoardPremiumTransmitterForIe._targetClient.selectedCommentsCount=parseInt(k.content.totalCommentCount)}DataBoardPremiumTransmitterForIe._targetClient.renderAfterFetch("view")}};this.run(c,"POST",h,f,a,d,b)},initLoginAndFetchBoardAndContent:function(f,d,c,a,i,e,j){var g=$.cookie("token"),b,l=this,h=false,k=DataBoardPremiumTransmitterForIe._loginUser;if(!k||!k.isLogin){if(g&&g.length>0&&g!="null"){h=true}}if(h){DataBoardPremiumTransmitterForIe._targetClient=f;b="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=g;params.item="BP";callBack=function(m){if(m.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._loginUser=m.userInfo;$.cookie("token",m.token,{expires:1,path:"/",secure:false})}l.fetchBoardAndContent(f,d,c,a,i,e,j)};this.run(b,"POST",params,callBack,a,d)}else{l.fetchBoardAndContent(f,d,c,a,i,e,j)}},fetchBoardAndContent:function(g,d,b,a,i,e,j){var c,h,f;c="http://api.5moments.co.kr/api/data/boardpremium/boardandcontent/fetch.wwz";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;h.isMobile=j||false;if(DataBoardPremiumTransmitterForIe._loginUser&&DataBoardPremiumTransmitterForIe._loginUser.isLogin){h.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;h.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;h.token=$.cookie("token")}f=function(k){if(k.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.board=k.board;DataBoardPremiumTransmitterForIe._targetClient.selectedContent=k.content;DataBoardPremiumTransmitterForIe._targetClient.selectedComments=k.comments;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFiles=k.attachFiles;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFilesSize=k.attachFilesSize;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFilesFormatSize=k.attachFilesFormatSize;DataBoardPremiumTransmitterForIe._targetClient.selectedAttachFilesCount=k.attachFilesCount;DataBoardPremiumTransmitterForIe._targetClient.selectedIsEditable=k.isEditable;DataBoardPremiumTransmitterForIe._targetClient.pageNumComment=k.pageNum;if(k.content&&k.content.totalCommentCount){DataBoardPremiumTransmitterForIe._targetClient.selectedCommentsCount=parseInt(k.content.totalCommentCount)}DataBoardPremiumTransmitterForIe._targetClient.renderAfterFetch("view")}};this.run(c,"POST",h,f,a,d,b)},fetchComment:function(g,d,c,a,k,i,e,j){var b,h,f;b="http://api.5moments.co.kr/api/data/boardpremium/comment/all/fetch.wwz";h={};h.pageNum=i;h.pageRow=(e>50)?50:e;if(DataBoardPremiumTransmitterForIe._loginUser&&DataBoardPremiumTransmitterForIe._loginUser.isLogin){h.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;h.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;h.token=$.cookie("token")}f=function(l){if(l.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.selectedComments=l.comments;DataBoardPremiumTransmitterForIe._targetClient.pageNumComment=l.pageNum;DataBoardPremiumTransmitterForIe._targetClient.renderAfterFetch(DataBoardPremiumTransmitterForIe._targetClient._currnetViewName)}};this.run(b,"POST",h,f,a,d,c)},fetchKey:function(a,f,c){var b,e,d;if(!DataBoardPremiumTransmitterForIe._loginUser||!DataBoardPremiumTransmitterForIe._loginUser.isLogin){return}b="http://api.5moments.co.kr/api/data/boardpremium/contentkey/fetch.wwz";e={};e.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;e.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;e.token=$.cookie("token");d=function(g){if(g.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.contentKey=g.key;DataBoardPremiumTransmitterForIe._targetClient.renderAfterFetch(DataBoardPremiumTransmitterForIe._targetClient._currnetViewName)}};this.run(b,"POST",e,d,c,f)},initLoginUser:function(){var a=UserLoginTransmitterForIe.getInstance();a.initLoginUser(this)},login:function(a,b){DataBoardReplyTransmitterForIe._targetClient=a;var c=UserLoginTransmitterForIe.getInstance();c.login(a,b,"BOARD_PREMIUM","BP")},logout:function(){DataBoardPremiumTransmitterForIe._loginUser={};var a=UserLoginTransmitterForIe.getInstance();a.logout()},loginUser:function(){return DataBoardPremiumTransmitterForIe._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(g,c,d){var f=g<1?1:g,b=c<1?15:c,a={},e;e=parseInt(d/b);if((d%b)>0){e=e+1}a.hasPre=f>1;a.hasNext=e>f;a.currentPageNum=f;a.totalBlockCount=e;return a},save:function(c,f,e,d,b){var a="#boardPremium_"+f+"_saveForm";if(!DataBoardPremiumTransmitterForIe._loginUser||!DataBoardPremiumTransmitterForIe._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+f+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="contentKey" value="'+e+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'));if(d&&d.length>0){$(a).append($('<input type="hidden" name="parentId" value="'+d+'">'))}}if(b){$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/mobile/add.wwz")}else{$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/add.wwz")}$(a).submit()},saveComment:function(d,h,g,e,b,a){var c="http://api.5moments.co.kr/api/data/boardpremium/comment/save.wwz",f;if(!DataBoardPremiumTransmitterForIe._loginUser||!DataBoardPremiumTransmitterForIe._targetClient){return}f=e;f.regName=DataBoardPremiumTransmitterForIe._loginUser.loginName;f.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;f.regProfileImgUrl=DataBoardPremiumTransmitterForIe._loginUser.loginProfileImg;f.regRefer=DataBoardPremiumTransmitterForIe._loginUser.loginRegRefer;f.token=$.cookie("token");f.pageNum=b;f.pageRowCount=a;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardPremiumTransmitterForIe._targetClient.pageNumComment=parseInt(i.pageNum)}DataBoardPremiumTransmitterForIe._targetClient.render("view")}};this.run(c,"POST",f,callBack,d,h,g)},remove:function(b,e,d){var a="http://api.5moments.co.kr/api/data/boardpremium/remove.wwz",c;callBack=function(f){if(f.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.render()}};c={};c.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;c.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;c.token=$.cookie("token");this.run(a,"DELETE",c,callBack,b,e,d)},removeComment:function(d,h,g,c,e,a){var b="http://api.5moments.co.kr/api/data/boardpremium/comment/remove.wwz",f;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardPremiumTransmitterForIe._targetClient.pageNumComment=parseInt(i.pageNum)}DataBoardPremiumTransmitterForIe._targetClient.render("view")}};f={};f.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;f.token=$.cookie("token");f.isLast=e;f.pageNum=a;this.run(b,"DELETE",f,callBack,d,h,g,c)},modify:function(c,f,e,d,b){var a="#boardPremium_"+f+"_saveForm";if(!DataBoardPremiumTransmitterForIe._loginUser||!DataBoardPremiumTransmitterForIe._loginUser.isLogin){return}if(!$(a).find("INPUT[name=boardId]")||$(a).find("INPUT[name=boardId]").length<1){$(a).append($('<input type="hidden" name="boardId" value="'+f+'">'));$(a).append($('<input type="hidden" name="uuid" value="'+c+'">'));$(a).append($('<input type="hidden" name="contentKey" value="'+d+'">'));$(a).append($('<input type="hidden" name="id" value="'+e+'">'));$(a).append($('<input type="hidden" name="regName" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginName+'">'));$(a).append($('<input type="hidden" name="regId" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginId+'">'));$(a).append($('<input type="hidden" name="regEmail" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginEmail+'">'));$(a).append($('<input type="hidden" name="regProfileImgUrl" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginProfileImg+'">'));$(a).append($('<input type="hidden" name="regRefer" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="regReferStr" value="'+DataBoardPremiumTransmitterForIe._loginUser.loginRegRefer+'">'));$(a).append($('<input type="hidden" name="token" value="'+$.cookie("token")+'">'))}if(b){$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/mobile/modify.wwz")}else{$(a).attr("action","http://api.5moments.co.kr/api/data/boardpremium/modify.wwz")}$(a).submit()},modifyComment:function(c,g,f,b,d){var a="http://api.5moments.co.kr/api/data/boardpremium/comment/modify.wwz",e;if(!DataBoardPremiumTransmitterForIe._loginUser||!DataBoardPremiumTransmitterForIe._targetClient){return}e=d;e.regName=DataBoardPremiumTransmitterForIe._loginUser.loginName;e.regId=DataBoardPremiumTransmitterForIe._loginUser.loginId;e.regEmail=DataBoardPremiumTransmitterForIe._loginUser.loginEmail;e.regProfileImgUrl=DataBoardPremiumTransmitterForIe._loginUser.loginProfileImg;e.regRefer=DataBoardPremiumTransmitterForIe._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){DataBoardPremiumTransmitterForIe._targetClient.pageMoveComment(DataBoardPremiumTransmitterForIe._targetClient.pageNumComment)}};this.run(a,"PUT",e,callBack,c,g,f,b)}});$.Class("DataBoardBlogTransmitterForIe").body({staticVal:{_loginUser:{},_targetClient:null,getInstance:function(){if(DataBoardBlogTransmitterForIe._singleton==null){DataBoardBlogTransmitterForIe._singleton=new DataBoardBlogTransmitterForIe()}return DataBoardBlogTransmitterForIe._singleton}},DataBoardBlogTransmitterForIe:function(){var a=function(b){var d;if(b.data){if(b.data==="BL_SUCC_IE_SAVE_COMMENT"){DataBoardBlogTransmitterForIe._targetClient.render("view")}else{if(b.data==="BL_SUCC_IE_MODIFY_COMMENT"){DataBoardBlogTransmitterForIe._targetClient.render("view")}else{if(b.data==="BL_SUCC_IE_REMOVE_COMMENT"){DataBoardBlogTransmitterForIe._targetClient.render("view")}else{try{d=JSON.parse(b.data)}catch(c){}if(d){if(d.userInfo){DataBoardBlogTransmitterForIe._loginUser=d.userInfo;$.cookie("token",d.token,{expires:1,path:"/",secure:false});if(DataBoardBlogTransmitterForIe._targetClient){DataBoardBlogTransmitterForIe._targetClient.render(DataBoardBlogTransmitterForIe._targetClient._currnetViewName)}}else{if(d.data){if(d.data.item=="BL"){DataBoardBlogTransmitterForIe._callBack(d.data)}}}}}}}}};if(window.addEventListener){window.addEventListener("message",a)}else{window.attachEvent("onmessage",a)}},uuid:null,setTargetClient:function(a){DataBoardBlogTransmitterForIe._targetClient=a},run:function(c,i,g,e,a,d,b,h,f){var k,j;DataBoardBlogTransmitterForIe._callBack=e;if($("#asyncBoardBlogForIeIframe")&&$("#asyncBoardBlogForIeIframe").length>0){j=$("#asyncBoardBlogForIeIframe")}else{j=$("<iframe></iframe>");j.attr("id","asyncBoardBlogForIeIframe");j.attr("name","asyncBoardBlogForIeIframe");j.hide();j.appendTo("body")}if($("#transmitterBoardBlogFormForIe")&&$("#transmitterBoardBlogFormForIe").length>0){k=$("#transmitterBoardBlogFormForIe")}else{k=$("<form></form>"),k.attr("method","POST");k.attr("id","transmitterBoardBlogFormForIe");k.attr("target","asyncBoardBlogForIeIframe");k.appendTo("body")}k.attr("action",c);k.empty();k.append("<input type='hidden' value='"+JSON.stringify(g)+"' name='q'>");k.append("<input type='hidden' value='"+a+"' name='uuid'>");k.append("<input type='hidden' value='"+d+"' name='boardId'>");k.append("<input type='hidden' value='"+b+"' name='contentId'>");k.append("<input type='hidden' value='"+h+"' name='commentId'>");k.append("<input type='hidden' value='"+f+"' name='categoryId'>");k.submit()},initLoginAndFetchContent:function(e,i){var f=$.cookie("token"),c,k=this,h=false,j=DataBoardBlogTransmitterForIe._loginUser,a,d,g,b;if(!j||!j.isLogin){if(f&&f.length>0&&f!="null"){h=true}}if(h){DataBoardBlogTransmitterForIe._targetClient=e;c="http://api.5moments.co.kr/api/data/socialoauth/keep.wwz";params={};params.token=f;params.item="BL";callBack=function(l){if(l.result=="SUCCESS"){DataBoardBlogTransmitterForIe._loginUser=l.userInfo;$.cookie("token",l.token,{expires:1,path:"/",secure:false})}k.fetchContent(e,i)};a=e.uuid;d=e.boardId;g=e.selectedCategoryId||"main";b=e.selectedContentId;this.run(c,"POST",params,callBack,a,d,b,null,g)}else{k.fetchContent(e,i)}},fetchContent:function(f,i){var c,g,e,a,d,h,b;c="http://api.5moments.co.kr/api/data/boardblog/content/fetch.wwz";g={};g.pageNum=f.pageNum;g.pageNumList=f.pageNumList;g.isMobile=i||false;g.contentId=f.selectedContentId;a=f.uuid;d=f.boardId;h=f.selectedCategoryId||"main";b=f.selectedContentId;if(DataBoardBlogTransmitterForIe._loginUser&&DataBoardBlogTransmitterForIe._loginUser.isLogin){g.regId=DataBoardBlogTransmitterForIe._loginUser.loginId;g.regEmail=DataBoardBlogTransmitterForIe._loginUser.loginEmail;g.token=$.cookie("token")}e=function(j){if(j.result=="SUCCESS"){DataBoardBlogTransmitterForIe._targetClient.board=j.results.board;DataBoardBlogTransmitterForIe._targetClient.selectedContent=j.results.content;DataBoardBlogTransmitterForIe._targetClient.selectedCategory=j.results.selectedCategory;DataBoardBlogTransmitterForIe._targetClient.selectedLists=j.results.lists;DataBoardBlogTransmitterForIe._targetClient.selectedComments=j.results.comments;DataBoardBlogTransmitterForIe._targetClient.selectedCategoryId=j.results.selectedCategory.id;if(j.results.content){DataBoardBlogTransmitterForIe._targetClient.selectedContentId=j.results.content.id}DataBoardBlogTransmitterForIe._targetClient.categorys=j.results.categorys;DataBoardBlogTransmitterForIe._targetClient.selectedAttachFiles=j.results.attachFiles;DataBoardBlogTransmitterForIe._targetClient.selectedAttachFilesSize=j.results.attachFilesSize;DataBoardBlogTransmitterForIe._targetClient.selectedAttachFilesFormatSize=j.results.attachFilesFormatSize;DataBoardBlogTransmitterForIe._targetClient.selectedAttachFilesCount=j.results.attachFilesCount;DataBoardBlogTransmitterForIe._targetClient.pageNum=j.results.pageNum;DataBoardBlogTransmitterForIe._targetClient.pageNumList=j.results.pageNumList;DataBoardBlogTransmitterForIe._targetClient.pageNumComment=j.results.pageNumComment;DataBoardBlogTransmitterForIe._targetClient.selectedCount=parseInt(j.results.selectedCategoryCount);DataBoardBlogTransmitterForIe._targetClient.selectedListCount=parseInt(j.results.selectedCategoryCount);DataBoardBlogTransmitterForIe._targetClient.selectedCommentsCount=parseInt(j.results.commentsCount);if(j.results.content&&j.results.content.totalCommentCount){DataBoardBlogTransmitterForIe._targetClient.selectedCommentsCount=parseInt(j.results.content.totalCommentCount)}DataBoardBlogTransmitterForIe._targetClient.renderAfterFetch("view")}};this.run(c,"POST",g,e,a,d,b,null,h)},fetchList:function(b,a){var c,g,f,d,h,e;c="http://api.5moments.co.kr/api/data/boardblog/list/all/fetch.wwz";g={};g.pageNumList=pageNumList;d=b.uuid;h=b.boardId;e=b.selectedCategoryId||"main";if(DataBoardBlogTransmitterForIe._loginUser&&DataBoardBlogTransmitterForIe._loginUser.isLogin){g.regId=DataBoardBlogTransmitterForIe._loginUser.loginId;g.regEmail=DataBoardBlogTransmitterForIe._loginUser.loginEmail;g.token=$.cookie("token")}f=function(i){if(i.result=="SUCCESS"){DataBoardBlogTransmitterForIe._targetClient.selectedLists=i.lists;DataBoardBlogTransmitterForIe._targetClient.pageNumList=i.pageNumList;DataBoardBlogTransmitterForIe._targetClient.renderAfterFetch(DataBoardBlogTransmitterForIe._targetClient._currnetViewName)}};this.run(c,"POST",g,f,d,h,null,null,e)},fetchComment:function(b,a){var c,f,e,d,h,g;c="http://api.5moments.co.kr/api/data/boardblog/comment/all/fetch.wwz";f={};f.pageNum=b.pageNum;f.pageNumComment=b.pageNumComment;f.pageRow=(b.pageRowComment>50)?50:b.pageRowComment;d=b.uuid;h=b.boardId;g=b.selectedContentId;if(DataBoardBlogTransmitterForIe._loginUser&&DataBoardBlogTransmitterForIe._loginUser.isLogin){f.regId=DataBoardBlogTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardBlogTransmitterForIe._loginUser.loginEmail;f.token=$.cookie("token")}e=function(i){if(i.result=="SUCCESS"){DataBoardBlogTransmitterForIe._targetClient.selectedComments=i.comments;DataBoardBlogTransmitterForIe._targetClient.pageNumComment=i.pageNumComment;DataBoardBlogTransmitterForIe._targetClient.renderAfterFetch(DataBoardBlogTransmitterForIe._targetClient._currnetViewName)}};this.run(c,"POST",f,e,d,h,g)},initLoginUser:function(){var a=UserLoginTransmitterForIe.getInstance();a.initLoginUser(this)},login:function(a,b){DataBoardBlogTransmitterForIe._targetClient=a;var c=UserLoginTransmitterForIe.getInstance();c.login(a,b,"BOARD_BLOG","BL")},logout:function(){DataBoardBlogTransmitterForIe._loginUser={};var a=UserLoginTransmitterForIe.getInstance();a.logout()},loginUser:function(){return DataBoardBlogTransmitterForIe._loginUser},paging:function(e,m,f){var l=e<1?1:e,d=m<1?15:m,h,a=10,k={},c,b,g,j=[];c=parseInt(f/d);if((f%d)>0){c=c+1}b=parseInt(l/10);b=b<1?1:(b*10)+1;g=b+9;for(h=b;h<=g;h++){if(h>c){break}j.push(h)}k.hasPre=l>a;k.hasNext=c>g;k.currentPageNum=l;k.pageNums=j;return k},pagingMobile:function(g,c,d){var f=g<1?1:g,b=c<1?15:c,a={},e;e=parseInt(d/b);if((d%b)>0){e=e+1}a.hasPre=f>1;a.hasNext=e>f;a.currentPageNum=f;a.totalBlockCount=e;return a},saveComment:function(d,h,g,e,b,a){var c="http://api.5moments.co.kr/api/data/boardblog/comment/save.wwz",f;if(!DataBoardBlogTransmitterForIe._loginUser||!DataBoardBlogTransmitterForIe._targetClient){return}f=e;f.regName=DataBoardBlogTransmitterForIe._loginUser.loginName;f.regId=DataBoardBlogTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardBlogTransmitterForIe._loginUser.loginEmail;f.regProfileImgUrl=DataBoardBlogTransmitterForIe._loginUser.loginProfileImg;f.regRefer=DataBoardBlogTransmitterForIe._loginUser.loginRegRefer;f.token=$.cookie("token");f.pageNum=b;f.pageRowCount=a;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardBlogTransmitterForIe._targetClient.pageNumComment=parseInt(i.pageNum)}DataBoardBlogTransmitterForIe._targetClient.render("view")}};this.run(c,"POST",f,callBack,d,h,g)},removeComment:function(d,h,g,c,e,a){var b="http://api.5moments.co.kr/api/data/boardblog/comment/remove.wwz",f;callBack=function(i){if(i.result=="SUCCESS"){if(i.pageNum){DataBoardBlogTransmitterForIe._targetClient.pageNumComment=parseInt(i.pageNum)}DataBoardBlogTransmitterForIe._targetClient.render("view")}};f={};f.regId=DataBoardBlogTransmitterForIe._loginUser.loginId;f.regEmail=DataBoardBlogTransmitterForIe._loginUser.loginEmail;f.token=$.cookie("token");f.isLast=e;f.pageNum=a;this.run(b,"DELETE",f,callBack,d,h,g,c)},modifyComment:function(c,g,f,b,d){var a="http://api.5moments.co.kr/api/data/boardblog/comment/modify.wwz",e;if(!DataBoardBlogTransmitterForIe._loginUser||!DataBoardBlogTransmitterForIe._targetClient){return}e=d;e.regName=DataBoardBlogTransmitterForIe._loginUser.loginName;e.regId=DataBoardBlogTransmitterForIe._loginUser.loginId;e.regEmail=DataBoardBlogTransmitterForIe._loginUser.loginEmail;e.regProfileImgUrl=DataBoardBlogTransmitterForIe._loginUser.loginProfileImg;e.regRefer=DataBoardBlogTransmitterForIe._loginUser.loginRegRefer;e.token=$.cookie("token");callBack=function(h){if(h.result=="SUCCESS"){DataBoardBlogTransmitterForIe._targetClient.pageMoveComment(DataBoardBlogTransmitterForIe._targetClient.pageNumComment)}};this.run(a,"PUT",e,callBack,c,g,f,b)}});function postMessageForIe(a){window.parent.postMessage(a,"*")};if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("BoardBasicClient").body({staticVal:{_singleton:null,getInstance:function(){if(BoardBasicClient._singleton==null){BoardBasicClient._singleton=new BoardBasicClient()}return BoardBasicClient._singleton}},BoardBasicClient:function(){},usePrivate:false,useComment:false,useReply:false,$el:null,uuid:null,id:null,board:null,loginUser:{},paging:null,pageNum:1,pageRow:15,pagingComment:null,pageNumComment:-1,pageRowComment:15,transmitter:null,elementId:null,originHeight:0,viewList:{},searchVal:"",selectedContentId:null,selectedContent:null,selectedComments:null,selectedCommentsCount:0,selectedIsEditable:false,_currnetViewName:"",isIe9Under:false,pageRowCount:0,languageList:{KR:{emptyAlert:"내용을 입력하세요",titleAlert:"제목을 입력하세요",loginAlert:"소셜 로그인 이후에 등록 할 수 있습니다",removeAlert:"삭제하시겠습니까?",privateAlert:"비밀글에 대한 답글은 비밀글로만 작성할 수 있습니다",copyUrl:"게시물 주소가 복사되었습니다",copyUrlGuide:"CTRL + C를 누르면 주소를 복사할 수 있습니다"},EN:{emptyAlert:"Please enter comments",titleAlert:"Please enter title",loginAlert:"Please SNS login first",removeAlert:"Delete this comment?",privateAlert:"Only private reply is allowed",copyUrl:"Url is copied to clipboard",copyUrlGuide:"Please Press CTRL + C"}},languageMap:null,initialize:function(g,e,h,i,f,a,d){var c=window.location.href,b;this.elementId=g;this.pageRow=parseInt(e);this.usePrivate=h;this.useComment=i;this.useReply=f;this.uuid=a;this.id=d;if($(".ie-detection").hasClass("ie8")||$(".ie-detection").hasClass("ie9")){this.isIe9Under=true}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.transmitter=DataBoardBasicTransmitterForIe.getInstance()}else{this.transmitter=DataBoardBasicTransmitter.getInstance()}this.transmitter.setTargetClient(this);b=c.substring(c.indexOf("?bbid=")+6);if(b&&b.length>0&&$.isNumeric(b)){this.selectedContentId=b;this.render("directView")}else{this.render()}},render:function(b){var a=this;if(!b||b==="list"){this._currnetViewName="list";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetch(a,a.id,a.uuid,a.pageNum,a.pageRow,a.searchVal)}else{$.when(a.transmitter.initLoginAndFetch(a,a.id,a.uuid,a.pageNum,a.pageRow,a.searchVal)).then(function(){a.renderAfterFetch("list")})}}else{if(b==="view"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetchContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)}else{$.when(a.transmitter.initLoginAndFetchContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)).then(function(){a.renderAfterFetch("view")})}}else{if(b==="directView"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetchBoardAndContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)}else{$.when(a.transmitter.initLoginAndFetchBoardAndContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)).then(function(){a.renderAfterFetch("view")})}}else{if(b==="viewComment"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchComment(a,a.id,a.selectedContentId,a.uuid,a.useComment,a.pageNumComment,a.pageRowComment)}else{$.when(a.transmitter.fetchComment(a,a.id,a.selectedContentId,a.uuid,a.useComment,a.pageNumComment,a.pageRowComment)).then(function(){a.renderAfterFetch("viewComment")})}}else{if(b==="write"){this._currnetViewName="write";a.renderAfterFetch("write")}else{if(b==="reply"){this._currnetViewName="reply";a.renderAfterFetch("reply")}else{if(b==="modify"){this._currnetViewName="modify";a.renderAfterFetch("modify")}}}}}}}},renderAfterFetch:function(d){var b=this,c=false,a={};b.loginUser=b.transmitter.loginUser();if(d=="list"){if(this.board&&this.board.attrListWeb){a=JSON.parse(this.board.attrListWeb)}b.languageMap=b.languageList[a.language];b.paging=b.transmitter.paging(b.pageNum,b.pageRow,b.board.totalCount);new BoardBasicListView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,searchVal:b.searchVal,uuid:b.uuid})}else{if(d=="view"||d=="viewComment"){if(this.board&&this.board.attrViewWeb){a=JSON.parse(this.board.attrViewWeb)}b.languageMap=b.languageList[a.language];b.pagingComment=b.transmitter.paging(b.pageNumComment,b.pageRowComment,b.selectedCommentsCount);new BoardBasicDetailView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.pagingComment,elementId:b.elementId,content:b.selectedContent,comments:b.selectedComments,isEditable:b.selectedIsEditable,uuid:b.uuid})}else{if(d=="write"){if(this.board&&this.board.attrWriteWeb){a=JSON.parse(this.board.attrWriteWeb)}b.languageMap=b.languageList[a.language];if(!this.loginUser||!this.loginUser.isLogin){return}new BoardBasicWriteView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,uuid:b.uuid,});c=true}else{if(d=="reply"){if(this.board&&this.board.attrWriteWeb){a=JSON.parse(this.board.attrWriteWeb)}b.languageMap=b.languageList[a.language];if(!this.loginUser||!this.loginUser.isLogin){return}new BoardBasicWriteView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,contentId:b.selectedContentId,uuid:b.uuid,isReply:true,});c=true}else{if(d=="modify"){if(this.board&&this.board.attrWriteWeb){a=JSON.parse(this.board.attrWriteWeb)}b.languageMap=b.languageList[a.language];if(!b.selectedContentId||!this.loginUser||!this.loginUser.isLogin){return}new BoardBasicWriteView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,contentId:b.selectedContentId,content:b.selectedContent,uuid:b.uuid,});c=true}}}}}b.$el=$(".cid-"+b.elementId);b.resizeParentHeight(b.$el,c)},login:function(b,a){this.transmitter.login(this,a)},logout:function(b,a){this.transmitter.logout();this.render("list")},save:function(){this.transmitter.save(this.uuid,this.id,"",false)},saveComment:function(b){var a=0;if(this.selectedComments&&this.selectedComments.length>0){a=this.selectedComments.length}this.transmitter.saveComment(this.uuid,this.id,this.selectedContentId,b,this.pageNumComment,a)},reply:function(a){this.transmitter.save(this.uuid,this.id,a)},remove:function(a){this.transmitter.remove(this.uuid,this.id,a)},removeComment:function(a,b){this.transmitter.removeComment(this.uuid,this.id,this.selectedContentId,a,b,this.pageNumComment)},modify:function(a){this.transmitter.modify(this.uuid,this.id,a,false)},modifyComment:function(a,b){this.transmitter.modifyComment(this.uuid,this.id,this.selectedContentId,a,b)},search:function(a){this.searchVal=a;this.pageNum=1;this.render()},pagePre:function(){if(this.pageNum<=1){return}else{this.pageNum=this.pageNum-1}this.render()},pagePreComment:function(){if(!this.useComment){return}if(this.pageNumComment<=1){return}else{this.pageNumComment=this.pageNumComment-1}this.render("viewComment")},pageMove:function(a){this.pageNum=a;this.render()},pageMoveComment:function(a){if(!this.useComment){return}this.pageNumComment=a;this.render("viewComment")},pageNext:function(){this.pageNum=this.pageNum+1;this.render()},pageNextComment:function(){if(!this.useComment){return}this.pageNumComment=this.pageNumComment+1;this.render("viewComment")},resizeParentHeight:function(b,d){var h,a,g,e,f,c=470;if(b&&b.length>0){h=b.parent().parent().attr("data-idx");a=b.parent().parent().height();if(this.originHeight>0){$(".lid-"+h).css({height:this.originHeight});$(".stub-"+h).css({height:this.originHeight});a=this.originHeight}else{this.originHeight=a}g=b.height();e=b.position().top;f=g+e+65;if(d){f=f+c}if(a<f){$(".lid-"+h).css({height:f});$(".stub-"+h).css({height:f})}}},});var BoardBasicListView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,searchVal:"",uuid:null,languageMap:null,initialize:function(a){this._parent=a.parent;this.board=a.board;this.loginUser=a.loginUser;this.paging=a.paging,this.elementId=a.elementId;this.searchVal=a.searchVal;this.uuid=a.uuid;this.languageMap=this._parent.languageMap;this.render()},render:function(){var g,d=this.board.contents,i=this,f,b="",h=0,e=false,a=false,c;this.$el=$(".boardbasic-list",".cid-"+this.elementId);this.$el.addClass(this.board.themeType);c=JSON.parse(this.board.attrListWeb);if(this.searchVal&&this.searchVal.length>=2){f=new RegExp(this.searchVal,"ig");$.each(d,function(j,k){if(k.title.indexOf(i.searchVal)>-1){k.title=k.title.replace(f,"<b>"+i.searchVal+"</b>")}})}if(this.board){b=this.board.id;h=this.board.totalCount;e=this.board.usePrivate;a=this.board.useReply}g=_.template($.trim($("#ComponentBoardBasicListWebTemplate").html()),{id:b,totalCount:h,isUsePrivate:e,isUseReply:a,contents:d,searchVal:this.searchVal,hasPre:this.paging.hasPre,hasNext:this.paging.hasNext,currentPageNum:this.paging.currentPageNum,pageNums:this.paging.pageNums,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,socialPostFix:"BB",socialIframeNVUrl:"http://api.5moments.co.kr/socialOauthNVForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeFBUrl:"http://api.5moments.co.kr/socialOauthFB.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeGGUrl:"http://api.5moments.co.kr/socialOauthGG.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeTTUrl:"http://api.5moments.co.kr/socialOauthTTForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeKKUrl:"http://api.5moments.co.kr/socialOauthKK.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC"});this.$el.html(g);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}c=JSON.parse(this.board.attrListWeb);if(c.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(c.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(c.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(c.searchThemeActive){this.$(".wwz-search").addClass("is-active")}this.$el.off()},events:{"click .list-item":"view","click .wwz-login-btn":"login","click .wwz-logout-btn":"logout","click .wwz-ctrl--toggle_login":"toggleLoginLayer","click .wwz-login-term":"loginTerm","click .wwz-write-btn":"write","click .wwz-search-btn":"search","keyup .search-input":"searchByKey",},view:function(c){var b=$(c.target),a=b.attr("data-idx");if(!a||a.length<1){return}this._parent.selectedContentId=a;this._parent.render("view")},loginTerm:function(b){var a="http://5moments.co.kr/comember/joinTerm.wwz";window.open(a+"?uuid="+this.uuid,"_blank");if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}},toggleLoginLayer:function(c){var a=$(c.target),b=this.$(".wwz-login-layer");if(a.hasClass("ctrl-btn")){if(a.hasClass("is-active")){b.hide();a.removeClass("is-active")}else{b.show();a.addClass("is-active")}}if(a.hasClass("is-active")){$(document).on("mouseup."+this.elementId,function(d){if($(d.target).is(a)){return}if(!b.is($(d.target))&&b.has($(d.target)).length===0){b.hide();a.removeClass("is-active");$(document).off("mouseup."+this.elementId)}})}},login:function(b){var a=$(b.target);if(a.hasClass("is-naver")){this._parent.login(b,"NAVER")}else{if(a.hasClass("is-facebook")){this._parent.login(b,"FACEBOOK")}else{if(a.hasClass("is-google")){this._parent.login(b,"GOOGLE")}else{if(a.hasClass("is-twitter")){this._parent.login(b,"TWITTER")}else{if(a.hasClass("is-kakao")){this._parent.login(b,"KAKAO")}else{return}}}}}},logout:function(){this._parent.logout()},write:function(a){if(this.loginUser.isLogin){this._parent.render("write")}else{alert(this.languageMap.loginAlert);return}},searchByKey:function(b){var a=(b.keyCode?b.keyCode:b.which);if(a===13){this.search()}},search:function(b){var a=this.$("#wwz-search-txt").val();this._parent.search(a)},getStringLength:function(e){var d=0,a,c,b;for(a=0;a<e.length;a++){c=parseInt(e.charCodeAt(a));b=e.substr(a,1).toUpperCase();if((b<"0"||b>"9")&&(b<"A"||b>"Z")&&((c>255)||(c<0))){d=d+2}else{d=d+1}}return d}});var BoardBasicDetailView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,content:null,comments:null,isEditable:false,contentUrl:"",uuid:null,languageMap:null,initialize:function(a){this._parent=a.parent;this.board=a.board;this.loginUser=a.loginUser;this.paging=a.paging,this.elementId=a.elementId;this.content=a.content;this.comments=a.comments;this.isEditable=a.isEditable||false;this.contentUrl="http://"+document.location.host+document.location.pathname+"?bbid="+this.content.id;this.uuid=a.uuid;this.languageMap=this._parent.languageMap;this.render()},render:function(){var c,f,e,a,b,d;if(this.board){f=this.board.id;e=this.board.usePrivate;a=this.board.useReply;b=this.board.useComment;d=this.board.themeType}else{f=this.content.boardId;e=this.content.usePrivate;a=this.content.useReply;b=this.content.useComment;d=this.content.themeType}this.$el=$(".boardbasic-list",".cid-"+this.elementId);this.$el.addClass(d);c=_.template($.trim($("#ComponentBoardBasicDetailWebTemplate").html()),{id:f,isUsePrivate:e,isUseReply:a,isUseComment:b,content:this.content,comments:this.comments,themeType:d,contentUrl:this.contentUrl,isEditable:this.isEditable,hasPre:this.paging.hasPre,hasNext:this.paging.hasNext,currentPageNum:this.paging.currentPageNum,pageNums:this.paging.pageNums,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,socialPostFix:"BB",socialIframeNVUrl:"http://api.5moments.co.kr/socialOauthNVForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeFBUrl:"http://api.5moments.co.kr/socialOauthFB.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeGGUrl:"http://api.5moments.co.kr/socialOauthGG.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeTTUrl:"http://api.5moments.co.kr/socialOauthTTForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC",socialIframeKKUrl:"http://api.5moments.co.kr/socialOauthKK.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BASIC"});this.$el.html(c);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}attrList=JSON.parse(this.board.attrListWeb);if(attrList.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(attrList.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(attrList.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(attrList.searchThemeActive){this.$(".wwz-search").addClass("is-active")}this.$el.off()},events:{"click .wwz-list-btn":"list","click .wwz-login-btn":"login","click .wwz-logout-btn":"logout","click .wwz-ctrl--toggle_login":"toggleLoginLayer","click .wwz-login-term":"loginTerm","click .wwz-modify-btn":"modifyView","click .wwz-delete-btn":"remove","click .wwz-reply-btn":"replyView","click .wwz-copy-btn":"copy","click .wwz-new-item-write_submit":"writeComment","click .wwz-ctrl--delete_comment":"removeComment","click .wwz-ctrl--edit_comment":"openModifyCommentLayer","click .wwz-reply-item-modify_cancel":"closeModifyCommentLayer","click .wwz-reply-item-modify_submit":"modifyComment","click .wwz-ctrl--write_comment":"openReWriteCommentLayer","click .wwz-ctrl--write_cancel":"closeReWriteCommentLayer","click .wwz-ctrl--write_submit":"reWriteComment","click .wwz-item-private_btn":"checkInheritPrivate",},list:function(a){this._parent.selectedContentId=null;this._parent.selectedContent=null;this._parent.selectedComments=null;this._parent.selectedIsEditable=null;this._parent.render()},loginTerm:function(b){var a="http://5moments.co.kr/comember/joinTerm.wwz";window.open(a+"?uuid="+this.uuid,"_blank");if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}},toggleLoginLayer:function(c){var a=$(c.target),b=this.$(".wwz-login-layer");if(a.hasClass("ctrl-btn")){if(a.hasClass("is-active")){b.hide();a.removeClass("is-active")}else{b.show();a.addClass("is-active")}}if(a.hasClass("is-active")){$(document).on("mouseup."+this.elementId,function(d){if($(d.target).is(a)){return}if(!b.is($(d.target))&&b.has($(d.target)).length===0){b.hide();a.removeClass("is-active");$(document).off("mouseup."+this.elementId)}})}},login:function(b){var a=$(b.target);if(a.hasClass("is-naver")){this._parent.login(b,"NAVER")}else{if(a.hasClass("is-facebook")){this._parent.login(b,"FACEBOOK")}else{if(a.hasClass("is-google")){this._parent.login(b,"GOOGLE")}else{if(a.hasClass("is-twitter")){this._parent.login(b,"TWITTER")}else{if(a.hasClass("is-kakao")){this._parent.login(b,"KAKAO")}else{return}}}}}},logout:function(){this._parent.logout()},remove:function(a){if(this.loginUser.isLogin){this._parent.remove(this._parent.selectedContentId)}},modifyView:function(a){if(this.loginUser.isLogin){this._parent.render("modify")}},replyView:function(a){if(this.loginUser.isLogin){this._parent.render("reply")}},copy:function(b){var a=this.$(".wwz-copy-address").text();if(window.clipboardData){window.clipboardData.setData("Text",a);alert(this.languageMap.copyUrl)}else{window.prompt(this.languageMap.copyUrlGuide,a)}},writeComment:function(d){var b,a,c;if(this.loginUser.isLogin){b=this.$(".wwz-new-item-private_mode").prop("checked");a=this.$(".wwz-new-item-write_textarea").val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}c={};c.contentHtml=a;c["private"]=b;c.isLast=false;this._parent.saveComment(c)}else{alert(this.languageMap.loginAlert);return}},removeComment:function(d){var c=$(d.target),f=c.attr("data-idx"),b=false,a;if(confirm("삭제하시겠습니까?")){if(f&&f.length>0&&this.loginUser.isLogin){if(this.comments&&this.comments.length>0){a=this.comments[this.comments.length-1];if(a.id==f){b=true}}this._parent.removeComment(f,b)}}},openModifyCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();this.$(".wwz-reply-item-"+c+" .reply-item-body").addClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el,false)}},closeModifyCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.$(".wwz-reply-item-"+c+" .reply-item-body").removeClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el,false)}},modifyComment:function(c){var b=$(c.target),d=b.attr("data-idx"),a;if(d&&d.length>0&&this.loginUser.isLogin){a=$(".wwz-reply-item-modify_textarea",".boardbasic-list .wwz-reply-item-"+d).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}obj={};obj.contentHtml=a;this._parent.modifyComment(d,obj)}},openReWriteCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();this.$(".wwz-reply-item-write-"+c).addClass("is-active");this._parent.resizeParentHeight(this._parent.$el,false)}},closeReWriteCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.$(".wwz-reply-item-write-"+c).removeClass("is-active");this._parent.resizeParentHeight(this._parent.$el,false)}},reWriteComment:function(g){var f=$(g.target),h=f.attr("data-idx"),c,a,d,b;if(h&&h.length>0&&this.loginUser.isLogin){c=$("#private_mode",".boardbasic-list .wwz-reply-item-write-"+h).prop("checked");a=$(".wwz-ctrl--write_textarea",".boardbasic-list .wwz-reply-item-write-"+h).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}d={};d.contentHtml=a;d["private"]=c;d.parentId=h;d.isLast=false;if(this.comments&&this.comments.length>0){b=this.comments[this.comments.length-1];if(b.id==h&&this.comments.length==this.board.pageRow){d.isLast=true}}this._parent.saveComment(d)}else{alert(this.languageMap.loginAlert);return}},checkInheritPrivate:function(b){var a=$(b.currentTarget);if(a.hasClass("is-parent_private")){if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}alert(this.languageMap.privateAlert)}},closeAllLayer:function(){this.$(".reply-item-body").removeClass("is-edit-mode");this.$(".reply-item-write").not(".reply-item-write--new").removeClass("is-active")}});var BoardBasicWriteView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,contentId:null,content:null,uuid:null,oEditors:[],isReply:false,uuid:null,languageMap:null,initialize:function(b){var a=this;this._parent=b.parent;this.board=b.board;this.loginUser=b.loginUser;this.paging=b.paging,this.elementId=b.elementId;this.contentId=b.contentId;this.content=b.content;this.uuid=b.uuid;this.isReply=b.isReply||false;this.uuid=b.uuid;if(a.contentId&&!this.isReply){if(!this.content){$.each(a.board.contents,function(c,d){if(d.id==a.contentId){a.content=d}})}}this.languageMap=this._parent.languageMap;this.render()},render:function(){var c,b,a=this;this.$el=$(".boardbasic-list",".cid-"+this.elementId);this.$el.addClass(this.board.themeType);c=_.template($.trim($("#ComponentBoardBasicWriteWebTemplate").html()),{id:this.board.id,totalCount:this.board.totalCount,isUsePrivate:this.board.usePrivate,isUseReply:this.board.useReply,content:this.content,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,elementId:this.elementId});this.$el.html(c);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}attrList=JSON.parse(this.board.attrListWeb);if(attrList.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(attrList.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(attrList.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(attrList.searchThemeActive){this.$(".wwz-search").addClass("is-active")}b="/smartEditor/SmartEditor2Skin.html";nhn.husky.EZCreator.createInIFrame({oAppRef:a.oEditors,elPlaceHolder:"ir1_"+this.elementId,sSkinURI:b,htParams:{bUseToolbar:true,bUseVerticalResizer:true,bUseModeChanger:true,fOnBeforeUnload:function(){}},fOnAppLoad:function(){try{var d=jQuery("iframe")[0];if(d.contentWindow.initBodyImage){d.contentWindow.initBodyImage()}}catch(f){}},fCreator:"createSEditor2"});this.$el.off()},events:{"click .wwz-list-btn":"list","click .wwz-toggle-private_mode":"togglePrivateMode","click .wwz-write-btn":"write",},list:function(a){this._parent.selectedContentId=null;this._parent.selectedContent=null;this._parent.selectedComments=null;this._parent.selectedIsEditable=null;this._parent.render()},togglePrivateMode:function(a){if(this.$(".wwz-toggle-private_mode").hasClass("is-active")){this.$(".wwz-toggle-private_mode").removeClass("is-active")}else{this.$(".wwz-toggle-private_mode").addClass("is-active")}},write:function(b){var c,a;if(this.loginUser.isLogin){this.oEditors.getById["ir1_"+this.elementId].exec("UPDATE_CONTENTS_FIELD",[]);c=this.$("#title").val();a=this.$("#ir1_"+this.elementId).val();if(!c||c.length<1){alert(this.languageMap.titleAlert);return}if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}if(!this.board.usePrivate){this.$("#input_prive").prop("checked",false)}if(this.contentId&&this.contentId.length>0){if(this.isReply){this._parent.reply(this.contentId)}else{this._parent.modify(this.contentId)}}else{this._parent.save()}}else{alert(this.languageMap.loginAlert);return}}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("BoardBlogClient").body({staticVal:{_singleton:null,getInstance:function(){if(BoardBlogClient._singleton==null){BoardBlogClient._singleton=new BoardBlogClient()}return BoardBlogClient._singleton}},BoardBlogClient:function(){},$el:null,uuid:null,id:null,boardId:null,board:null,themeType:null,loginUser:{},categorys:null,paging:null,pageNum:1,pageRow:1,pagingList:null,pageNumList:-1,pageRowList:5,pagingComment:null,pageNumComment:-1,pageRowComment:10,transmitter:null,elementId:null,originHeight:0,viewList:{},selectedContentId:null,selectedContent:null,selectedCategoryId:null,selectedCategory:null,selectedLists:null,selectedComments:null,selectedCount:0,selectedListCount:0,selectedCommentsCount:0,selectedAttachFiles:null,selectedAttachFilesCount:0,_currnetViewName:"",_attachFileIdx:0,isIe9Under:false,pageRowCount:0,languageList:{KR:{emptyAlert:"내용을 입력하세요",titleAlert:"제목을 입력하세요",loginAlert:"소셜 로그인 이후에 등록 할 수 있습니다",removeAlert:"삭제하시겠습니까?",privateAlert:"비밀글에 대한 답글은 비밀글로만 작성할 수 있습니다",copyUrl:"게시물 주소가 복사되었습니다",copyUrlGuide:"CTRL + C를 누르면 주소를 복사할 수 있습니다"},EN:{emptyAlert:"Please enter comments",titleAlert:"Please enter title",loginAlert:"Please SNS login first",removeAlert:"Delete this comment?",privateAlert:"Only private reply is allowed",copyUrl:"Url is copied to clipboard",copyUrlGuide:"Please Press CTRL + C"}},languageMap:null,initialize:function(a,c,e){var b=window.location.href,d;this.elementId=a;this.uuid=c;this.boardId=e;this.id=e;if($(".ie-detection").hasClass("ie8")||$(".ie-detection").hasClass("ie9")){this.isIe9Under=true}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.transmitter=DataBoardBlogTransmitterForIe.getInstance()}else{this.transmitter=DataBoardBlogTransmitter.getInstance()}this.transmitter.setTargetClient(this);d=b.substring(b.indexOf("?blid=")+6);if(d&&d.length>0&&$.isNumeric(d)){this.selectedContentId=d}this.render()},render:function(b){var a=this;if(!b||b==="view"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetchContent(a)}else{$.when(a.transmitter.initLoginAndFetchContent(a)).then(function(){a.renderAfterFetch("view")})}}else{if(b==="viewList"){this._currnetViewName="viewList";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchList(a)}else{$.when(a.transmitter.fetchList(a)).then(function(){a.renderAfterFetch("viewList")})}}else{if(b==="viewComment"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchComment(a)}else{$.when(a.transmitter.fetchComment(a)).then(function(){a.renderAfterFetch("viewComment")})}}}}},renderAfterFetch:function(d){var a=this,b=false,c={};if(this.board&&this.board.attrWeb){c=JSON.parse(this.board.attrWeb)}a.languageMap=a.languageList[c.language];a.themeType=c.themeType;a.loginUser=a.transmitter.loginUser();if(d=="view"||d=="viewList"||d=="viewComment"){a.paging=a.transmitter.paging(a.pageNum,a.pageRow,a.selectedCount);a.pagingList=a.transmitter.paging(a.pageNumList,a.pageRowList,a.selectedListCount);a.pagingComment=a.transmitter.paging(a.pageNumComment,a.pageRowComment,a.selectedCommentsCount);new BoardBlogDetailView({parent:a,board:a.board,loginUser:a.loginUser,paging:a.paging,pagingList:a.pagingList,pagingComment:a.pagingComment,elementId:a.elementId,content:a.selectedContent,themeType:a.themeType,lists:a.selectedLists,comments:a.selectedComments,attachFiles:a.selectedAttachFiles,attachFilesCount:a.selectedAttachFilesCount||0,categorys:a.categorys,selectedCategory:a.selectedCategory,selectedCategoryCount:a.selectedListCount,uuid:a.uuid})}a.$el=$(".cid-"+a.elementId);if($(".cid-"+a.elementId).waitForImages){$(".cid-"+a.elementId).waitForImages(function(){a.resizeParentHeight(a.$el,b)})}else{a.resizeParentHeight(a.$el,b)}},login:function(b,a){this.transmitter.login(this,a)},logout:function(b,a){this.transmitter.logout();this.renderAfterFetch("view")},saveComment:function(b){var a=0;if(this.selectedComments&&this.selectedComments.length>0){a=this.selectedComments.length}this.transmitter.saveComment(this.uuid,this.boardId,this.selectedContentId,b,this.pageNumComment,a)},removeComment:function(a,b){this.transmitter.removeComment(this.uuid,this.boardId,this.selectedContentId,a,b,this.pageNumComment)},modifyComment:function(a,b){this.transmitter.modifyComment(this.uuid,this.boardId,this.selectedContentId,a,b)},moveCategory:function(a){this.selectedCategoryId=a;this.selectedContentId="";this.render()},moveContent:function(c,a){var b=this.pageNumList;this.selectedContentId=c;if(b<0){b=0}else{b=b-1}this.pageNum=Number(b*this.pageRowList)+Number(a)+1;this.render()},pagePre:function(){if(this.pageNum<=1){return}else{this.pageNum=this.pageNum-1;this.selectedContentId=null}this.render()},pageListPre:function(){if(this.pageNumList<=1){return}else{this.pageNumList=this.pageNumList-1}this.render()},pagePreComment:function(){if(this.pageNumComment<=1){return}else{this.pageNumComment=this.pageNumComment-1}this.render("viewComment")},pageMove:function(a){this.viewName==="view";this.pageNum=a;this.selectedContentId=null;this.render()},pageListMove:function(a){this.viewName==="viewList";this.pageNumList=a;this.render()},pageMoveComment:function(a){this.viewName==="viewComment";this.pageNumComment=a;this.render("viewComment")},pageNext:function(){this.pageNum=this.pageNum+1;this.selectedContentId=null;this.render()},pageListNext:function(){this.pageNumList=this.pageNumList+1;this.render()},pageNextComment:function(){this.pageNumComment=this.pageNumComment+1;this.render("viewComment")},resizeParentHeight:function(b,d){var h,a,g,e,f,c=470;if(b&&b.length>0){h=b.parent().parent().attr("data-idx");a=b.parent().parent().height();if(this.originHeight>0){$(".lid-"+h).css({height:this.originHeight});$(".stub-"+h).css({height:this.originHeight});a=this.originHeight}else{this.originHeight=a}g=b.height();e=b.position().top;f=g+e+65;if(d){f=f+c}if(a<f){$(".lid-"+h).css({height:f});$(".stub-"+h).css({height:f})}}}});var BoardBlogDetailView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,pagingList:null,pagingComment:null,content:null,lists:null,themeType:null,comments:null,attachFiles:null,attachFilesCount:null,isEditable:false,contentUrl:"",categorys:null,selectedCategory:null,selectedCategoryCount:0,uuid:null,languageMap:null,initialize:function(a){this._parent=a.parent;this.board=a.board;this.loginUser=a.loginUser;this.paging=a.paging,this.pagingList=a.pagingList,this.pagingComment=a.pagingComment,this.themeType=a.themeType;this.elementId=a.elementId;this.content=a.content;this.lists=a.lists;this.categorys=a.categorys;this.comments=a.comments;this.attachFiles=a.attachFiles;this.attachFilesCount=a.attachFilesCount;this.selectedCategory=a.selectedCategory;this.selectedCategoryCount=a.selectedCategoryCount;this.uuid=a.uuid;if(this.content){this.contentUrl="http://"+document.location.host+document.location.pathname+"?blid="+this.content.id}this.languageMap=this._parent.languageMap;this.render()},render:function(){var c,g,f,a,b,e,d;if(this.board){g=this.board.id;f=this.board.usePrivate;a=this.board.useReply;b=this.board.useComment;e=this.board.useAttachFile}this.$el=$(".boardblog-list",".cid-"+this.elementId);this.$el.addClass(this.themeType);c=_.template($.trim($("#ComponentBoardBlogDetailWebTemplate").html()),{id:g,isUsePrivate:f,isUseReply:a,isUseComment:b,isUseAttachFile:e,content:this.content,lists:this.lists,comments:this.comments,categorys:this.categorys,themeType:this.themeType,contentUrl:this.contentUrl,attachFiles:this.attachFiles,attachFilesCount:this.attachFilesCount,selectedCategory:this.selectedCategory,selectedCategoryCount:this.selectedCategoryCount,hasPre:this.paging.hasPre,hasNext:this.paging.hasNext,currentPageNum:this.paging.currentPageNum,pageNums:this.paging.pageNums,hasPreList:this.pagingList.hasPre,hasNextList:this.pagingList.hasNext,currentPageNumList:this.pagingList.currentPageNum,pageNumsList:this.pagingList.pageNums,hasPreComment:this.pagingComment.hasPre,hasNextComment:this.pagingComment.hasNext,currentPageNumComment:this.pagingComment.currentPageNum,pageNumsComment:this.pagingComment.pageNums,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,socialPostFix:"BL",socialIframeNVUrl:"http://api.5moments.co.kr/socialOauthNVForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BLOG",socialIframeFBUrl:"http://api.5moments.co.kr/socialOauthFB.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BLOG",socialIframeGGUrl:"http://api.5moments.co.kr/socialOauthGG.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BLOG",socialIframeTTUrl:"http://api.5moments.co.kr/socialOauthTTForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BLOG",socialIframeKKUrl:"http://api.5moments.co.kr/socialOauthKK.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_BLOG"});this.$el.html(c);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}if(this.content){d=JSON.parse(this.board.attrWeb);if(d.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(d.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(d.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(d.iconThemeActive){this.$(".wwz-icon").addClass("is-active")}}this.$el.off()},events:{"click .wwz-toggle-attach_list":"toggleAttachLayer","click .wwz-login-btn":"login","click .wwz-logout-btn":"logout","click .wwz-ctrl--toggle_login":"toggleLoginLayer","click .wwz-login-term":"loginTerm","click .wwz-copy-btn":"copy","click .wwz-new-item-write_submit":"writeComment","click .wwz-ctrl--delete_comment":"removeComment","click .wwz-ctrl--edit_comment":"openModifyCommentLayer","click .wwz-reply-item-modify_cancel":"closeModifyCommentLayer","click .wwz-reply-item-modify_submit":"modifyComment","click .wwz-ctrl--write_comment":"openReWriteCommentLayer","click .wwz-ctrl--write_cancel":"closeReWriteCommentLayer","click .wwz-ctrl--write_submit":"reWriteComment","click .wwz-toggle-contents_list":"toggleContentsList","click .wwz-toggle-category_list":"toggleCategoryList"},toggleContentsList:function(b){var a=$(b.currentTarget);if(a.hasClass("is-toggle")){this.$(".toggle-list").removeClass("is-toggle").find(".toggle-list__txt").text("목록열기");this.$(".contents-list__body").removeClass("is-toggle")}else{this.$(".toggle-list").addClass("is-toggle").find(".toggle-list__txt").text("목록닫기");this.$(".contents-list__body").addClass("is-toggle")}},toggleCategoryList:function(b){var a=$(b.currentTarget);if(a.hasClass("is-toggle")){this.$(".board-category").removeClass("is-toggle").find(".toggle-list__txt").text("목록열기")}else{this.$(".board-category").addClass("is-toggle").find(".toggle-list__txt").text("목록닫기")}a.toggleClass("is-toggle")},toggleAttachLayer:function(a){if(this.$(".wwz-attach_listbox").hasClass("is-active")){this.$(".wwz-attach_listbox").removeClass("is-active")}else{this.$(".wwz-attach_listbox").addClass("is-active")}},loginTerm:function(b){var a="http://5moments.co.kr/comember/joinTerm.wwz";window.open(a+"?uuid="+this.uuid,"_blank");if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}},toggleLoginLayer:function(c){var a=$(c.target),b=this.$(".wwz-login-layer");if(a.hasClass("ctrl-btn")){if(a.hasClass("is-active")){b.hide();a.removeClass("is-active")}else{b.show();a.addClass("is-active")}}if(a.hasClass("is-active")){$(document).on("mouseup."+this.elementId,function(d){if($(d.target).is(a)){return}if(!b.is($(d.target))&&b.has($(d.target)).length===0){b.hide();a.removeClass("is-active");$(document).off("mouseup."+this.elementId)}})}},login:function(b){var a=$(b.target);if(a.hasClass("is-naver")){this._parent.login(b,"NAVER")}else{if(a.hasClass("is-facebook")){this._parent.login(b,"FACEBOOK")}else{if(a.hasClass("is-google")){this._parent.login(b,"GOOGLE")}else{if(a.hasClass("is-twitter")){this._parent.login(b,"TWITTER")}else{if(a.hasClass("is-kakao")){this._parent.login(b,"KAKAO")}else{return}}}}}},logout:function(){this._parent.logout()},copy:function(b){var a=this.$(".wwz-copy-address").text();if(window.clipboardData){window.clipboardData.setData("Text",a);alert(this.languageMap.copyUrl)}else{window.prompt(this.languageMap.copyUrlGuide,a)}},writeComment:function(d){var b,a,c;if(this.loginUser.isLogin){b=this.$(".wwz-new-item-private_mode").prop("checked");a=this.$(".wwz-new-item-write_textarea").val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}c={};c.contentHtml=a;c["private"]=b;c.isLast=false;this._parent.saveComment(c)}else{alert(this.languageMap.loginAlert);return}},removeComment:function(d){var c=$(d.target),f=c.attr("data-idx"),b=false,a;if(confirm("삭제하시겠습니까?")){if(f&&f.length>0&&this.loginUser.isLogin){if(this.comments&&this.comments.length>0){a=this.comments[this.comments.length-1];if(a.id==f){b=true}}this._parent.removeComment(f,b)}}},openModifyCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();this.$(".wwz-reply-item-"+c+" .reply-item-body").addClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el,false)}},closeModifyCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.$(".wwz-reply-item-"+c+" .reply-item-body").removeClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el,false)}},modifyComment:function(c){var b=$(c.target),d=b.attr("data-idx"),a;if(d&&d.length>0&&this.loginUser.isLogin){a=$(".wwz-reply-item-modify_textarea",".boardblog-list .wwz-reply-item-"+d).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}obj={};obj.contentHtml=a;this._parent.modifyComment(d,obj)}},openReWriteCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();this.$(".wwz-reply-item-write-"+c).addClass("is-active");this._parent.resizeParentHeight(this._parent.$el,false)}},closeReWriteCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.$(".wwz-reply-item-write-"+c).removeClass("is-active");this._parent.resizeParentHeight(this._parent.$el,false)}},reWriteComment:function(g){var f=$(g.target),h=f.attr("data-idx"),c,a,d,b;if(h&&h.length>0&&this.loginUser.isLogin){c=$("#private_mode",".boardblog-list .wwz-reply-item-write-"+h).prop("checked");a=$(".wwz-ctrl--write_textarea",".boardblog-list .wwz-reply-item-write-"+h).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}d={};d.contentHtml=a;d["private"]=c;d.parentId=h;d.isLast=false;if(this.comments&&this.comments.length>0){b=this.comments[this.comments.length-1];if(b.id==h&&this.comments.length==this.board.pageRow){d.isLast=true}}this._parent.saveComment(d)}else{alert(this.languageMap.loginAlert);return}},closeAllLayer:function(){this.$(".reply-item-body").removeClass("is-edit-mode");this.$(".reply-item-write").not(".reply-item-write--new").removeClass("is-active")}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("BoardPremiumClient").body({staticVal:{_singleton:null,getInstance:function(){if(BoardPremiumClient._singleton==null){BoardPremiumClient._singleton=new BoardPremiumClient()}return BoardPremiumClient._singleton}},BoardPremiumClient:function(){},usePrivate:false,useComment:false,useReply:false,useAttachFile:false,attachFileLimitAmount:10,attachFileLimitCount:3,$el:null,uuid:null,id:null,board:null,loginUser:{},paging:null,pageNum:1,pageRow:15,pagingComment:null,pageNumComment:-1,pageRowComment:15,transmitter:null,elementId:null,originHeight:0,viewList:{},contentKey:null,searchVal:"",selectedContentId:null,selectedContent:null,selectedComments:null,selectedCommentsCount:0,selectedAttachFiles:null,selectedAttachFilesCount:0,selectedIsEditable:false,_currnetViewName:"",_attachFileIdx:0,isIe9Under:false,pageRowCount:0,languageList:{KR:{emptyAlert:"내용을 입력하세요",titleAlert:"제목을 입력하세요",loginAlert:"소셜 로그인 이후에 등록 할 수 있습니다",removeAlert:"삭제하시겠습니까?",privateAlert:"비밀글에 대한 답글은 비밀글로만 작성할 수 있습니다",copyUrl:"게시물 주소가 복사되었습니다",copyUrlGuide:"CTRL + C를 누르면 주소를 복사할 수 있습니다"},EN:{emptyAlert:"Please enter comments",titleAlert:"Please enter title",loginAlert:"Please SNS login first",removeAlert:"Delete this comment?",privateAlert:"Only private reply is allowed",copyUrl:"Url is copied to clipboard",copyUrlGuide:"Please Press CTRL + C"}},languageMap:null,initialize:function(g,e,j,k,f,l,h,i,a,d){var c=window.location.href,b;this.elementId=g;this.pageRow=parseInt(e);this.usePrivate=j;this.useComment=k;this.useReply=f;this.useAttachFile=l;this.attachFileLimitAmount=h;this.attachFileLimitCount=i;this.uuid=a;this.id=d;if($(".ie-detection").hasClass("ie8")||$(".ie-detection").hasClass("ie9")){this.isIe9Under=true}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.transmitter=DataBoardPremiumTransmitterForIe.getInstance()}else{this.transmitter=DataBoardPremiumTransmitter.getInstance()}this.transmitter.setTargetClient(this);b=c.substring(c.indexOf("?bpid=")+6);if(b&&b.length>0&&$.isNumeric(b)){this.selectedContentId=b;this.render("directView")}else{this.render()}},render:function(b){var a=this;if(!b||b==="list"){this._currnetViewName="list";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetch(a,a.id,a.uuid,a.pageNum,a.pageRow,a.searchVal)}else{$.when(a.transmitter.initLoginAndFetch(a,a.id,a.uuid,a.pageNum,a.pageRow,a.searchVal)).then(function(){a.renderAfterFetch("list")})}}else{if(b==="view"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetchContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)}else{$.when(a.transmitter.initLoginAndFetchContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)).then(function(){a.renderAfterFetch("view")})}}else{if(b==="directView"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetchBoardAndContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)}else{$.when(a.transmitter.initLoginAndFetchBoardAndContent(a,a.id,a.selectedContentId,a.uuid,a.pageNumComment,a.pageRowComment)).then(function(){a.renderAfterFetch("view")})}}else{if(b==="viewComment"){this._currnetViewName="view";if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchComment(a,a.id,a.selectedContentId,a.uuid,a.useComment,a.pageNumComment,a.pageRowComment)}else{$.when(a.transmitter.fetchComment(a,a.id,a.selectedContentId,a.uuid,a.useComment,a.pageNumComment,a.pageRowComment)).then(function(){a.renderAfterFetch("viewComment")})}}else{if(b==="write"){this._currnetViewName="write";a.loginUser=a.transmitter.loginUser();if(!this.loginUser||!this.loginUser.isLogin){return}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchKey(a,a.id,a.uuid)}else{$.when(a.transmitter.fetchKey(a,a.id,a.uuid)).then(function(){a.renderAfterFetch("write")})}}else{if(b==="reply"){this._currnetViewName="reply";a.loginUser=a.transmitter.loginUser();if(!this.loginUser||!this.loginUser.isLogin){return}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchKey(a,a.id,a.uuid)}else{$.when(a.transmitter.fetchKey(a,a.id,a.uuid)).then(function(){a.renderAfterFetch("reply")})}}else{if(b==="modify"){this._currnetViewName="modify";a.loginUser=a.transmitter.loginUser();if(!a.selectedContentId||!this.loginUser||!this.loginUser.isLogin){return}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.fetchKey(a,a.id,a.uuid)}else{$.when(a.transmitter.fetchKey(a,a.id,a.uuid)).then(function(){a.renderAfterFetch("modify")})}}}}}}}}},renderAfterFetch:function(d){var b=this,c=false,a={};b.loginUser=b.transmitter.loginUser();if(d=="list"){if(this.board&&this.board.attrListWeb){a=JSON.parse(this.board.attrListWeb)}b.languageMap=b.languageList[a.language];b.paging=b.transmitter.paging(b.pageNum,b.pageRow,b.board.totalCount);new BoardPremiumListView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,searchVal:b.searchVal,uuid:b.uuid})}else{if(d=="view"||d=="viewComment"){if(this.board&&this.board.attrViewWeb){a=JSON.parse(this.board.attrViewWeb)}b.languageMap=b.languageList[a.language];b.pagingComment=b.transmitter.paging(b.pageNumComment,b.pageRowComment,b.selectedCommentsCount);new BoardPremiumDetailView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.pagingComment,elementId:b.elementId,content:b.selectedContent,comments:b.selectedComments,attachFiles:b.selectedAttachFiles,attachFilesCount:b.selectedAttachFilesCount||0,isEditable:b.selectedIsEditable,uuid:b.uuid})}else{if(d=="write"){if(this.board&&this.board.attrWriteWeb){a=JSON.parse(this.board.attrWriteWeb)}b.languageMap=b.languageList[a.language];if(!b.contentKey||b.contentKey.length!=10){return}new BoardPremiumWriteView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,contentKey:b.contentKey,uuid:b.uuid,attachFiles:[],attachFilesCount:0,attachFilesSize:b.selectedAttachFilesSize,attachFilesFormatSize:b.selectedAttachFilesFormatSize,});c=true}else{if(d=="reply"){if(this.board&&this.board.attrWriteWeb){a=JSON.parse(this.board.attrWriteWeb)}b.languageMap=b.languageList[a.language];if(!b.contentKey||b.contentKey.length!=10){return}new BoardPremiumWriteView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,contentId:b.selectedContentId,contentKey:b.contentKey,uuid:b.uuid,attachFiles:[],attachFilesCount:0,attachFilesSize:b.selectedAttachFilesSize,attachFilesFormatSize:b.selectedAttachFilesFormatSize,isReply:true,});c=true}else{if(d=="modify"){if(this.board&&this.board.attrWriteWeb){a=JSON.parse(this.board.attrWriteWeb)}b.languageMap=b.languageList[a.language];if(!b.contentKey||b.contentKey.length!=10){return}new BoardPremiumWriteView({parent:b,board:b.board,loginUser:b.loginUser,paging:b.paging,elementId:b.elementId,contentId:b.selectedContentId,contentKey:b.contentKey,content:b.selectedContent,uuid:b.uuid,attachFiles:b.selectedAttachFiles,attachFilesCount:b.selectedAttachFilesCount,attachFilesSize:b.selectedAttachFilesSize,attachFilesFormatSize:b.selectedAttachFilesFormatSize,});c=true}}}}}b.$el=$(".cid-"+b.elementId);if($(".cid-"+b.elementId).waitForImages){$(".cid-"+b.elementId).waitForImages(function(){b.resizeParentHeight(b.$el,c)})}else{b.resizeParentHeight(b.$el,c)}},login:function(b,a){this.transmitter.login(this,a)},logout:function(b,a){this.transmitter.logout();this.render("list")},save:function(){this.transmitter.save(this.uuid,this.id,this.contentKey,"",false)},saveComment:function(b){var a=0;if(this.selectedComments&&this.selectedComments.length>0){a=this.selectedComments.length}this.transmitter.saveComment(this.uuid,this.id,this.selectedContentId,b,this.pageNumComment,a)},reply:function(a){this.transmitter.save(this.uuid,this.id,this.contentKey,a)},remove:function(a){this.transmitter.remove(this.uuid,this.id,a)},removeComment:function(a,b){this.transmitter.removeComment(this.uuid,this.id,this.selectedContentId,a,b,this.pageNumComment)},removeAttach:function(g,a){var c=this,e=this.$el.find("#deletedAttachFileId").val(),d,f,b;if(!g&&g.length<1){return}if(!this._attachFileIdx||this._attachFileIdx<this.attachFileLimitCount){this._attachFileIdx=this.attachFileLimitCount}this._attachFileIdx=this._attachFileIdx+1;d=_.template($.trim($("#CommonFileInputTemplate").html()),{idx:this._attachFileIdx});this.$el.find("#attach_"+g).remove();this.$el.find("#attach_parent").append(d);e=e+","+g;this.$el.find("#deletedAttachFileId").val(e);f=parseInt(this.$el.find(".wwz-attach-files_count").text());if(f>0){f--}this.$el.find(".wwz-attach-files_count").text(f);b=parseInt(this.$el.find(".wwz-attach-files_size").data("origin"))-parseInt(a);this.$el.find(".wwz-attach-files_size").data("origin",b).text(this.convertFormatSize(b))},resetFile:function(b){var a=$(document.getElementById(b));if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.resetFileForIE(a)}else{this.resetFileForNonIE(a)}},resetFileForIE:function(a){var b=a.parent().parent();a.val(null);b.removeClass("is-file_selected");b.find(".file-name--temp").text("")},resetFileForNonIE:function(c,f){var a=c,e=document.getElementById(c.attr("id")).files[0],d=a.parent().parent(),b;a.val(null);d.removeClass("is-file_selected");d.find(".file-name--temp").text("");b=parseInt($(".wwz-attach-files_count").text());if(b>0){b--}$(".wwz-attach-files_count").text(b);currentSize=parseInt($(".wwz-attach-files_size").data("origin"))-parseInt(e.size);$(".wwz-attach-files_size").data("origin",currentSize).text(this.convertFormatSize(currentSize))},registFileForIE:function(b){var c=b.parent().parent(),a;a=b.val().split("\\").pop();c.addClass("is-file_selected");c.find(".file-name--temp").text(a)},registFileForNonIE:function(a){var b=a.parent().parent(),d,c;c=document.getElementById(a.attr("id")).files[0];currentSize=parseInt(this.$el.find(".wwz-attach-files_size").data("origin"))+parseInt(c.size);b.addClass("is-file_selected");b.find(".file-name--temp").text(c.name);currentCount=parseInt(this.$el.find(".wwz-attach-files_count").text());d=parseInt(this.$el.find(".wwz-attach-files_max_count").text());if(currentCount<d){currentCount++}this.$el.find(".wwz-attach-files_count").text(currentCount);this.$el.find(".wwz-attach-files_size").data("origin",currentSize).text(this.convertFormatSize(currentSize))},modify:function(a){this.transmitter.modify(this.uuid,this.id,a,this.contentKey,false)},modifyComment:function(a,b){this.transmitter.modifyComment(this.uuid,this.id,this.selectedContentId,a,b)},search:function(a){this.searchVal=a;this.pageNum=1;this.render()},pagePre:function(){if(this.pageNum<=1){return}else{this.pageNum=this.pageNum-1}this.render()},pagePreComment:function(){var a=this;if(!this.useComment){return}if(this.pageNumComment<=1){return}else{this.pageNumComment=this.pageNumComment-1}this.render("viewComment")},pageMove:function(a){this.pageNum=a;this.render()},pageMoveComment:function(b){var a=this;if(!this.useComment){return}this.pageNumComment=b;this.render("viewComment")},pageNext:function(){this.pageNum=this.pageNum+1;this.render()},pageNextComment:function(){var a=this;if(!this.useComment){return}this.pageNumComment=this.pageNumComment+1;this.render("viewComment")},resizeParentHeight:function(b,d){var h,a,g,e,f,c=470;if(b&&b.length>0){h=b.parent().parent().attr("data-idx");a=b.parent().parent().height();if(this.originHeight>0){$(".lid-"+h).css({height:this.originHeight});$(".stub-"+h).css({height:this.originHeight});a=this.originHeight}else{this.originHeight=a}g=b.height();e=b.position().top;f=g+e+65;if(d){f=f+c}if(a<f){$(".lid-"+h).css({height:f});$(".stub-"+h).css({height:f})}}},convertFormatSize:function(a){var d=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],b=1024,c;if(a<1024){return"0KB"}c=Math.floor(Math.log(a)/Math.log(1024));if(c===0){c++}return(a/Math.pow(b,c)).toPrecision(3)+""+d[c]},});var BoardPremiumListView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,searchVal:"",uuid:null,languageMap:null,initialize:function(a){this._parent=a.parent;this.board=a.board;this.loginUser=a.loginUser;this.paging=a.paging,this.elementId=a.elementId;this.searchVal=a.searchVal;this.uuid=a.uuid;this.languageMap=this._parent.languageMap;this.render()},render:function(){var j,e=this.board.contents,l=this,i,c="",k=0,f=false,b=false,a=false,g=0,h=0,d;this.$el=$(".boardpremium-list",".cid-"+this.elementId);this.$el.addClass(this.board.themeType);if(this.searchVal&&this.searchVal.length>=2){i=new RegExp(this.searchVal,"ig");$.each(e,function(m,n){if(n.title.indexOf(l.searchVal)>-1){n.title=n.title.replace(i,"<b>"+l.searchVal+"</b>")}})}if(this.board){c=this.board.id;k=this.board.totalCount;f=this.board.usePrivate;b=this.board.useReply;a=this.board.useAttachFile;g=this.board.attachFileLimitAmount;h=this.board.attachFileLimitCount}j=_.template($.trim($("#ComponentBoardPremiumListWebTemplate").html()),{id:c,totalCount:k,isUsePrivate:f,isUseReply:b,isUseAttachFile:a,attachFileLimitAmount:g,attachFileLimitCount:h,contents:e,searchVal:this.searchVal,hasPre:this.paging.hasPre,hasNext:this.paging.hasNext,currentPageNum:this.paging.currentPageNum,pageNums:this.paging.pageNums,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,socialPostFix:"BP",socialIframeNVUrl:"http://api.5moments.co.kr/socialOauthNVForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeFBUrl:"http://api.5moments.co.kr/socialOauthFB.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeGGUrl:"http://api.5moments.co.kr/socialOauthGG.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeTTUrl:"http://api.5moments.co.kr/socialOauthTTForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeKKUrl:"http://api.5moments.co.kr/socialOauthKK.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM"});this.$el.html(j);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}d=JSON.parse(this.board.attrListWeb);if(d.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(d.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(d.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(d.searchThemeActive){this.$(".wwz-search").addClass("is-active")}this.$el.off()},events:{"click .list-item":"view","click .wwz-login-btn":"login","click .wwz-logout-btn":"logout","click .wwz-ctrl--toggle_login":"toggleLoginLayer","click .wwz-login-term":"loginTerm","click .wwz-write-btn":"write","click .wwz-search-btn":"search","keyup .search-input":"searchByKey",},view:function(c){var b=$(c.target),a=b.attr("data-idx");if(!a||a.length<1){return}this._parent.selectedContentId=a;this._parent.render("view")},loginTerm:function(b){var a="http://5moments.co.kr/comember/joinTerm.wwz";window.open(a+"?uuid="+this.uuid,"_blank");if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}},toggleLoginLayer:function(c){var a=$(c.target),b=this.$(".wwz-login-layer");if(a.hasClass("ctrl-btn")){if(a.hasClass("is-active")){b.hide();a.removeClass("is-active")}else{b.show();a.addClass("is-active")}}if(a.hasClass("is-active")){$(document).on("mouseup."+this.elementId,function(d){if($(d.target).is(a)){return}if(!b.is($(d.target))&&b.has($(d.target)).length===0){b.hide();a.removeClass("is-active");$(document).off("mouseup."+this.elementId)}})}},login:function(b){var a=$(b.target);if(a.hasClass("is-naver")){this._parent.login(b,"NAVER")}else{if(a.hasClass("is-facebook")){this._parent.login(b,"FACEBOOK")}else{if(a.hasClass("is-google")){this._parent.login(b,"GOOGLE")}else{if(a.hasClass("is-twitter")){this._parent.login(b,"TWITTER")}else{if(a.hasClass("is-kakao")){this._parent.login(b,"KAKAO")}else{return}}}}}},logout:function(){this._parent.logout()},write:function(a){if(this.loginUser.isLogin){this._parent.render("write")}else{alert(this.languageMap.loginAlert);return}},searchByKey:function(b){var a=(b.keyCode?b.keyCode:b.which);if(a===13){this.search()}},search:function(b){var a=this.$("#wwz-search-txt").val();this._parent.search(a)},getStringLength:function(e){var d=0,a,c,b;for(a=0;a<e.length;a++){c=parseInt(e.charCodeAt(a));b=e.substr(a,1).toUpperCase();if((b<"0"||b>"9")&&(b<"A"||b>"Z")&&((c>255)||(c<0))){d=d+2}else{d=d+1}}return d}});var BoardPremiumDetailView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,content:null,comments:null,attachFiles:null,attachFilesCount:null,isEditable:false,contentUrl:"",uuid:null,languageMap:null,initialize:function(a){this._parent=a.parent;this.board=a.board;this.loginUser=a.loginUser;this.paging=a.paging,this.elementId=a.elementId;this.content=a.content;this.comments=a.comments;this.attachFiles=a.attachFiles;this.attachFilesCount=a.attachFilesCount;this.isEditable=a.isEditable||false;this.contentUrl="http://"+document.location.host+document.location.pathname+"?bpid="+this.content.id;this.uuid=a.uuid;this.languageMap=this._parent.languageMap;this.render()},render:function(){var j,d,f,b,g,a,h,i,c,e;if(this.board){d=this.board.id;f=this.board.usePrivate;b=this.board.useReply;g=this.board.useComment;a=this.board.useAttachFile;h=this.board.attachFileLimitAmount;i=this.board.attachFileLimitCount;c=this.board.themeType}else{d=this.content.boardId;f=this.content.usePrivate;b=this.content.useReply;g=this.content.useComment;a=this.content.useAttachFile;h=this.content.attachFileLimitAmount;i=this.content.attachFileLimitCount;c=this.content.themeType}this.$el=$(".boardpremium-list",".cid-"+this.elementId);this.$el.addClass(c);j=_.template($.trim($("#ComponentBoardPremiumDetailWebTemplate").html()),{id:d,isUsePrivate:f,isUseReply:b,isUseComment:g,isUseAttachFile:a,attachFileLimitAmount:h,attachFileLimitCount:i,content:this.content,comments:this.comments,themeType:c,contentUrl:this.contentUrl,isEditable:this.isEditable,attachFiles:this.attachFiles,attachFilesCount:this.attachFilesCount,hasPre:this.paging.hasPre,hasNext:this.paging.hasNext,currentPageNum:this.paging.currentPageNum,pageNums:this.paging.pageNums,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,socialPostFix:"BP",socialIframeNVUrl:"http://api.5moments.co.kr/socialOauthNVForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeFBUrl:"http://api.5moments.co.kr/socialOauthFB.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeGGUrl:"http://api.5moments.co.kr/socialOauthGG.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeTTUrl:"http://api.5moments.co.kr/socialOauthTTForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM",socialIframeKKUrl:"http://api.5moments.co.kr/socialOauthKK.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_PREMIUM"});this.$el.html(j);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}e=JSON.parse(this.board.attrListWeb);if(e.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(e.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(e.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(e.searchThemeActive){this.$(".wwz-search").addClass("is-active")}this.$el.off()},events:{"click .wwz-list-btn":"list","click .wwz-toggle-attach_list":"toggleAttachLayer","click .wwz-login-btn":"login","click .wwz-logout-btn":"logout","click .wwz-ctrl--toggle_login":"toggleLoginLayer","click .wwz-login-term":"loginTerm","click .wwz-modify-btn":"modifyView","click .wwz-delete-btn":"remove","click .wwz-reply-btn":"replyView","click .wwz-copy-btn":"copy","click .wwz-new-item-write_submit":"writeComment","click .wwz-ctrl--delete_comment":"removeComment","click .wwz-ctrl--edit_comment":"openModifyCommentLayer","click .wwz-reply-item-modify_cancel":"closeModifyCommentLayer","click .wwz-reply-item-modify_submit":"modifyComment","click .wwz-ctrl--write_comment":"openReWriteCommentLayer","click .wwz-ctrl--write_cancel":"closeReWriteCommentLayer","click .wwz-ctrl--write_submit":"reWriteComment","click .wwz-item-private_btn":"checkInheritPrivate",},list:function(a){this._parent.selectedContentId=null;this._parent.selectedContent=null;this._parent.selectedComments=null;this._parent.selectedAttachFiles=null;this._parent.selectedAttachFilesCount=null;this._parent.selectedIsEditable=null;this._parent.contentKey=null;this._parent.render()},toggleAttachLayer:function(a){if(this.$(".wwz-attach_listbox").hasClass("is-active")){this.$(".wwz-attach_listbox").removeClass("is-active")}else{this.$(".wwz-attach_listbox").addClass("is-active")}},loginTerm:function(b){var a="http://5moments.co.kr/comember/joinTerm.wwz";window.open(a+"?uuid="+this.uuid,"_blank");if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}},toggleLoginLayer:function(c){var a=$(c.target),b=this.$(".wwz-login-layer");if(a.hasClass("ctrl-btn")){if(a.hasClass("is-active")){b.hide();a.removeClass("is-active")}else{b.show();a.addClass("is-active")}}if(a.hasClass("is-active")){$(document).on("mouseup."+this.elementId,function(d){if($(d.target).is(a)){return}if(!b.is($(d.target))&&b.has($(d.target)).length===0){b.hide();a.removeClass("is-active");$(document).off("mouseup."+this.elementId)}})}},login:function(b){var a=$(b.target);if(a.hasClass("is-naver")){this._parent.login(b,"NAVER")}else{if(a.hasClass("is-facebook")){this._parent.login(b,"FACEBOOK")}else{if(a.hasClass("is-google")){this._parent.login(b,"GOOGLE")}else{if(a.hasClass("is-twitter")){this._parent.login(b,"TWITTER")}else{if(a.hasClass("is-kakao")){this._parent.login(b,"KAKAO")}else{return}}}}}},logout:function(){this._parent.logout()},remove:function(a){if(this.loginUser.isLogin){this._parent.remove(this._parent.selectedContentId)}},modifyView:function(a){if(this.loginUser.isLogin){this._parent.render("modify")}},replyView:function(a){if(this.loginUser.isLogin){this._parent.render("reply")}},copy:function(b){var a=this.$(".wwz-copy-address").text();if(window.clipboardData){window.clipboardData.setData("Text",a);alert(this.languageMap.copyUrl)}else{window.prompt(this.languageMap.copyUrlGuide,a)}},writeComment:function(d){var b,a,c;if(this.loginUser.isLogin){b=this.$(".wwz-new-item-private_mode").prop("checked");a=this.$(".wwz-new-item-write_textarea").val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}c={};c.contentHtml=a;c["private"]=b;c.isLast=false;this._parent.saveComment(c)}else{alert(this.languageMap.loginAlert);return}},removeComment:function(d){var c=$(d.target),f=c.attr("data-idx"),b=false,a;if(confirm("삭제하시겠습니까?")){if(f&&f.length>0&&this.loginUser.isLogin){if(this.comments&&this.comments.length>0){a=this.comments[this.comments.length-1];if(a.id==f){b=true}}this._parent.removeComment(f,b)}}},openModifyCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();this.$(".wwz-reply-item-"+c+" .reply-item-body").addClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el,false)}},closeModifyCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.$(".wwz-reply-item-"+c+" .reply-item-body").removeClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el,false)}},modifyComment:function(c){var b=$(c.target),d=b.attr("data-idx"),a;if(d&&d.length>0&&this.loginUser.isLogin){a=$(".wwz-reply-item-modify_textarea",".boardpremium-list .wwz-reply-item-"+d).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}obj={};obj.contentHtml=a;this._parent.modifyComment(d,obj)}},openReWriteCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();this.$(".wwz-reply-item-write-"+c).addClass("is-active");this._parent.resizeParentHeight(this._parent.$el,false)}},closeReWriteCommentLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.$(".wwz-reply-item-write-"+c).removeClass("is-active");this._parent.resizeParentHeight(this._parent.$el,false)}},reWriteComment:function(g){var f=$(g.target),h=f.attr("data-idx"),c,a,d,b;if(h&&h.length>0&&this.loginUser.isLogin){c=$("#private_mode",".boardpremium-list .wwz-reply-item-write-"+h).prop("checked");a=$(".wwz-ctrl--write_textarea",".boardpremium-list .wwz-reply-item-write-"+h).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}d={};d.contentHtml=a;d["private"]=c;d.parentId=h;d.isLast=false;if(this.comments&&this.comments.length>0){b=this.comments[this.comments.length-1];if(b.id==h&&this.comments.length==this.board.pageRow){d.isLast=true}}this._parent.saveComment(d)}else{alert(this.languageMap.loginAlert);return}},checkInheritPrivate:function(b){var a=$(b.currentTarget);if(a.hasClass("is-parent_private")){if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}alert(this.languageMap.privateAlert)}},closeAllLayer:function(){this.$(".reply-item-body").removeClass("is-edit-mode");this.$(".reply-item-write").not(".reply-item-write--new").removeClass("is-active")}});var BoardPremiumWriteView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,contentId:null,content:null,contentKey:null,uuid:null,oEditors:[],attachFiles:null,attachFilesCount:null,isReply:false,isIe9Under:false,uuid:null,languageMap:null,initialize:function(b){var a=this;this._parent=b.parent;this.board=b.board;this.loginUser=b.loginUser;this.paging=b.paging,this.elementId=b.elementId;this.contentId=b.contentId;this.contentKey=b.contentKey;this.content=b.content;this.uuid=b.uuid;this.attachFiles=b.attachFiles;this.attachFilesCount=b.attachFilesCount;this.attachFilesSize=b.attachFilesSize||0;this.attachFilesFormatSize=b.attachFilesFormatSize||"0KB";this.isReply=b.isReply||false;this.uuid=b.uuid;if($(".ie-detection").hasClass("ie8")||$(".ie-detection").hasClass("ie9")){this.isIe9Under=true}if(a.contentId&&!this.isReply){if(!this.content){$.each(a.board.contents,function(c,d){if(d.id==a.contentId){a.content=d}})}}this.languageMap=this._parent.languageMap;this.render()},render:function(){var c,b,a=this,d;this.$el=$(".boardpremium-list",".cid-"+this.elementId);this.$el.addClass(this.board.themeType);c=_.template($.trim($("#ComponentBoardPremiumWriteWebTemplate").html()),{id:this.board.id,totalCount:this.board.totalCount,isUsePrivate:this.board.usePrivate,isUseReply:this.board.useReply,isUseAttachFile:this.board.useAttachFile,attachFileLimitAmount:this.board.attachFileLimitAmount,attachFileLimitCount:this.board.attachFileLimitCount,content:this.content,attachFiles:this.attachFiles,attachFilesCount:this.attachFilesCount,attachFilesSize:this.attachFilesSize,attachFilesFormatSize:this.attachFilesFormatSize,remainAttachCount:this.board.attachFileLimitCount-this.attachFilesCount,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,elementId:this.elementId});this.$el.html(c);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}d=JSON.parse(this.board.attrListWeb);if(d.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(d.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(d.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}if(d.searchThemeActive){this.$(".wwz-search").addClass("is-active")}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.$(".attach_file-header .info-list").hide()}b="/smartEditor/SmartEditor2SkinPremium.html?id="+this.board.id+"&key="+this.contentKey+"&uuid="+this.uuid;nhn.husky.EZCreator.createInIFrame({oAppRef:a.oEditors,elPlaceHolder:"ir1_"+this.elementId,sSkinURI:b,htParams:{bUseToolbar:true,bUseVerticalResizer:true,bUseModeChanger:true,fOnBeforeUnload:function(){}},fOnAppLoad:function(){try{var f=jQuery("#"+a.elementId).find(".write-body-wrap").find("iframe")[0];if(f.contentWindow.initBodyImage){f.contentWindow.initBodyImage()}}catch(g){}},fCreator:"createSEditor2"});this.$el.off()},events:{"click .wwz-list-btn":"list","click .wwz-toggle-private_mode":"togglePrivateMode","click .wwz-write-btn":"write","change .file-upload-input":"registFileByView",},list:function(a){this._parent.selectedContentId=null;this._parent.selectedContent=null;this._parent.selectedComments=null;this._parent.selectedAttachFiles=null;this._parent.selectedAttachFilesCount=null;this._parent.selectedIsEditable=null;this._parent.contentKey=null;this._parent.render()},togglePrivateMode:function(a){if(this.$(".wwz-toggle-private_mode").hasClass("is-active")){this.$(".wwz-toggle-private_mode").removeClass("is-active")}else{this.$(".wwz-toggle-private_mode").addClass("is-active")}},write:function(b){var c,a;if(this.loginUser.isLogin){this.oEditors.getById["ir1_"+this.elementId].exec("UPDATE_CONTENTS_FIELD",[]);c=this.$("#title").val();a=this.$("#ir1_"+this.elementId).val();if(!c||c.length<1){alert(this.languageMap.titleAlert);return}if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}if(!this.board.usePrivate){this.$("#input_prive").prop("checked",false)}if(this.contentId&&this.contentId.length>0){if(this.isReply){this._parent.reply(this.contentId)}else{this._parent.modify(this.contentId)}}else{this._parent.save()}}else{alert(this.languageMap.loginAlert);return}},registFileByView:function(b){var a=$(b.currentTarget);if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this._parent.registFileForIE(a)}else{this._parent.registFileForNonIE(a)}}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("BoardReplyClient").body({staticVal:{_singleton:null,getInstance:function(){if(BoardReplyClient._singleton==null){BoardReplyClient._singleton=new BoardReplyClient()}return BoardReplyClient._singleton}},BoardReplyClient:function(){},pageRow:15,usePrivate:false,$el:null,uuid:null,id:null,board:null,loginUser:null,paging:null,pageNum:-1,transmitter:null,elementId:null,originHeight:0,isIe9Under:false,pageRowCount:0,isRefreshing:false,languageList:{KR:{emptyAlert:"내용을 입력하세요",loginAlert:"소셜 로그인 이후에 등록 할 수 있습니다",removeAlert:"삭제하시겠습니까?",privateAlert:"비밀글에 대한 답글은 비밀글로만 작성할 수 있습니다"},EN:{emptyAlert:"Please enter comments",loginAlert:"Please SNS login first",removeAlert:"Delete this comment?",privateAlert:"Only private reply is allowed"}},languageMap:null,initialize:function(c,b,a,d,e){this.elementId=c;this.pageRow=parseInt(b);this.usePrivate=a;this.uuid=d;this.id=e;if($(".ie-detection").hasClass("ie8")||$(".ie-detection").hasClass("ie9")){this.isIe9Under=true}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.transmitter=DataBoardReplyTransmitterForIe.getInstance()}else{this.transmitter=DataBoardReplyTransmitter.getInstance()}this.transmitter.setTargetClient(this);this.render()},render:function(){var a=this;if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){a.transmitter.initLoginAndFetch(a,a.id,a.uuid,a.pageNum,a.pageRow,false)}else{$.when(a.transmitter.initLoginAndFetch(a,a.id,a.uuid,a.pageNum,a.pageRow,false)).then(function(){a.renderAfterFetch()})}},renderAfterFetch:function(){var a=JSON.parse(this.board.attrListWeb);this.loginUser=this.transmitter.loginUser();this.paging=this.transmitter.paging(this.pageNum,this.pageRow,this.board.totalCount);this.languageMap=this.languageList[a.language];new BoardReplyView({parent:this,board:this.board,loginUser:this.loginUser,paging:this.paging,elementId:this.elementId,uuid:this.uuid});this.$el=$(".cid-"+this.elementId);this.resizeParentHeight(this.$el);this.isRefreshing=false},login:function(b,a){this.transmitter.login(this,a)},logout:function(b,a){this.transmitter.logout();this.renderAfterFetch()},save:function(b){var a=0;if(this.board.contents&&this.board.contents.length>0){a=this.board.contents.length}this.transmitter.save(this.uuid,this.id,b,this.pageNum,a)},remove:function(b,a){this.transmitter.remove(this.uuid,this.id,b,a,this.pageNum)},modify:function(b,a){this.transmitter.modify(this.uuid,this.id,b,a)},pagePreComment:function(){if(this.pageNum<=1){return}else{this.pageNum=this.pageNum-1}this.render()},pageMoveComment:function(a){this.pageNum=a;this.render()},pageNextComment:function(){this.pageNum=this.pageNum+1;this.render()},resizeParentHeight:function(b){var f,a,e,c,d;if(b&&b.length>0){f=b.parent().parent().attr("data-idx");a=b.parent().parent().height();if(this.originHeight>0){$(".lid-"+f).css({height:this.originHeight});$(".stub-"+f).css({height:this.originHeight});a=this.originHeight}else{this.originHeight=a}e=b.height();c=b.position().top;if(a<(e+c+65)){d=e+c+65;$(".lid-"+f).css({height:d});$(".stub-"+f).css({height:d})}}}});var BoardReplyView=Backbone.View.extend({_parent:null,elementId:null,board:null,loginUser:null,paging:null,uuid:null,languageMap:null,initialize:function(a){var b=$("#ComponentBoardReplyWebTemplate").html();this.template=_.template($.trim(b));this._parent=a.parent;this.board=a.board;this.loginUser=a.loginUser;this.paging=a.paging,this.elementId=a.elementId;this.uuid=a.uuid;this.languageMap=this._parent.languageMap;this.render()},render:function(){var a,b;this.$el=$(".board-reply-body",".cid-"+this.elementId);this.$el.addClass(this.board.themeType);a=this.template({id:this.board.id,totalCount:this.board.totalCount,isUsePrivate:this.board.usePrivate,comments:this.board.contents,themeType:this.board.themeType,hasPre:this.paging.hasPre,hasNext:this.paging.hasNext,currentPageNum:this.paging.currentPageNum,pageNums:this.paging.pageNums,isLogin:this.loginUser.isLogin,loginProfileImg:(this.loginUser.loginProfileImg!=="null")?this.loginUser.loginProfileImg:false,loginName:this.loginUser.loginName,loginReferCss:this.loginUser.loginReferClass,socialPostFix:"BR",socialIframeNVUrl:"http://api.5moments.co.kr/socialOauthNVForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_REPLY",socialIframeFBUrl:"http://api.5moments.co.kr/socialOauthFB.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_REPLY",socialIframeGGUrl:"http://api.5moments.co.kr/socialOauthGG.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_REPLY",socialIframeTTUrl:"http://api.5moments.co.kr/socialOauthTTForIeFrame.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_REPLY",socialIframeKKUrl:"http://api.5moments.co.kr/socialOauthKK.wwz?id="+this._parent.id+"&uuid="+this.uuid+"&type=BOARD_REPLY"});this.$el.html(a);if(parseInt(this.$el.css("width"))<720){this.$el.css("width","720px")}b=JSON.parse(this.board.attrListWeb);if(b.buttonThemeActive){this.$(".wwz-button").addClass("is-active")}if(b.pagingThemeActive){this.$(".wwz-paging").addClass("is-active")}if(b.summaryThemeActive){this.$(".wwz-summary").addClass("is-active")}this.$el.off()},events:{"click .wwz-login-btn":"login","click .wwz-logout-btn":"logout","click .wwz-ctrl--toggle_login":"toggleLoginLayer","click .wwz-login-term":"loginTerm","click .wwz-new-item-write_submit":"write","click .wwz-ctrl--delete_comment":"remove","click .wwz-ctrl--edit_comment":"openModifyLayer","click .wwz-reply-item-modify_cancel":"closeModifyLayer","click .wwz-reply-item-modify_submit":"modify","click .wwz-ctrl--write_comment":"openReWriteLayer","click .wwz-ctrl--write_cancel":"closeReWriteLayer","click .wwz-ctrl--write_submit":"reWrite","click .wwz-item-private_btn":"checkInheritPrivate","click .wwz-refresh-btn":"refreshList"},loginTerm:function(b){var a="http://5moments.co.kr/comember/joinTerm.wwz";window.open(a+"?uuid="+this.uuid,"_blank");if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}},toggleLoginLayer:function(c){var a=$(c.target),b=this.$(".wwz-login-layer");if(a.hasClass("ctrl-btn")){if(a.hasClass("is-active")){b.hide();a.removeClass("is-active")}else{b.show();a.addClass("is-active")}}if(a.hasClass("is-active")){$(document).on("mouseup."+this.elementId,function(d){if($(d.target).is(a)){return}if(!b.is($(d.target))&&b.has($(d.target)).length===0){b.hide();a.removeClass("is-active");$(document).off("mouseup."+this.elementId)}})}},login:function(b){var a=$(b.target);if(a.hasClass("is-naver")){this._parent.login(b,"NAVER")}else{if(a.hasClass("is-facebook")){this._parent.login(b,"FACEBOOK")}else{if(a.hasClass("is-google")){this._parent.login(b,"GOOGLE")}else{if(a.hasClass("is-twitter")){this._parent.login(b,"TWITTER")}else{if(a.hasClass("is-kakao")){this._parent.login(b,"KAKAO")}else{return}}}}}},logout:function(){this._parent.logout()},write:function(d){var b,a,c;if(this.loginUser.isLogin){b=this.$(".wwz-new-item-private_btn").prop("checked");a=this.$(".wwz-new-item-write_textarea").val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}c={};c.contentHtml=a;c["private"]=b;c.isLast=false;this._parent.save(c)}else{alert(this.languageMap.loginAlert);return}},remove:function(d){var c=$(d.target),f=c.attr("data-idx"),b=false,a;if(confirm(this.languageMap.removeAlert)){if(f&&f.length>0&&this.loginUser.isLogin){if(this.board.contents&&this.board.contents.length>0){a=this.board.contents[this.board.contents.length-1];if(a.id==f){b=true}}this._parent.remove(f,b)}}},openModifyLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();$(".reply-item-body",".wwz-reply-item-"+c).addClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el)}},closeModifyLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){$(".reply-item-body",".wwz-reply-item-"+c).removeClass("is-edit-mode");this._parent.resizeParentHeight(this._parent.$el)}},modify:function(c){var b=$(c.target),d=b.attr("data-idx"),a;if(d&&d.length>0&&this.loginUser.isLogin){a=$(".wwz-reply-item-modify_textarea",".wwz-reply-item-"+d).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}obj={};obj.contentHtml=a;this._parent.modify(d,obj)}},openReWriteLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){this.closeAllLayer();$(".wwz-reply-item-write-"+c).addClass("is-active");this._parent.resizeParentHeight(this._parent.$el)}},closeReWriteLayer:function(b){var a=$(b.target),c=a.attr("data-idx");if(c&&c.length>0&&this.loginUser.isLogin){$(".wwz-reply-item-write-"+c).removeClass("is-active");this._parent.resizeParentHeight(this._parent.$el)}},reWrite:function(g){var f=$(g.target),h=f.attr("data-idx"),c,a,d,b;if(h&&h.length>0&&this.loginUser.isLogin){c=$("#private_mode",".wwz-reply-item-write-"+h).prop("checked");a=$(".wwz-ctrl--write_textarea",".wwz-reply-item-write-"+h).val();if(!a||a.length<1){alert(this.languageMap.emptyAlert);return}d={};d.contentHtml=a;d["private"]=c;d.parentId=h;d.isLast=false;if(this.board.contents&&this.board.contents.length>0){b=this.board.contents[this.board.contents.length-1];if(b.id==h&&this.board.contents.length==this.board.pageRow){d.isLast=true}}this._parent.save(d)}else{alert(this.languageMap.loginAlert);return}},checkInheritPrivate:function(b){var a=$(b.currentTarget);if(a.hasClass("is-parent_private")){if(typeof b.preventDefault==="function"){b.preventDefault();b.stopPropagation()}else{b.returnValue=false;b.cancelBubble=true}alert(this.languageMap.privateAlert)}},closeAllLayer:function(){this.$(".reply-item-body").removeClass("is-edit-mode");this.$(".reply-item-write").not(".reply-item-write--new").removeClass("is-active")},refreshList:function(){if(this._parent.isRefreshing){return}this.toggleProgress(true);this._parent.isRefreshing=true;this._parent.render()},toggleProgress:function(b){var a=this.$(".wwz-refresh-btn");a.toggleClass("is-active",b)}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("GalleryClient").body({staticVal:{_singleton:null,_gellery:null,getInstance:function(){if(GalleryClient._singleton==null){GalleryClient._singleton=new GalleryClient()}return GalleryClient._singleton}},GalleryClient:function(){},tagId:null,galleryType:null,collection:null,collectionInfinite:null,colum:null,row:null,mouseOverAction:null,mouseClickAction:null,imageDisplayType:null,gutter:null,margine:null,elementId:null,$el:null,uuid:null,totalWidth:null,contentMaxWidth:null,contentMaxHeight:null,layoutId:null,isFetched:false,initialize:function(f,e,b,a,g,m,j,h,l,d,c,i){var k=this;this.elementId=f;this.tagId=b;this.galleryType=e;this.colum=g;this.row=m;this.mouseOverAction=j;this.mouseClickAction=h;this.imageDisplayType=l;this.gutter=d;this.margine=c;this.uuid=a;this.layoutId=i;this.collection=new ContentsCollection();this.collection.uuid=this.uuid;if(this.tagId>1){this.collection.isFiltered=true;this.collection.filterId=this.tagId}else{this.collection.isFiltered=false}$.when(this.collection.fetch()).then(function(){k.render()})},render:function(){var a=Number(this.colum)*Number(this.row);this.$el=$(".cid-"+this.elementId);this.renderContent(a);if(this.mouseOverAction&&this.mouseOverAction==="DISPLAYTITLE"){this.$el.addClass("is-gallery-hover")}else{this.$el.removeClass("is-gallery-hover")}this.resizeParentHeight(this.$el);this.applyInfinitescroll(a)},renderContent:function(j){var n=this,l=0,b=9999,e=this.colum,d=this.gutter,k=this.galleryType,h=$("#galleryComponentImageList","#"+this.elementId).width(),g,m,c=0,f=0,i=0,a="#"+this.elementId;if(j&&j!==""){b=j}c=(h-(d*(e-1)))/e;c=Math.floor(c);if(this.collection.length>0){if(this.collection.length>b){row=b/e}else{row=this.collection.length/e}if($(a)&&$(a).length>0){i=$(a).parent().height();i=parseInt(i);f=i-($(a).position().top);f=parseInt(f/row);f=f<1?1:f}}$("#galleryComponentImageList","#"+this.elementId).empty();this.totalWidth=h;this.contentMaxWidth=c;this.contentMaxHeight=f;if(this.collection.length!==0){this.collection.each($.proxy(function(p,o){if(l<=b){g=new GalleryContentsView({parent:n,parentWidth:h,stake:$("#galleryComponentImageList","#"+this.elementId),model:p,type:k,column:e,contentWidth:c,contentHeight:f,mouseOverAction:this.mouseOverAction,mouseClickAction:this.mouseClickAction,thumbnailMethod:this.imageDisplayType});$("#galleryComponentImageList","#"+this.elementId).append(g.$el)}l=l+1},this))}m=JSON.parse(this.margine);$("#galleryComponentImageList","#"+this.elementId).find(".t-gallery-item").css(m);this.setGelleryType(this.galleryType,c,this.gutter)},setGelleryType:function(c,a,d){var b=$(".cid-"+this.elementId);b.addClass(c.toLowerCase());this.applyMasonry(a,d)},applyMasonry:function(c,f){var d=c||200,e=f||0,a=$("#galleryComponentImageList","#"+this.elementId),b=a.data("masonry");if(typeof b!=="undefined"){a.masonry("destroy")}a.masonry({columnWidth:d,itemSelector:".t-gallery-item",gutter:Number(e),transitionDuration:0})},applyInfinitescroll:function(d){var o=this,p=this.collectionInfinite,f=this.colum,l=this.galleryType,m=this.mouseOverAction,k=this.mouseClickAction,n=JSON.parse(this.margine),j,e,h,a,g,c,i=15,b=0;a=$("#galleryComponentImageList","#"+this.elementId);j=this.totalWidth;e=this.contentMaxWidth;h=this.contentMaxHeight;b=$(".lid-"+this.layoutId).parent().parent().position().top+$(".lid-"+this.layoutId).height();$(window).on("mousewheel DOMMouseScroll",function(q){$(window).trigger("scroll");$(window).off("mousewheel DOMMouseScroll")});$(window).scroll(function(){var r,q,s;s=this.scrollY+this.innerHeight;if(!$.isNumeric(s)){s=document.documentElement.scrollTop+document.documentElement.clientHeight}if(s>=b){if(o.isFetched){return}if(p){if(p.fetchPoint==-1){return}else{r=p.fetchPoint;q=p.fetchSize;g=p.isFiltered;c=p.tagId;p=new ContentsCollectionInfinite();p.setFetchSize(q);p.setFetchPoint(r);p.setIsFilterd(g);p.setTagId(c)}}else{p=new ContentsCollectionInfinite();p.setFetchPoint(i);p.isFiltered=o.collection.isFiltered;p.tagId=o.collection.filterId}p.uuid=o.uuid;o.collectionInfinite=p;o.isFetched=true;$.when(p.fetch()).then(function(){p.each(function(v,u){var t=new GalleryContentsView({stake:$("#galleryComponentImageList","#"+o.elementId),parent:o,parentWidth:j,model:v,type:l,column:f,contentWidth:e,contentHeight:h,mouseOverAction:m,mouseClickAction:k,thumbnailMethod:o.imageDisplayType}).$el;a.append(t)})}).then(function(){var u=$(window),t;$("#galleryComponentImageList","#"+o.elementId).find(".t-gallery-item").css(n);t=a.data("masonry");if(typeof t!=="undefined"){a.masonry("destroy")}a.masonry({columnWidth:e,itemSelector:".t-gallery-item",gutter:Number(o.gutter),transitionDuration:0});u.scrollTop(u.scrollTop()-5);o.isFetched=false;o.resizeParentHeight(o.$el)})}})},resizeParentHeight:function(b){var e,a,d,c;if(b&&b.length>0){a=b.parent().parent().height();d=b.height();c=b.position().top;if(a<(d+c)){e=b.parent().parent().attr("data-idx");$(".lid-"+e).css({height:(d+c+30)});$(".stub-"+e).css({height:(d+c+30)})}}}});var Content=Backbone.Model.extend({});var ContentsCollection=Backbone.Collection.extend({model:Content,isFiltered:false,filterId:"1",uuid:null,url:function(){if(this.isFiltered){return"http://api.5moments.co.kr/api/contents/filter/"+this.uuid+"/"+this.filterId+".json"}return"http://api.5moments.co.kr/api/contents/"+this.uuid+".json"},parse:function(a){return a.contents},comparator:function(a){return a.get("order")}});var ContentsCollectionInfinite=Backbone.Collection.extend({model:Content,fetchSize:10,fetchPoint:0,isFiltered:false,tagId:null,uuid:null,setTagId:function(a){this.tagId=a},setIsFilterd:function(a){this.isFiltered=a},setFetchSize:function(a){this.fetchSize=a},setFetchPoint:function(a){this.fetchPoint=a},url:function(){if(this.isFiltered){return"http://api.5moments.co.kr/api/contents/filter/"+this.uuid+"/"+this.tagId+"/"+this.fetchSize+"/"+this.fetchPoint+".json"}return"http://api.5moments.co.kr/api/contents/"+this.uuid+"/"+this.fetchSize+"/"+this.fetchPoint+".json"},parse:function(a){var b=a.contents.length;if(b&&b>0){this.fetchPoint=this.fetchPoint+b}else{this.fetchPoint=-1}return a.contents},comparator:function(a){return a.get("order")}});$.Class("ContentViewerForWeb").body({staticVal:{_singleton:null,getInstance:function(){if(ContentViewerForWeb._singleton==null){ContentViewerForWeb._singleton=new ContentViewerForWeb()}return ContentViewerForWeb._singleton}},ContentViewerForWeb:function(){this.dimmed=Dimmed.getInstance()},obj:null,dimmed:null,contentId:null,on:function(d,h,g){var e=this,f=d.src,c=d.width,a=d.height,b;this.contentId=d.contentId;this.$stake=d.stake;this._callback=h||null;if(g==true||g==undefined||g==null){this._isDimmed=true}else{this._isDimmed=false}if(this._isDimmed){this.dimmed.on("#000000",0.75)}this.obj=$($("#ContentsViewerForWebTemplate").html());this.obj.appendTo("body");b=$("#imgViewer");b.attr("src",f);this.optimizeSize(c,a,b);$(window).resize(function(i){e.optimizeSize(c,a,b)});$("#contentViewerClose").on("click",function(i){e.off()});$(".fragment_imageBox").on("click",function(i){e.off()});$("#contentViewerNext").on("click",function(i){e.slideContents("NEXT");if(typeof i.preventDefault==="function"){i.preventDefault();i.stopPropagation()}else{i.returnValue=false;i.cancelBubble=true}});$("#contentViewerPrev").on("click",function(i){e.slideContents("PREV");if(typeof i.preventDefault==="function"){i.preventDefault();i.stopPropagation()}else{i.returnValue=false;i.cancelBubble=true}});$(".fragment_imageBox .fragment_page").on("click",function(i){if(typeof i.preventDefault==="function"){i.preventDefault();i.stopPropagation()}else{i.returnValue=false;i.cancelBubble=true}})},slideContents:function(f){var c=this,b,d,e,a,g;if(f==="NEXT"){b=this.$stake.find(".t-gallery-item.is-current_gallery_content").next();if(b.hasClass("t-gallery-item")===false){b=this.$stake.find(".t-gallery-item").first()}}else{b=this.$stake.find(".t-gallery-item.is-current_gallery_content").prev();if(b.hasClass("t-gallery-item")===false){b=this.$stake.find(".t-gallery-item").last()}}d=b.find("img");g=d.prop("src");e=d.data("oriwidth");a=d.data("oriheight");$img=$("#imgViewer");$img.attr("src",g);this.optimizeSize(e,a,$img);$(window).off("resize");$(window).resize(function(h){c.optimizeSize(e,a,$img)});this.$stake.find(".t-gallery-item").removeClass("is-current_gallery_content");b.addClass("is-current_gallery_content")},optimizeSize:function(i,j,h){var a=$(h),f=$(window).width()-200,b=$(window).height()-100,c=i,k=j,e=i,l=j,g,d;if(e>f||l>b){g=e*b/l;d=l*f/e;if(g<=f){k=b;c=g}else{k=d;c=f}}a.css({width:parseInt(c)+"px",height:parseInt(k)+"px"})},off:function(){this.obj.remove();if(this._callback!=null){this._callback()}if(this._isDimmed){this.dimmed.off()}}});var GalleryContentsView=Backbone.View.extend({className:"t-gallery-item",mouseOverAction:null,mouseClickAction:null,_type:null,_width:null,_height:null,_column:null,_parentWidth:null,initialize:function(a){this._parentWidth=a.parentWidth;if(a.type){this._type=a.type}if(a.contentWidth){this._width=a.contentWidth}if(a.contentHeight){this._height=a.contentHeight}if(a.column){this._column=a.column}this.$el.data("contentid",this.model.get("id"));this.$stake=$(a.stake);this.mouseOverAction=a.mouseOverAction;this.mouseClickAction=a.mouseClickAction;this.thumbnailMethod=a.thumbnailMethod.toLowerCase();this.contentViewer=ContentViewerForWeb.getInstance();this.render()},render:function(){var d=this.model.toJSON(),e=this.thumbnailMethod,c,b,a;d=this.optimizeImageSize(d);c=_.template($("#GalleryContentsTemplate").html(),{content:d});this.$el.html(c);if(this._type==="LIST"){if(this._width<d.adjWidth){b=this._width}else{b=d.adjWidth}}else{b=this._width}if(this._type==="GRID"){if(this._width>=this._height){b=this._height;a=this._height}else{b=this._width;a=this._width}}else{if(this._type==="MOSAIC"){imageMethod="resize";a=d.adjHeight}else{a=d.adjHeight}}this.$el.css({width:b,height:a});this.$el.nailthumb({width:b,height:a,method:e,replaceAnimation:null,maxEnlargement:1});this.$el.on("click",$.proxy(this.itemClickAction,this))},events:{"mouseover .img_box_wrap":"itemOverAction"},itemClickAction:function(){var a,b;if(!this.mouseClickAction){return}if(this.mouseClickAction==="ORGIN"){b={stake:this.$stake,contentId:this.model.get("id"),title:this.model.get("title"),description:this.model.get("description"),width:this.model.get("width"),height:this.model.get("height"),src:this.model.get("url")};$(".wwz-page").addClass("dimmed");this.$el.addClass("is-current_gallery_content");this.applyDimmed();a=function(){$(".wwz-page").removeClass("dimmed");$(".t-gallery-item").removeClass("is-current_gallery_content");this.applyUndimmed()};this.contentViewer.on(b,$.proxy(a,this))}},itemOverAction:function(){if(!this.mouseOverAction){return}},applyDimmed:function(){var b=window.navigator.userAgent,a=($("html, body").scrollTop())*-1;if(b.indexOf("Chrome")!==-1){a=(document.body.scrollTop)*-1}else{if(b.indexOf("Safari")!==-1){a=(document.body.scrollTop)*-1}}$("body").addClass("noscroll").css("top",a)},applyUndimmed:function(){var a=$(".noscroll").css("top"),b=window.navigator.userAgent,c=parseInt(a,10)*-1;$("body").removeClass("noscroll");$("html, body").scrollTop(c);if(b.indexOf("Chrome")!==-1){document.body.scrollTop=c}else{if(b.indexOf("Safari")!==-1){document.body.scrollTop=c}}},optimizeImageSize:function(g){var b=this._width,f,c,a,d,e;if(g.width>g.height){f=Math.floor(b/4*3)}else{if(g.width<g.height){f=Math.floor(b/3*4)}else{f=b}}c=g.width;a=g.height;if(c>b){e=c-b;d=e/c;a=a-(a*d);c=b}if(this._type=="LIST"||this._column==1){if(a>this._height){e=a-this._height;d=e/a;c=c-(c*d);a=this._height}}else{if(this._type=="MOSAIC"){}else{if(a>f){e=a-f;d=e/a;c=c-(c*d);a=f}}}g.adjWidth=Math.floor(c);g.adjHeight=Math.ceil(a);return g}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("ImageSlideClient").body({staticVal:{_singleton:null,_gellery:null,getInstance:function(){if(ImageSlideClient._singleton==null){ImageSlideClient._singleton=new ImageSlideClient()}return ImageSlideClient._singleton}},ImageSlideClient:function(){},slideType:null,slideCursorType:null,slidePointType:null,slidePointPositionType:null,slidePointColor:null,slidePointSelectedColor:null,count:null,width:null,height:null,speed:4000,isWholeWidth:null,elementId:null,$el:null,uuid:null,initialize:function(g,a,d,j,h,f,k,l,i,c,m,b,e){var n=this;this.elementId=g;this.uuid=a;this.slideType=d;this.slideCursorType=j;this.slidePointType=h;this.slidePointPositionType=f;this.slidePointColor=k;this.slidePointSelectedColor=l;this.count=i;this.width=c;this.height=m;this.isWholeWidth=b;this.speed=(!e||e<500)?4000:e;n.render()},render:function(){var a=this,d,b,c;this.$el=$(".cid-"+this.elementId);if(this.isWholeWidth){if(!this.$el.parent().hasClass("wwz-page")){c=this.$el.detach();$(".wwz-page").append(c)}this.$el.addClass("is-whole_width");this.$el.find(".d-component-contents").css({width:"auto",height:this.height})}else{this.$el.removeClass("is-whole_width");this.$el.find(".d-component-contents").css({width:this.width,height:this.height})}if(this.slideType&&this.slideType==="FADE"){$(".wwz-slide--frame",this.$el).slidesjs({width:this.width,height:this.height,navigation:{active:false,effect:"fade"},pagination:{active:true,effect:"fade"},effect:{fade:{speed:400}},play:{active:false,auto:true,effect:"fade",interval:a.speed,swap:true},callback:{loaded:function(e){$(".slidesjs-pagination-item a",a.$el).css("background-color",a.slidePointColor);$(".slidesjs-pagination-item a.active",a.$el).css("background-color",a.slidePointSelectedColor)},start:function(e){$(".slidesjs-pagination-item a",a.$el).css("background-color",a.slidePointColor);$(".slidesjs-pagination-item a.active",a.$el).css("background-color",a.slidePointSelectedColor)},complete:function(f){var e=a.$el.find(".wwz-slide--frame").data("plugin_slidesjs")||null;if(e){setTimeout(function(){e.play(true)},e.options.play.interval)}}}})}else{$(".wwz-slide--frame",this.$el).slidesjs({width:this.width,height:this.height,navigation:false,play:{active:false,auto:true,interval:a.speed,swap:true},callback:{loaded:function(e){$(".slidesjs-pagination-item a",a.$el).css("background-color",a.slidePointColor);$(".slidesjs-pagination-item a.active",a.$el).css("background-color",a.slidePointSelectedColor)},start:function(e){$(".slidesjs-pagination-item a",a.$el).css("background-color",a.slidePointColor);$(".slidesjs-pagination-item a.active",a.$el).css("background-color",a.slidePointSelectedColor)},complete:function(f){var e=a.$el.find(".wwz-slide--frame").data("plugin_slidesjs")||null;if(e){setTimeout(function(){e.play(true)},e.options.play.interval)}}}})}$(".t-slide-nav_btn",this.$el).addClass(this.slideCursorType);d=this.$el.find(".wwz-slide--frame").find(".slidesjs-pagination");b=this.slidePointPositionType;this.$el.find(".wwz-slide--frame").find(".slidesjs-pagination").addClass(b);if(b==="BOTTOM_CENTER"||b==="TOP_CENTER"){d.css({"margin-top":0,"margin-left":((d.width())/-2)+"px",})}else{if(b==="LEFT"||b==="RIGHT"){d.css({"margin-top":((d.height())/-2)+"px","margin-left":0})}else{d.css({"margin-top":0,"margin-left":0})}}}});$.Class("InputFormClient").body({staticVal:{_singleton:null,getInstance:function(){if(InputFormClient._singleton==null){InputFormClient._singleton=new InputFormClient()}return InputFormClient._singleton}},InputFormClient:function(){},inputKeys:[],resultMessage:null,$el:null,uuid:null,id:null,elementId:null,transmitter:null,isIe9Under:false,initialize:function(c,d,b,e,a){this.inputKeys=JSON.parse(c);this.resultMessage=d;this.uuid=b;this.elementId=a;this.id=e;if($(".ie-detection").hasClass("ie8")||$(".ie-detection").hasClass("ie9")){this.isIe9Under=true}if(this.isIe9Under||BrowserDetectionHelper.getInstance().browser==="explorer"){this.transmitter=DataInputFormTransmitterForIe.getInstance()}else{this.transmitter=DataInputFormTransmitter.getInstance()}this.transmitter.setTargetClient(this);$(".wwz-datePicker-month").on("change",function(l){var f=$(l.target),n,o,g,k,h,m,j;n=f.attr("data-idx");if(n||n.length>0){o=$("#datePicker_year_"+n).val();g=$("#datePicker_month_"+n+" option:selected").val();m=(new Date(o,g,0)).getDate().toString();k=$("#datePicker_month_"+n);h=$("#datePicker_day_"+n);k.parent().find(".time-value").text(g);h.empty();for(j=1;j<=m;j++){h.append("<option value='"+j+"'>"+j+"</option>")}}});$(".wwz-datePicker-day, .wwz-datePicker-hour, .wwz-datePicker-time").on("change",function(f){$(f.target).parent().find(".time-value").text($(f.target).find("option:selected").val())})},resetInput:function(){var a=this;$.each(this.inputKeys,function(b,d){var e=d.id,c;if(!e){return true}if(e.indexOf(",")>-1){c=e.split(",");$.each(c,function(g,f){a.clearInputByType(f,d.type);a.clearErrorHandler(d.error,d.errorClass)})}else{a.clearInputByType(e,d.type);a.clearErrorHandler(d.error,d.errorClass)}})},clearInputByType:function(e,c){var d=$("#"+e),b=d.prop("type"),a;if(!b){if(c==="RADIO"||c==="CHECKBOX"){d=$("."+e);b=d.first().prop("type")}else{return}}if(b.indexOf("select")>-1){b="select"}if(b==="select"){a=d.find("option").first();a.prop("selected",true);d.trigger("change")}else{if(b==="radio"||b==="checkbox"){d.each(function(f,g){$(g).prop("checked",false)})}else{if(c==="CALENDAR"){d.val(new Date().getFullYear())}else{d.val("")}}}},clearErrorHandler:function(b,a){$(b).text("");$(a).removeClass("is-nogo")},errorHandler:function(b,a,c){$(b).text(c);$(a).addClass("is-nogo");return null},submit:function(){var a=this,b;b=function(){a.resetInput()};this.transmitter.run(this.inputKeys,this.resultMessage,this.uuid,this.id,b)}});$.Class("ListingImageClient").body({staticVal:{_singleton:null,_gellery:null,getInstance:function(){if(ListingImageClient._singleton==null){ListingImageClient._singleton=new ListingImageClient()}return ListingImageClient._singleton}},ListingImageClient:function(){},imageListingType:null,colum:null,mouseOverAction:null,mouseClickAction:null,imageDisplayType:null,gutter:null,margine:null,elementId:null,$el:null,uuid:null,layoutId:null,count:null,contents:null,initialize:function(d,l,a,f,e,i,g,k,c,b,h){var j=this;this.layoutId=h;this.elementId=d;this.imageListingType=l;this.colum=e;this.mouseOverAction=i;this.mouseClickAction=g;this.imageDisplayType=k;this.gutter=c;this.margine=b;this.uuid=a;this.count=f;if(dataObj[this.elementId+"_contents"]){this.contents=dataObj[this.elementId+"_contents"]}j.render()},render:function(){var a=this.count;this.$el=$(".cid-"+this.elementId);this.renderContent(a);if(this.mouseOverAction&&this.mouseOverAction==="DISPLAYTITLE"){this.$el.addClass("is-listing-hover")}else{this.$el.removeClass("is-listing-hover")}},renderContent:function(j){var o=this,n=0,h=0,c=this.colum,f=this.gutter,e=this.imageListingType,d,k,a,r=0,q=0,m,g,i=this.contents,p=0,b,l;d=$("#"+this.elementId).width();p=parseInt($("#"+this.elementId).find(".t-listing-item").css("border"));if(!p){p=0}b=$("#"+this.elementId).parent().height();l=parseInt($("#"+this.elementId).position().top);if(!l){l=0}r=(d-(f*(c-1)))/c;r=Math.floor(r);if(!i){return}if(i.length>0){h=j/c;if($("#"+this.elementId)&&$("#"+this.elementId).length>0){q=b-l-(p*2*h);q=parseInt(q/h);q=q<1?1:q}}$("#listingImageComponentImages","#"+this.elementId).empty();if(i.length<1){return}else{$.each(i,$.proxy(function(s,t){if(s<j){k=new ImageListingContentView({stake:o.$el.find("#listingImageComponentImages"),parent:o,parentWidth:d,model:t,type:e,column:c,contentWidth:r,contentHeight:q,mouseOverAction:this.mouseOverAction,mouseClickAction:this.mouseClickAction,thumbnailMethod:this.imageDisplayType,});$("#listingImageComponentImages","#"+this.elementId).append(k.$el)}},this))}$("#listingImageComponentImages","#"+this.elementId).css("width",d+"px");a=JSON.parse(this.margine);$("#listingImageComponentImages","#"+this.elementId).find(".t-listing-item").css(a);this.applyMasonry(r,f);m=$("#listingImageComponentImages","#"+this.elementId).find(".t-listing-item");if(m&&m.length>0){g=$(m[0]).width()+(p*2);if(parseInt(r)>=parseInt(g)){if(this.imageListingType!=="LIST"){this.applyMasonry(g,f)}}}},applyMasonry:function(c,f){var d=c||200,e=f||0,a=$("#listingImageComponentImages","#"+this.elementId),b=a.data("masonry");if(typeof b!=="undefined"){a.masonry("destroy")}a.masonry({columnWidth:d,itemSelector:".t-listing-item",gutter:Number(e),transitionDuration:0})},});$.Class("DetailViewerForWeb").body({staticVal:{_singleton:null,getInstance:function(){if(DetailViewerForWeb._singleton==null){DetailViewerForWeb._singleton=new DetailViewerForWeb()}return DetailViewerForWeb._singleton}},DetailViewerForWeb:function(){this.dimmed=Dimmed.getInstance()},obj:null,dimmed:null,contentId:null,on:function(e,h,g){var b=this,f=e.src,d=parseInt(e.detailWidth),a=parseInt(e.detailHeight),c;this.$stake=e.stake;this._callback=h||null;if(g==true||g==undefined||g==null){this._isDimmed=true}else{this._isDimmed=false}if(this._isDimmed){this.dimmed.on("#000000",0.75)}this.obj=$($("#DetailViewerForWebTemplate").html());this.obj.appendTo("body");c=$("#imgViewer");c.attr("src",f);b.optimizeSize(d,a,c);$("#contentViewerClose").on("click",function(i){b.off()});$(".fragment_detailBox").on("click",function(i){b.off()});$(".fragment_detailBox .fragment_page").on("click",function(i){if(typeof i.preventDefault==="function"){i.preventDefault();i.stopPropagation()}else{i.returnValue=false;i.cancelBubble=true}})},optimizeSize:function(j,k,h){var a=$(h),i=a.parent(),f=960,b=$(window).height()-160,c=j,l=k,e=j,m=k,g,d;if(e>f){g=f;d=m*f/e;c=g;l=d}if(l>=b){a.css({width:parseInt(c)+"px",height:parseInt(l)+"px","margin-top":80+"px","margin-bottom":80+"px"})}else{a.css({width:parseInt(c)+"px",height:parseInt(l)+"px"});i.addClass("is-align_center").css({"margin-top":(-1*(parseInt(l)/2))+"px","margin-left":(-1*(parseInt(c)/2))+"px",})}},off:function(){this.obj.remove();if(this._callback!=null){this._callback()}if(this._isDimmed){this.dimmed.off()}}});var ImageListingContentView=Backbone.View.extend({className:"t-listing-item",mouseOverAction:null,mouseClickAction:null,contentViewer:null,_type:null,_width:null,_height:null,_column:null,_parent:null,_parentWidth:null,initialize:function(a){this._parent=a.parent;this._parentWidth=a.parentWidth;if(a.type){this._type=a.type}if(a.contentWidth){this._width=a.contentWidth}if(a.contentHeight){this._height=a.contentHeight}if(a.column){this._column=a.column}this.$el.data("contentid",this.model.id);this.mouseOverAction=a.mouseOverAction;this.mouseClickAction=a.mouseClickAction;this.thumbnailMethod=a.thumbnailMethod.toLowerCase();this.$stake=$(a.stake);this.contentViewer=DetailViewerForWeb.getInstance();this.render()},render:function(){var e=this.model,b=this.thumbnailMethod,f,i,g,c,d,h,a;e=this.optimizeImageSize(e);i=_.template($("#ComponentImageListingContentsTemplate").html(),{content:e});this.$el.html(i);if(this._type==="LIST"){if(this._width<e.adjWidth){g=this._width}else{g=e.adjWidth}}else{g=this._width}if(this._type==="GRID"){c=this._width}else{if(this._type==="MOSAIC"){imageMethod="resize";c=e.adjHeight}else{c=e.adjHeight}}this.$el.css({width:parseInt(g)+"px",height:parseInt(c)+"px"});this.$el.nailthumb({width:g,height:c,method:b,replaceAnimation:null,maxEnlargement:1});if(this.mouseClickAction==="LINK"){d=this.model.linkUrl;a=this.model.linkType;if(d){if(d.indexOf("_user_url_")>-1){h=d.replace(/_user_url_/gi,"/");f="<a href='"+h+"' target='"+a+"'></a>"}else{if(d.indexOf("ScrollLinkHelper")>-1){f='<a href="#scroll_link" onclick="'+d+'" target="'+a+'"></a>'}else{h=d;f="<a href='"+h+"' target='"+a+"'></a>"}}$(this.$el.find(".img_box")[0]).wrap(f)}}else{this.$el.on("click",$.proxy(this.itemClickAction,this))}},events:{"mouseover .img_box_wrap":"itemOverAction"},itemClickAction:function(){var a=this.model.detailUrl,b,c;if(!this.mouseClickAction){return}if(this.mouseClickAction==="DETAIL"){if(!a||a===""){return}c={stake:this.$stake,title:this.model.title,description:this.model.description,src:a,detailWidth:this.model.detailWidth,detailHeight:this.model.detailHeight};this.applyDimmed();this.$el.addClass("is-current_listing_content");b=function(){this.$stake.find(".t-listing-item").removeClass("is-current_listing_content");this.applyUndimmed()};this.contentViewer.on(c,$.proxy(b,this))}},itemOverAction:function(){if(!this.mouseOverAction){return}},applyDimmed:function(){var b=window.navigator.userAgent,a=($("html, body").scrollTop())*-1;if(b.indexOf("Chrome")!==-1){a=(document.body.scrollTop)*-1}else{if(b.indexOf("Safari")!==-1){a=(document.body.scrollTop)*-1}}$("body").addClass("conditional_scroll").css("top",a);$(".wwz-page").addClass("dimmed")},applyUndimmed:function(){var a=$(".conditional_scroll").css("top"),b=window.navigator.userAgent,c=parseInt(a,10)*-1;$("body").removeClass("conditional_scroll");$(".wwz-page").removeClass("dimmed");$("html, body").scrollTop(c);if(b.indexOf("Chrome")!==-1){document.body.scrollTop=c}else{if(b.indexOf("Safari")!==-1){document.body.scrollTop=c}}},optimizeImageSize:function(g){var b,f,c,a,d,e;b=this._width;if(g.width>g.height){f=Math.floor(b/4*3)}else{if(g.width<g.height){f=Math.floor(b/3*4)}else{f=b}}c=g.width;a=g.height;if(c>b){e=c-b;d=e/c;a=a-(a*d);c=b}if(this._type=="LIST"||this._column==1){if(a>this._height){e=a-this._height;d=e/a;c=c-(c*d);a=this._height}}else{if(this._type=="MOSAIC"){}else{if(a>f){e=a-f;d=e/a;c=c-(c*d);a=f}}}g.adjWidth=Math.floor(c);g.adjHeight=Math.ceil(a);return g}});$.Class("MenuBarClient").body({staticVal:{_singleton:null,_isMobile:false,getInstance:function(){if(MenuBarClient._singleton==null){MenuBarClient._singleton=new MenuBarClient()}return MenuBarClient._singleton}},MenuBarClient:function(){},initialize:function(c){c=c||{};$.extend(true,this,c);if(!this.elementId||this.elementId===""){return}this.$base=$("#"+this.elementId);var a=this.$base.find(".menu-bar-item");var b=this.$base.find(".menu-bar-child-item");a.hover($.proxy(this.enterItem,this),$.proxy(this.leaveItem,this));b.hover($.proxy(this.enterItem,this),$.proxy(this.leaveItem,this))},enterItem:function(g){var a;var b=$(g.currentTarget);var d=b.hasClass("menu-bar-item");var f=this.isNotEmpty(this.$base.attr("data-type"))?this.$base.attr("data-type"):"default";var c;if(d){c=this.hover;a=b.find(".root-item")}else{c=this.hoverSub;a=b.find(".sub-item")}a.css("color",c);if(d&&f!=="default"){this.showSubLayer(b)}},leaveItem:function(g){var a;var b=$(g.currentTarget);var d=b.hasClass("menu-bar-item");var f=this.isNotEmpty(this.$base.attr("data-type"))?this.$base.attr("data-type"):"default";var c;if(d){c=this.hoverRelease;a=b.find(".root-item")}else{c=this.hoverSubRelease;a=b.find(".sub-item")}a.css("color",c);if(d&&f!=="default"){this.hideSubLayer(b)}},isNotEmpty:function(a){return(typeof a!=="undefined"&&$.trim(a).length>0)},showSubLayer:function(f){var c=this;var b=this.isNotEmpty(this.$base.attr("data-effect"))?this.$base.attr("data-effect"):"none";var e=this.isNotEmpty(this.$base.attr("data-duration"))?this.$base.attr("data-duration"):250;var d=this.isNotEmpty(this.$base.attr("data-type"))?this.$base.attr("data-type"):"default";var a;if(d==="default"){return}else{if(d==="entire"){a=this.$base.find(".menu-bar-child_list")}else{a=f.find(".menu-bar-child_list")}}this.setLayoutZindexToTop(f);this.initializeSubLayerPosition(f);this.applyAlignStyle(a);this.isShowing=true;switch(b){case"slide":a.stop(false,true).slideDown(parseInt(e,10),function(){c.isShowing=false});break;case"fade":a.stop(false,true).fadeIn(parseInt(e,10),function(){c.isShowing=false});break;default:a.show();c.isShowing=false}},hideSubLayer:function(f){var c=this;var b=this.isNotEmpty(this.$base.attr("data-effect"))?this.$base.attr("data-effect"):"none";var e=this.isNotEmpty(this.$base.attr("data-duration"))?this.$base.attr("data-duration"):250;var d=this.isNotEmpty(this.$base.attr("data-type"))?this.$base.attr("data-type"):"default";var a;if(d==="default"){return}else{if(d==="entire"){a=this.$base.find(".menu-bar-child_list")}else{a=f.find(".menu-bar-child_list")}}switch(b){case"slide":a.stop().slideUp(parseInt(e,10),function(){if(!c.isShowing){c.setLayoutZindexToBottom(f)}});break;case"fade":a.stop().fadeOut(parseInt(e,10),function(){if(!c.isShowing){c.setLayoutZindexToBottom(f)}});break;default:a.hide();this.setLayoutZindexToBottom(f)}},setLayoutZindexToTop:function(a){a.parents(".container-stub").css({"z-index":100})},setLayoutZindexToBottom:function(a){var b=a.parents(".container-stub").attr("style");a.parents(".container-stub").attr("style",b.replace(/(z-index\W*:)\W*(100;)/gi,""))},applyAlignStyle:function(b){var e=this.$base.attr("data-align");var d=b.parents(".menu-bar-item").hasClass("is-horizontal");var c;var a;if(e==="center"){c=d?"margin-left":"margin-top";a=d?b.width():b.height();b.css(c,-1*(a/2))}},initializeSubLayerPosition:function(c){var b=this.$base.find(".t-menu-bar-item_list");var d=this.$base.find(".menu-bar-child_list");var f=c.hasClass("is-horizontal");var e=f?"top":"left";var a=f?b.height():b.width();d.css(e,a)}});if(typeof window.console=="undefined"){window.console={log:function(){}}}$.Class("PagecontextClient").body({staticVal:{_singleton:null,_isMobile:false,getInstance:function(){if(PagecontextClient._singleton==null){PagecontextClient._singleton=new PagecontextClient()}return PagecontextClient._singleton}},PagecontextClient:function(){},initialize:function(d,h,b){var c=window.location.href,f,g,a,e;if(c.indexOf("?p=")<0){startIndex=document.cookie.indexOf(d);if(startIndex>-1){startIndex+=d.length;endIndex=document.cookie.indexOf(";",startIndex);if(endIndex<0){endIndex=document.cookie.length}f=unescape(document.cookie.substring(startIndex+1,endIndex))}else{f="NOT_AUTH"}}else{f=c.substr(c.indexOf("?p=")+3);document.cookie=d+"="+escape(f)+";"}if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))){PagecontextClient._isMobile=true}g=this.getCookie("stId");if(g){a=g+"_P"}else{g="st"+Math.floor(Math.random()*1000000);this.setCookie("stId",g,-1);a=g+"_V"}e=localStorage.getItem("mToken");if(!e){e=0}this.call(f,h,b,a,e)},call:function(f,g,c,a,e){var b=this,d="http://api.5moments.co.kr/api/context/v2/"+g+"/"+c+"/"+f+"/"+a+"/"+e+".json";$.support.cors=true;$.ajax({type:"POST",url:d,async:false,success:function(i){var h=i.result;if(!h){i=JSON.parse(i);h=i.result}b.parseResult(h,g)},error:function(j,h,i){if(window.console==undefined){console={log:function(){}}}console.log("Network error : "+i)}})},parseResult:function(a,d){var e,b,c=this;a=JSON.parse(a);e=a.auth;b=a.popup;if(e&&e.result==="FAIL"){location.href="http://www.5moments.co.kr/private/auth.wwz?id="+d}else{if($.isArray(b.ids)){$.each(b.ids,function(f,h){var g=c.getCookie("p_"+h.id);if(!g&&!PagecontextClient._isMobile){window.open("/popup.html?id="+h.id,h.title,"scrollbars="+h.useScroll+",toolbar=no,resizable=no,width=5,height=5,top=0,left=0")}})}else{return}}},getCookie:function(a){a=a+"=";var c=document.cookie;var e=c.indexOf(a);var d="";if(e!=-1){e+=a.length;var b=c.indexOf(";",e);if(b==-1){b=c.length}d=c.substring(e,b)}return unescape(d)},setCookie:function(a,c,d){var b=new Date();b.setDate(b.getDate()+d);cookies=a+"="+escape(c)+"; path=/ ";if(d&&d<0){cookies+=";expires=-1;"}else{if(typeof d!="undefined"){cookies+=";expires="+b.toGMTString()+";"}}document.cookie=cookies}});$.Class("ScrollLinkHelper").body({staticVal:{duration:250,exec:function(d,c){var b=ScrollLinkHelper._isDesignPreview($(d.currentTarget));var f=b?$("#preview_window"):$("body");var a;if(window.PropertiesHolder){a=PropertiesHolder.getInstance().getProperty("CONTEXT","isMobile");if(!b){return}if(!a&&b&&window._isPreview==="true"){f=$("body")}}if(c==="top"){f.scrollTo(0,ScrollLinkHelper.duration)}else{f.scrollTo("."+c,ScrollLinkHelper.duration)}if(typeof d.preventDefault==="function"){d.preventDefault()}else{d.returnValue=false}},setDuration:function(a){ScrollLinkHelper.duration=a},_isDesignPreview:function(a){return a.parents("#preview_window").length>0}}});